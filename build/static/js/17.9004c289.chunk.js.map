{"version":3,"sources":["../node_modules/@material-ui/icons/PhotoCamera.js","../node_modules/@material-ui/icons/Videocam.js","Sidebar/SidebarChat.js"],"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","default","_react","_default","createElement","Fragment","cx","cy","r","d","CryptoJS","SidebarChat","id","name","useState","messages","setMessages","useEffect","fetchRooms","db","collection","doc","orderBy","onSnapshot","snapshot","docs","map","data","Suspense","fallback","to","className","photo","video","message","decryptedData","AES","decrypt","toString","enc","Utf8","url"],"mappings":"mGAEA,IAAIA,EAAyBC,EAAQ,IAErCC,OAAOC,eAAeC,EAAS,aAAc,CAC3CC,OAAO,IAETD,EAAQE,aAAU,EAElB,IAAIC,EAASP,EAAuBC,EAAQ,IAIxCO,GAAW,EAFMR,EAAuBC,EAAQ,KAElBK,SAASC,EAAOD,QAAQG,cAAcF,EAAOD,QAAQI,SAAU,KAAMH,EAAOD,QAAQG,cAAc,SAAU,CAC5IE,GAAI,KACJC,GAAI,KACJC,EAAG,QACDN,EAAOD,QAAQG,cAAc,OAAQ,CACvCK,EAAG,+JACA,eAELV,EAAQE,QAAUE,G,iRCnBlB,IAAIR,EAAyBC,EAAQ,IAErCC,OAAOC,eAAeC,EAAS,aAAc,CAC3CC,OAAO,IAETD,EAAQE,aAAU,EAElB,IAAIC,EAASP,EAAuBC,EAAQ,IAIxCO,GAAW,EAFMR,EAAuBC,EAAQ,KAElBK,SAASC,EAAOD,QAAQG,cAAc,OAAQ,CAC9EK,EAAG,0GACD,YAEJV,EAAQE,QAAUE,G,iICRZO,G,OAAWd,EAAQ,MAoDVe,UAnDf,YAAoC,IAAD,UAAZC,EAAY,EAAZA,GAAIC,EAAQ,EAARA,KACzB,EAAgCC,mBAAS,IAAzC,mBAAOC,EAAP,KAAiBC,EAAjB,KAEAC,qBAAU,WACRC,MACC,CAACN,IAEJ,IAAMM,EAAa,WACbN,GACFO,IAAGC,WAAW,SACXC,IAAIT,GACJQ,WAAW,YACXE,QAAQ,YAAa,QACrBC,YAAW,SAACC,GAAD,OACVR,EAAYQ,EAASC,KAAKC,KAAI,SAACL,GAAD,OAASA,EAAIM,eAWnD,OACE,kBAAC,IAAMC,SAAP,CAAgBC,SAAU,uCACxB,kBAAC,IAAD,CAAMC,GAAE,iBAAYlB,GAAMmB,UAAU,qBAClC,yBAAKA,UAAU,eACb,kBAAC,IAAD,KAASlB,EAAK,IACd,yBAAKkB,UAAU,qBACb,4BAAKlB,IACJ,UAAAE,EAAS,UAAT,eAAaiB,OACZ,yBAAKD,UAAU,mBACb,kBAAC,IAAD,MADF,IACsB,wCAEpB,MACH,UAAAhB,EAAS,UAAT,eAAakB,OACZ,yBAAKF,UAAU,mBACb,kBAAC,IAAD,MADF,IACmB,wCAEjB,KACJ,4BAAI,UAAAhB,EAAS,UAAT,eAAamB,SAvBX,SAACP,GACf,IACMQ,EADQzB,EAAS0B,IAAIC,QAAQV,EAAM,qBACbW,SAAS5B,EAAS6B,IAAIC,MAElD,OAAOb,EAAOQ,EAAgBR,EAmBKU,CAAO,UAACtB,EAAS,UAAV,aAAC,EAAamB,SAAW,IAC3D,qCAAInB,EAAS,UAAb,aAAI,EAAa0B","file":"static/js/17.9004c289.chunk.js","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)(_react.default.createElement(_react.default.Fragment, null, _react.default.createElement(\"circle\", {\n  cx: \"12\",\n  cy: \"12\",\n  r: \"3.2\"\n}), _react.default.createElement(\"path\", {\n  d: \"M9 2L7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2H9zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z\"\n})), 'PhotoCamera');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)(_react.default.createElement(\"path\", {\n  d: \"M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11l-4 4z\"\n}), 'Videocam');\n\nexports.default = _default;","import React, { useEffect, useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport Avatar from \"@material-ui/core/Avatar\";\r\nimport PhotoCameraIcon from \"@material-ui/icons/PhotoCamera\";\r\nimport VideocamIcon from \"@material-ui/icons/Videocam\";\r\nimport db from \"../firebase\";\r\nimport \"./SidebarChat.css\";\r\n// console.log(use.uid);\r\n\r\nconst CryptoJS = require(\"crypto-js\");\r\nfunction SidebarChat({ id, name }) {\r\n  const [messages, setMessages] = useState([]);\r\n\r\n  useEffect(() => {\r\n    fetchRooms();\r\n  }, [id]);\r\n\r\n  const fetchRooms = () => {\r\n    if (id) {\r\n      db.collection(\"rooms\")\r\n        .doc(id)\r\n        .collection(\"messages\")\r\n        .orderBy(\"timestamp\", \"desc\")\r\n        .onSnapshot((snapshot) =>\r\n          setMessages(snapshot.docs.map((doc) => doc.data()))\r\n        );\r\n    }\r\n  };\r\n\r\n  const decrypt = (data) => {\r\n    const bytes = CryptoJS.AES.decrypt(data, \"my-secret-key@123\");\r\n    const decryptedData = bytes.toString(CryptoJS.enc.Utf8);\r\n    // return decryptedData\r\n    return data ? decryptedData : data;\r\n  };\r\n  return (\r\n    <React.Suspense fallback={<p>Loading</p>}>\r\n      <Link to={`/rooms/${id}`} className=\"sidebarChat__link\">\r\n        <div className=\"sidebarChat\">\r\n          <Avatar>{name[0]}</Avatar>\r\n          <div className=\"sidebarChat__info\">\r\n            <h2>{name}</h2>\r\n            {messages[0]?.photo ? (\r\n              <div className=\"sideChat__photo\">\r\n                <PhotoCameraIcon /> <span>Photo</span>\r\n              </div>\r\n            ) : null}\r\n            {messages[0]?.video ? (\r\n              <div className=\"sideChat__photo\">\r\n                <VideocamIcon /> <span>Video</span>\r\n              </div>\r\n            ) : null}\r\n            <p>{messages[0]?.message ? decrypt(messages[0]?.message) : \"\"}</p>\r\n            <p>{messages[0]?.url}</p>\r\n          </div>\r\n        </div>\r\n      </Link>\r\n    </React.Suspense>\r\n  );\r\n}\r\n\r\nexport default SidebarChat;\r\n"],"sourceRoot":""}