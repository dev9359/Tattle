{"version":3,"sources":["StateProvider.js","firebase.js","actions/userAction.js","shared/toastInfo.js","images/logo.webp","Login.js","images/Google G Logo.png","Sidebar/UserAvatar.js","shared/TooltipCustom.js","Sidebar/NewChat.js","Sidebar/Status.js","shared/DropdownMenu.js","shared/DialogCustom.js","Sidebar/DrawerLeft.js","shared/SearchBar.js","Sidebar/SidebarChat.js","Sidebar/Sidebar.js","Chat/DrawerRight.js","Chat/DrawerRightSearch.js","Chat/DrawerRightInfo.js","Chat/ChatHeader.js","Chat/ChatBody.js","Chat/DrawerBottom.js","Chat/preview.style.js","Chat/ChatFooter.js","Chat/ChatLandingScreen.js","Chat/Chat.js","App.js","serviceWorkerRegistration.js","reducer.js","index.js"],"names":["StateContext","createContext","StateProvider","reducer","initialState","children","Provider","value","useReducer","useStateValue","useContext","db","firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","firestore","auth","provider","GoogleAuthProvider","storage","setUser","authUser","type","user","toastInfo","toastTitle","toastId","position","toast","info","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","Login","className","rel","src","Logo","alt","onClick","signInWithPopup","catch","error","signInAnonymously","UserAvatar","photoURL","style","cursor","Avatar","TooltipCustom","name","icon","Tooltip","title","fontSize","padding","placement","IconButton","NewChat","useState","roomName","setRoomName","open","setOpen","handleNewChatClose","color","Dialog","onClose","aria-labelledby","DialogTitle","id","DialogContent","TextField","autoFocus","margin","label","fullWidth","onChange","e","target","DialogActions","Button","preventDefault","collection","add","roomOwner","uid","createdBy","displayName","timestamp","FieldValue","serverTimestamp","then","docRef","doc","set","merge","console","disabled","Status","DropdownMenu","menuLists","menu","handleMenuClose","Menu","anchorEl","keepMounted","Boolean","anchorOrigin","vertical","horizontal","transformOrigin","getContentAnchorEl","map","menuList","MenuItem","key","DialogCustom","close","photo","fullScreen","aria-describedby","edge","aria-label","Zoom","in","transitionDelay","useStyles","makeStyles","theme","root","display","drawerPaper","DrawerLeft","drawerLeft","setDrawerLeft","classes","setName","about","setAbout","showEditName","setShowEditName","showEditAbout","setShowEditAbout","showProfilePhoto","setShowProfilePhoto","uploadPhotoLink","setUploadPhotoLink","showDialogUpload","setShowDialogUpload","menuProfile","setMenuProfile","setPhoto","useEffect","onSnapshot","data","onFileChangeImage","a","file","files","size","storageRef","ref","isAnonymous","imagesRef","child","fileRef","put","getDownloadURL","log","handleUploadPhoto","currentUser","updateProfile","Math","random","htmlFor","accept","Drawer","anchor","variant","paper","event","currentTarget","styles","borderBottom","update","SearchBar","placeholder","setSearch","search","showArrowIcon","setShowArrowIcon","required","onFocus","onBlur","CryptoJS","require","SidebarChat","messages","setMessages","orderBy","snapshot","docs","to","video","message","decryptedData","AES","decrypt","toString","enc","Utf8","url","Sidebar","rooms","setIsRoomExist","isRoomExist","history","useHistory","roomId","useParams","loading","setLoading","noRooms","setNoRooms","menuSidebar","setMenuSidebar","isSearchFound","setIsSetSearchFound","findRoom","myRooms","x","toLowerCase","includes","filter","room","props","length","index","findIndex","push","handleDrawerLeftOpen","handleMenuOpen","delete","signOut","CircularProgress","breakpoints","only","width","up","DrawerRight","content","drawerRight","DrawerRightSearch","drawerRightSearch","setDrawerRightSearch","isFoundMessage","setIsFoundMessage","findMessage","myMessages","caption","Date","toDate","toLocaleTimeString","hour","hour12","minute","Divider","DrawerRightInfo","drawerRightInfo","setDrawerRightInfo","messageResult","ChatHeader","roomCreatedBy","_roomId","menuChat","setMenuChat","role","setRole","showDate","setShowDate","isLastMessage","setIsLastMessage","get","exists","menuChatLists","roomDeleted","deleteRoom","Hidden","smUp","weekday","year","month","day","getDateFromMessage","ChatBody","messagesEndRef","useRef","playing","setPlaying","handlePlay","handlePause","current","scrollIntoView","behavior","height","controls","onPlay","onPause","onEnded","href","paperAnchorBottom","left","right","bottom","maxHeight","top","DrawerBottom","drawerBottom","setDrawerBottom","fileImageUrl","fileVideoUrl","setFileVideoUrl","setFileImageUrl","setCaption","Fab","chatfooter_height","styled","div","attachFileLists","ChatFooter","input","setInput","emoji","setEmoji","showAttachFile","setShowAttachFile","attachFile","addEmoji","native","handleEmoticonsClose","onFileChange","match","getTime","videosRef","onEnterPress","keyCode","test","encrypt","onSelect","ClickAwayListener","onClickAway","attachFileList","Slide","direction","mountOnEnter","unmountOnExit","rows","onKeyDown","ChatLandingScreen","showLandingScreenPhoto","Chat","set_RoomId","setRoomCreatedBy","setRoomOwner","setShowLandingScreenPhoto","App","dispatch","setRooms","unsubscribe","onAuthStateChanged","anonymousName","floor","dateJoined","newestOnTop","rtl","pauseOnFocusLoss","exact","path","LinearProgress","isLocalhost","window","location","hostname","registerValidSW","swUrl","config","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","state","controller","onUpdate","onSuccess","actionTypes","action","ReactDOM","render","StrictMode","document","getElementById","URL","process","origin","addEventListener","fetch","headers","response","contentType","status","indexOf","ready","unregister","reload","checkValidServiceWorker","serviceWorkerRegistration"],"mappings":"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","file":"static/js/main.cf7bba2c.chunk.js","sourcesContent":["import React, { createContext, useContext, useReducer } from 'react';\r\n\r\nexport const StateContext = createContext();\r\n\r\nexport const StateProvider = ({ reducer, initialState, children }) => (\r\n    <StateContext.Provider value={useReducer(reducer, initialState)}>\r\n        {children}\r\n    </StateContext.Provider>\r\n);\r\n\r\nexport const useStateValue =  () => useContext(StateContext);","import firebase from \"firebase\";\r\n\r\nconst firebaseConfig = {\r\n  apiKey: \"AIzaSyCF7lHw_Z7DmZgpoZuYIGveD0eZ8ha7Qyg\",\r\n  authDomain: \"tattle-9359.firebaseapp.com\",\r\n  databaseURL: \"https://tattle-9359-default-rtdb.firebaseio.com/\",\r\n  projectId: \"tattle-9359\",\r\n  storageBucket: \"tattle-9359.appspot.com\",\r\n  messagingSenderId: \"849640668400\",\r\n  appId: \"1:849640668400:web:91c77b3a931a325ef4d635\",\r\n  measurementId: \"G-17X1MHRTRX\",\r\n};\r\n\r\nconst firebaseApp = firebase.initializeApp(firebaseConfig);\r\n\r\nconst db = firebaseApp.firestore();\r\nconst auth = firebase.auth();\r\nconst provider = new firebase.auth.GoogleAuthProvider();\r\nconst storage = firebase.storage();\r\n\r\nexport { auth, provider, storage, firebase };\r\nexport default db;\r\n","export function setUser(authUser){\r\n    return {\r\n        type: 'SET_USER',\r\n        user: authUser,\r\n    }\r\n}","import { toast } from 'react-toastify';\r\n\r\nexport const toastInfo = ( toastTitle, toastId, position ) => {\r\n    toast.info(toastTitle, {\r\n        toastId: toastId,\r\n        position: position,\r\n        autoClose: 5000,\r\n        hideProgressBar: true,\r\n        closeOnClick: true,\r\n        pauseOnHover: true,\r\n        draggable: true,\r\n        progress: undefined,\r\n        }\r\n    );\r\n}","export default __webpack_public_path__ + \"static/media/logo.179025b4.webp\";","import React from \"react\";\r\nimport { auth, provider } from \"./firebase\";\r\nimport { toastInfo } from \"./shared/toastInfo\";\r\nimport PermIdentityIcon from \"@material-ui/icons/PermIdentity\";\r\nimport GoogleLogo from \"./images/Google G Logo.png\";\r\nimport Logo from \"./images/logo.webp\";\r\nimport \"./Login.css\";\r\n\r\nfunction Login() {\r\n  const signInGoogle = () => {\r\n    const google = \"google\";\r\n\r\n    auth\r\n      .signInWithPopup(provider)\r\n      .catch((error) => toastInfo(`${error}`, google, \"top-center\"));\r\n  };\r\n\r\n  const loginAnonymously = () => {\r\n    const anonymous = \"anonymous\";\r\n\r\n    auth\r\n      .signInAnonymously()\r\n      .catch((error) => toastInfo(`${error}`, anonymous, \"top-center\"));\r\n  };\r\n\r\n  return (\r\n    <div className=\"login\">\r\n      <div className=\"login__container\">\r\n        <img rel=\"preload\" src={Logo} alt=\"Tattle Logo\" />\r\n        <div className=\"login__text\">\r\n          <h2>Keeps you Connected</h2>\r\n          <br></br>\r\n          <p>Tattle is driven by a fascination for communication </p>\r\n          <p>technology that was once viewed as a passing trend.</p>\r\n        </div>\r\n        <div className=\"login__withGoogle\" onClick={signInGoogle}>\r\n          <img src={GoogleLogo} alt=\"Google Logo\" />\r\n          <span>Sign in with Google</span>\r\n        </div>\r\n\r\n        <div\r\n          className=\"login__withGoogle login__Anonymously\"\r\n          onClick={loginAnonymously}\r\n        >\r\n          <PermIdentityIcon />\r\n          <span>Login Anonymously</span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Login;\r\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAD8klEQVRogc2aW6iUVRTHf845apiXY4lgFlYoSealSMuQiiwjQkEsIqjH6CUIeu/NehAEC8Oi7EoUeSLJk90IAi8pFlREF1SiOtWb1vFW56j/WLUmpmkG197f983MHzYzD/vy/3/7svZaa4+TRAmYAlwOLASWAvOAS4DpwGTgLHAcOAoMA4eAfcDX/v9EUQpFhVwP3AGs8v852AN8AOwEPs1mYkIyymJJr0o6ofIwIulNSStzOKU2mC1pq6SjJQpoxilJL0m6qCohd0n6vkIBzfhR0v1lCpkg6ckOCmjGYxEh/efYQnbivAyszd6ExXAQ2Ft0s0+WNNTFmdgpaU7RpTVe0ntdFLFZUl8Zm31DlwSMSXok5/htZRDvAV7PXNmjwLfALrfcPwNH3LIPAHOAZcCNwHxgYkNbq/sA8G7WyE3KZkgazvyS29yYjQt8Qatzi6Ttkv6Q9KWkq3Jmot3SejpDxO5ca+zlJkkzi4hoFrJc0miiiGckTSpKooxSa1hlDwPjE1bleuBB4GTWmi4b/jUWSvo9cSa6PguNpT4jZrmnBr/RF8BDPTELDaj5EXh7sP6YixjrCLsEmJC5wHXBJub87O4J5k0wIUuAvkDdY8CmjrJLgN1+FwWrfwd8nDnOav6x2lVhyIQsCHZ+oACJJS6mKky1pTU72PknBUiMVCjCMFBLOHaHKyZTBNNNyLRg5SNVsymA801INLA12pMSHCbkt2DdgcrZ5GOk5vYhgst6XcgvwcrXFBgo5Vadgx9MyFfBhisLDFS/mylYzDU+5b8RHOr322wEi1zMRxlC3gIOA38G659xv/7RYP3P7S6/QNKZoB+yo4M+xvNBTsb9SmswUdKuYCNzhVd0QMQKD2hEsN/c7ZpP9/vBKbRN+1TFm/c8YLNfaCPYYe523UN8O+E+ZHtlSzUa/oa5CouDdY859/9EUV4LTmUdj1ewpDYmcthWb9vYyfLETgzPlhQOmiJpS8b4N7QSYuW5jM4sQHdbARG3StqXMe6Ljf00d3qhZ4pScVrSoKRViSHTQW+bil89Dfhvn62C2HcDb2RuVLPg33iAYj/wU0MQ21LVl3r62ozdFU1B7BTc+79Ae5sv1q20QgSbWnFul2e3M3w7cGfmF6sKlo9f0+qqU2sz4GnPkwz1mIh17e5r7YTgzypsLQ5Wxy2Md5zL8bYNAidMn6/LbuEJSf3n4ply3q+TdLiDYswM3Bfll2q8Zvn1uuonHC/4WGFuudbYHtW8UrIgy88M5qbxij5zutq9Rjumb87sw4znh76hP8slUtbDM/MhzFLbw7Nr/eHZxcAF/gzEBrETx6y8RSztaYZZ/vrDs2LpO+AvpvyKMZBkRBsAAAAASUVORK5CYII=\"","import React from 'react';\r\nimport Avatar from '@material-ui/core/Avatar';\r\n\r\nfunction UserAvatar( { photoURL, onClick }) {\r\n    return (\r\n        <div style={{cursor: 'pointer'}}>\r\n            <Avatar \r\n                src={photoURL} \r\n                onClick={onClick}\r\n            />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default UserAvatar","import React from 'react';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\nimport IconButton from '@material-ui/core/IconButton';\r\n\r\nfunction TooltipCustom( { name, icon, onClick }) {\r\n    return (\r\n        <div>\r\n            <Tooltip title={<span style={{fontSize: '14px', \r\n                padding: '8px 5px 8px 5px'}}>{name}</span>} \r\n                placement=\"bottom-end\">\r\n                <IconButton onClick={onClick}>\r\n                    {icon}\r\n                </IconButton>\r\n            </Tooltip>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default TooltipCustom\r\n","import React, { useState } from \"react\";\r\nimport TooltipCustom from \"../shared/TooltipCustom\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport ChatIcon from \"@material-ui/icons/Chat\";\r\n\r\nfunction NewChat({ user, db, firebase }) {\r\n  const [roomName, setRoomName] = useState(\"\");\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const handleNewChatOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleNewChatClose = () => {\r\n    setOpen(false);\r\n    setRoomName(\"\");\r\n  };\r\n\r\n  const createChat = (e) => {\r\n    e.preventDefault();\r\n\r\n    if (roomName) {\r\n      db.collection(\"rooms\")\r\n        .add({\r\n          roomOwner: user.uid,\r\n          createdBy: user.displayName,\r\n          name: roomName,\r\n          timestamp: firebase.firestore.FieldValue.serverTimestamp(),\r\n        })\r\n        .then(function (docRef) {\r\n          db.collection(\"rooms\").doc(docRef.id).set(\r\n            {\r\n              id: docRef.id,\r\n            },\r\n            { merge: true }\r\n          );\r\n        })\r\n        .catch(function (error) {\r\n          console.error(\"Error adding document: \", error);\r\n        });\r\n    }\r\n    setOpen(false);\r\n    setRoomName(\"\");\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <TooltipCustom\r\n        name=\"New Chat\"\r\n        onClick={() => handleNewChatOpen()}\r\n        icon={<ChatIcon style={{ color: \"#de5751\" }} />}\r\n      />\r\n\r\n      <Dialog\r\n        open={open}\r\n        onClose={handleNewChatClose}\r\n        aria-labelledby=\"form-dialog-title\"\r\n      >\r\n        <DialogTitle id=\"form-dialog-title\">Create Chat Room</DialogTitle>\r\n        <DialogContent>\r\n          <TextField\r\n            autoFocus\r\n            margin=\"dense\"\r\n            id=\"name\"\r\n            label=\"Room Name\"\r\n            type=\"text\"\r\n            fullWidth\r\n            value={roomName}\r\n            onChange={(e) => setRoomName(e.target.value)}\r\n          />\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={handleNewChatClose} color=\"primary\">\r\n            Cancel\r\n          </Button>\r\n          <Button onClick={createChat} color=\"primary\" disabled={!roomName}>\r\n            Create\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default NewChat;\r\n","import React from \"react\";\r\nimport TooltipCustom from \"../shared/TooltipCustom\";\r\nimport DonutLargeIcon from \"@material-ui/icons/DonutLarge\";\r\n\r\nfunction Status() {\r\n  return (\r\n    <div>\r\n      <TooltipCustom\r\n        name=\"Status\"\r\n        icon={<DonutLargeIcon style={{ color: \"#de5751\" }} />}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Status;\r\n","import React from 'react';\r\nimport Menu from '@material-ui/core/Menu';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\n\r\nfunction DropdownMenu ( { menuLists, menu, handleMenuClose }) {\r\n    return (\r\n        <div>\r\n            <Menu id=\"simple-menu\"\r\n                anchorEl={menu}\r\n                keepMounted\r\n                open={Boolean(menu)}\r\n                onClose={handleMenuClose}\r\n                anchorOrigin={{\r\n                    vertical: \"bottom\",\r\n                    horizontal: \"right\"\r\n                }}\r\n                transformOrigin={{\r\n                    vertical: \"top\",\r\n                    horizontal: \"right\"\r\n                }}\r\n                getContentAnchorEl={null}\r\n                >\r\n                \r\n                {menuLists.map((menuList) =>\r\n                    <MenuItem key={menuList.id} onClick={menuList.onClick}>\r\n                        {menuList.title}\r\n                    </MenuItem>\r\n                )}\r\n            </Menu>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default DropdownMenu","import React from 'react';\r\n// import ReactPlayer from 'react-player';\r\n//importing material-ui\r\nimport Zoom from '@material-ui/core/Zoom';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport IconButton from '@material-ui/core/IconButton';\r\n//importing material-ui-icons\r\nimport CloseIcon from '@material-ui/icons/Close';\r\n//importing styles\r\nimport './DialogCustom.css'\r\n\r\nfunction DialogCustom({ open, close, user, photo }) {\r\n    \r\n    return (\r\n        <Dialog\r\n            open={open}\r\n            fullScreen \r\n            onClose={close}\r\n            aria-labelledby=\"alert-dialog-title\"\r\n            aria-describedby=\"alert-dialog-description\"\r\n            >\r\n            <DialogTitle id=\"alert-dialog-title-dialogCustom\">\r\n                <div>\r\n                    <Avatar src={user.photoURL}/>\r\n                </div>\r\n                <div>\r\n                    <IconButton edge=\"end\" color=\"inherit\" onClick={close} aria-label=\"close\">\r\n                        <CloseIcon />\r\n                    </IconButton>\r\n                </div>\r\n            </DialogTitle>\r\n            <DialogContent>\r\n                <Zoom in={open} style={{ transitionDelay: open ? '300ms' : '0ms' }}>\r\n                    <img src={photo} alt=\"\" className=\"DialogCustom__photo\"/>\r\n                </Zoom>\r\n            </DialogContent>\r\n        </Dialog>\r\n    )\r\n}\r\n\r\nexport default DialogCustom\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useStateValue } from \"../StateProvider\";\r\n//importing components\r\nimport DropdownMenu from \"../shared/DropdownMenu\";\r\nimport { toastInfo } from \"../shared/toastInfo\";\r\nimport DialogCustom from \"../shared/DialogCustom\";\r\n//importing material-ui\r\nimport Zoom from \"@material-ui/core/Zoom\";\r\nimport Drawer from \"@material-ui/core/Drawer\";\r\nimport Avatar from \"@material-ui/core/Avatar\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n//importing material-ui-icons\r\nimport PhotoCameraIcon from \"@material-ui/icons/PhotoCamera\";\r\nimport ArrowBackIcon from \"@material-ui/icons/ArrowBack\";\r\nimport EditIcon from \"@material-ui/icons/Edit\";\r\nimport CheckIcon from \"@material-ui/icons/Check\";\r\n//importing styles\r\nimport \"./DrawerLeft.css\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: \"flex\",\r\n  },\r\n  drawerPaper: {\r\n    position: \"absolute\",\r\n  },\r\n}));\r\n\r\nfunction DrawerLeft({ drawerLeft, setDrawerLeft, db, auth, storage }) {\r\n  const classes = useStyles();\r\n  const [{ user }] = useStateValue();\r\n  const [name, setName] = useState(\"\");\r\n  const [about, setAbout] = useState(\"\");\r\n  const [showEditName, setShowEditName] = useState(false);\r\n  const [showEditAbout, setShowEditAbout] = useState(false);\r\n  const [showProfilePhoto, setShowProfilePhoto] = useState(false);\r\n  const [uploadPhotoLink, setUploadPhotoLink] = useState(null);\r\n  const [showDialogUpload, setShowDialogUpload] = useState(false);\r\n  const [menuProfile, setMenuProfile] = useState(null);\r\n  const [photo, setPhoto] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    setName(user.displayName);\r\n\r\n    db.collection(\"users\")\r\n      .doc(user.uid)\r\n      .onSnapshot(function (doc) {\r\n        setPhoto(doc.data()?.photoURL);\r\n        setAbout(doc.data()?.about);\r\n      });\r\n  }, [user.uid, user.displayName, db]);\r\n\r\n  const updateName = (e) => {\r\n    e.preventDefault();\r\n\r\n    if (user.uid) {\r\n      db.collection(\"users\")\r\n        .doc(user.uid)\r\n        .update({\r\n          name: name,\r\n        })\r\n        .then(function () {\r\n          console.log(\"Document successfully updated!\");\r\n        })\r\n        .catch(function (error) {\r\n          // The document probably doesn't exist.\r\n          console.error(\"Error updating document: \", error);\r\n        });\r\n\r\n      auth.currentUser.updateProfile({\r\n        displayName: name,\r\n      });\r\n    }\r\n    setShowEditName(false);\r\n  };\r\n\r\n  const updateAbout = (e) => {\r\n    e.preventDefault();\r\n\r\n    if (user.uid) {\r\n      db.collection(\"users\")\r\n        .doc(user.uid)\r\n        .update({\r\n          about: about,\r\n        })\r\n        .then(function () {\r\n          console.log(\"Document successfully updated!\");\r\n        })\r\n        .catch(function (error) {\r\n          // The document probably doesn't exist.\r\n          console.error(\"Error updating document: \", error);\r\n        });\r\n    }\r\n    setShowEditAbout(false);\r\n  };\r\n\r\n  const editName = () => {\r\n    setShowEditName(true);\r\n  };\r\n\r\n  const editAbout = () => {\r\n    setShowEditAbout(true);\r\n  };\r\n\r\n  const handleDrawerClose = () => {\r\n    setDrawerLeft(false);\r\n    setShowEditName(false);\r\n    setShowEditAbout(false);\r\n  };\r\n\r\n  const viewPhoto = () => {\r\n    const viewPhoto = \"viewPhoto\";\r\n\r\n    if (user) {\r\n      setShowProfilePhoto(true);\r\n    } else {\r\n      toastInfo(\"You have no photo!\", viewPhoto, \"top-center\");\r\n    }\r\n    setMenuProfile(null);\r\n  };\r\n\r\n  const viewPhotoClose = () => {\r\n    setShowProfilePhoto(false);\r\n  };\r\n\r\n  const takePhoto = () => {\r\n    const takePhoto = \"takePhoto\";\r\n    toastInfo(\"Take photo is not yet available!\", takePhoto, \"top-center\");\r\n  };\r\n\r\n  const removedPhoto = () => {\r\n    const removedPhoto = \"removedPhoto\";\r\n    toastInfo(\r\n      \"Removed photo is not yet available!\",\r\n      removedPhoto,\r\n      \"top-center\"\r\n    );\r\n  };\r\n\r\n  const onFileChangeImage = async (e) => {\r\n    const imageFileSizeToastId = \"imageFileSizeToastId\";\r\n    const file = e.target.files[0];\r\n\r\n    if (file.size > 3 * 1024 * 1024) {\r\n      toastInfo(\r\n        \"Image should not exceed more than 3Mb\",\r\n        imageFileSizeToastId,\r\n        \"top-center\"\r\n      );\r\n    } else {\r\n      const storageRef = storage.ref();\r\n      if (user.isAnonymous === true) {\r\n        const imagesRef = storageRef.child(`user/anonymous/${user.uid}`);\r\n        const fileRef = imagesRef.child(file.name);\r\n        await fileRef.put(file);\r\n        setUploadPhotoLink(await fileRef.getDownloadURL());\r\n        console.log(\"uploading image\", uploadPhotoLink);\r\n      } else {\r\n        const imagesRef = storageRef.child(`user/regular/${user.uid}`);\r\n        const fileRef = imagesRef.child(file.name);\r\n        await fileRef.put(file);\r\n        setUploadPhotoLink(await fileRef.getDownloadURL());\r\n        console.log(\"uploading image\", uploadPhotoLink);\r\n      }\r\n    }\r\n    setMenuProfile(null);\r\n    setShowDialogUpload(true);\r\n  };\r\n\r\n  const uploadPhoto = () => {\r\n    return (\r\n      <div className=\"profileMenu_uploadPhoto\">\r\n        <label htmlFor=\"file-input\">Upload photo</label>\r\n        <input\r\n          id=\"file-input\"\r\n          type=\"file\"\r\n          onChange={onFileChangeImage}\r\n          accept=\"image/*\"\r\n        />\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const handleUploadPhoto = () => {\r\n    const uploadPhotoError = \"uploadPhotoError\";\r\n\r\n    if (uploadPhotoLink) {\r\n      auth.currentUser.updateProfile({\r\n        photoURL: uploadPhotoLink,\r\n      });\r\n      db.collection(\"users\").doc(user.uid).set(\r\n        {\r\n          photoURL: uploadPhotoLink,\r\n        },\r\n        { merge: true }\r\n      );\r\n      setShowDialogUpload(false);\r\n    } else {\r\n      toastInfo(\"Select photo to upload!\", uploadPhotoError, \"top-center\");\r\n    }\r\n  };\r\n\r\n  const handleDialogUploadClose = () => {\r\n    setShowDialogUpload(false);\r\n  };\r\n\r\n  const handleProfileMenu = (event) => {\r\n    setMenuProfile(event.currentTarget);\r\n  };\r\n\r\n  const handleProfileMenuClose = () => {\r\n    setMenuProfile(null);\r\n  };\r\n\r\n  const menuLists = [\r\n    {\r\n      title: \"View Photo\",\r\n      onClick: () => viewPhoto(),\r\n      id: Math.random() * 100000,\r\n    },\r\n    {\r\n      title: \"Take photo\",\r\n      onClick: () => takePhoto(),\r\n      id: Math.random() * 100000,\r\n    },\r\n    {\r\n      title: uploadPhoto(),\r\n      onClick: () => handleUploadPhoto(),\r\n      id: Math.random() * 100000,\r\n    },\r\n    {\r\n      title: \"Removed photo\",\r\n      onClick: () => removedPhoto(),\r\n      id: Math.random() * 100000,\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <div>\r\n      <Drawer\r\n        anchor=\"left\"\r\n        variant=\"persistent\"\r\n        open={drawerLeft}\r\n        classes={{ paper: classes.drawerPaper }}\r\n      >\r\n        <div className=\"drawerLeft__header\">\r\n          <div className=\"drawerLeft__header_container\">\r\n            <IconButton onClick={handleDrawerClose}>\r\n              <ArrowBackIcon />\r\n            </IconButton>\r\n            <p>Profile</p>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"drawerLeft__content\">\r\n          <div className=\"drawerLeft__content_photo\">\r\n            <div className=\"profilePhoto\">\r\n              <Zoom\r\n                in={drawerLeft}\r\n                style={{ transitionDelay: drawerLeft ? \"300ms\" : \"0ms\" }}\r\n              >\r\n                {photo ? (\r\n                  <Avatar src={photo} className=\"profilePhoto__layer_bottom\" />\r\n                ) : (\r\n                  <Avatar />\r\n                )}\r\n              </Zoom>\r\n              <div\r\n                className=\"profilePhoto__layer_top\"\r\n                onClick={handleProfileMenu}\r\n              >\r\n                <div className=\"profilePhoto__text\">\r\n                  <PhotoCameraIcon />\r\n                  <p>CHANGE</p>\r\n                  <p>PROFILE PHOTO</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <DropdownMenu\r\n              menuLists={menuLists}\r\n              menu={menuProfile}\r\n              handleMenuClose={handleProfileMenuClose}\r\n            />\r\n\r\n            <DialogCustom\r\n              open={showProfilePhoto}\r\n              close={viewPhotoClose}\r\n              photo={photo}\r\n              user={user}\r\n            />\r\n          </div>\r\n\r\n          <div className=\"profileMenu__diaglog\">\r\n            <Dialog\r\n              open={showDialogUpload}\r\n              onClose={handleDialogUploadClose}\r\n              aria-labelledby=\"form-dialog-title\"\r\n            >\r\n              <DialogTitle id=\"form-dialog-title-drawerLeft\">\r\n                Upload Photo\r\n              </DialogTitle>\r\n              <DialogContent id=\"form-dialog-content\">\r\n                <div className=\"profileMenu__uploadPhoto_dialog\">\r\n                  <img src={uploadPhotoLink} alt=\"\" />\r\n                </div>\r\n              </DialogContent>\r\n              <DialogActions>\r\n                <div className=\"profileMenu_uploadPhoto_iconButton\">\r\n                  <IconButton onClick={handleUploadPhoto}>\r\n                    <CheckIcon />\r\n                  </IconButton>\r\n                </div>\r\n              </DialogActions>\r\n            </Dialog>\r\n          </div>\r\n\r\n          <div className=\"drawerLeft__content_name\">\r\n            <p>Your Name</p>\r\n            <form>\r\n              {showEditName ? (\r\n                <>\r\n                  <input\r\n                    value={name}\r\n                    onChange={(e) => setName(e.target.value)}\r\n                    type=\"text\"\r\n                    styles={{ borderBottom: \"1px solid green !important\" }}\r\n                  />\r\n                  <CheckIcon onClick={updateName} />\r\n                </>\r\n              ) : (\r\n                <>\r\n                  <span>{name}</span>\r\n                  <EditIcon onClick={editName} />\r\n                </>\r\n              )}\r\n            </form>\r\n          </div>\r\n\r\n          <div className=\"drawerLeft__note\">\r\n            <span>\r\n              This is not your username or pin. This name will be visible to\r\n              your Tattle contacts.\r\n            </span>\r\n          </div>\r\n\r\n          <div className=\"drawerLeft__content_name\">\r\n            <p>About</p>\r\n            <form>\r\n              {showEditAbout ? (\r\n                <>\r\n                  <input\r\n                    value={about}\r\n                    onChange={(e) => setAbout(e.target.value)}\r\n                    type=\"text\"\r\n                  />\r\n                  <CheckIcon onClick={updateAbout} />\r\n                </>\r\n              ) : (\r\n                <>\r\n                  <span>{about}</span>\r\n                  <EditIcon onClick={editAbout} />\r\n                </>\r\n              )}\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </Drawer>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default DrawerLeft;\r\n","import React, { useState } from 'react';\r\nimport SearchOutlinedIcon from '@material-ui/icons/SearchOutlined';\r\nimport ArrowForwardIcon from '@material-ui/icons/ArrowForward';\r\nimport './SearchBar.css';\r\n\r\nfunction SearchBar( { placeholder, setSearch, search } ) {\r\n    const [showArrowIcon, setShowArrowIcon] = useState(false);\r\n\r\n    const displaySearchIcon = () => {\r\n        setShowArrowIcon(false);\r\n    }\r\n    \r\n    const displayArrowIcon = () => {\r\n        setShowArrowIcon(true);\r\n    }\r\n\r\n    return (\r\n        <div className={`search ${showArrowIcon===true && \"search__bgColorChange\"}`}>\r\n            <div className=\"search__container\">\r\n                <span className={`${showArrowIcon===true?\"arroww\":''}`}>{showArrowIcon? <ArrowForwardIcon />:<SearchOutlinedIcon/>}</span>\r\n                <input \r\n                    value={search} \r\n                    onChange={e => setSearch(e.target.value)} \r\n                    type=\"text\" \r\n                    placeholder={placeholder} \r\n                    required\r\n                    onFocus={displayArrowIcon}\r\n                    onBlur={displaySearchIcon}\r\n                />\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default SearchBar","import React, { useEffect, useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport Avatar from \"@material-ui/core/Avatar\";\r\nimport PhotoCameraIcon from \"@material-ui/icons/PhotoCamera\";\r\nimport VideocamIcon from \"@material-ui/icons/Videocam\";\r\nimport db from \"../firebase\";\r\nimport \"./SidebarChat.css\";\r\nconst CryptoJS = require(\"crypto-js\");\r\n\r\nfunction SidebarChat({ id, name }) {\r\n  const [messages, setMessages] = useState([]);\r\n\r\n  useEffect(() => {\r\n    if (id) {\r\n      db.collection(\"rooms\")\r\n        .doc(id)\r\n        .collection(\"messages\")\r\n        .orderBy(\"timestamp\", \"desc\")\r\n        .onSnapshot((snapshot) =>\r\n          setMessages(snapshot.docs.map((doc) => doc.data()))\r\n        );\r\n    }\r\n  }, [id]);\r\n  const decrypt = (data) => {\r\n    const bytes = CryptoJS.AES.decrypt(data, \"my-secret-key@123\");\r\n    const decryptedData = bytes.toString(CryptoJS.enc.Utf8);\r\n    // return decryptedData\r\n    return data ? decryptedData : data;\r\n  };\r\n  return (\r\n    <Link to={`/rooms/${id}`} className=\"sidebarChat__link\">\r\n      <div className=\"sidebarChat\">\r\n        <Avatar>{name[0]}</Avatar>\r\n        <div className=\"sidebarChat__info\">\r\n          <h2>{name}</h2>\r\n          {messages[0]?.photo ? (\r\n            <div className=\"sideChat__photo\">\r\n              <PhotoCameraIcon /> <span>Photo</span>\r\n            </div>\r\n          ) : null}\r\n          {messages[0]?.video ? (\r\n            <div className=\"sideChat__photo\">\r\n              <VideocamIcon /> <span>Video</span>\r\n            </div>\r\n          ) : null}\r\n          <p>{messages[0]?.message ? decrypt(messages[0]?.message) : \"\"}</p>\r\n          <p>{messages[0]?.url}</p>\r\n        </div>\r\n      </div>\r\n    </Link>\r\n  );\r\n}\r\n\r\nexport default SidebarChat;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { useHistory, useParams } from \"react-router-dom\";\r\nimport { useStateValue } from \"../StateProvider\";\r\n//importing firebase\r\nimport db from \"../firebase\";\r\nimport { auth, storage, firebase } from \"../firebase\";\r\n//importing components\r\nimport UserAvatar from \"./UserAvatar\";\r\nimport NewChat from \"./NewChat\";\r\nimport Status from \"./Status\";\r\nimport DropdownMenu from \"../shared/DropdownMenu\";\r\nimport DrawerLeft from \"./DrawerLeft\";\r\nimport SearchBar from \"../shared/SearchBar\";\r\nimport SidebarChat from \"./SidebarChat\";\r\nimport { toastInfo } from \"../shared/toastInfo\";\r\nimport TooltipCustom from \"../shared/TooltipCustom\";\r\n//importing material-ui\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport MoreVertIcon from \"@material-ui/icons/MoreVert\";\r\n//importing styles\r\nimport \"./Sidebar.css\";\r\n\r\nfunction Sidebar({ rooms, setIsRoomExist, isRoomExist }) {\r\n  const history = useHistory();\r\n  const { roomId } = useParams();\r\n  const [{ user }] = useStateValue();\r\n  const [search, setSearch] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n  const [noRooms, setNoRooms] = useState(false);\r\n  const [drawerLeft, setDrawerLeft] = useState(false);\r\n  const [menuSidebar, setMenuSidebar] = useState(null);\r\n  const [isSearchFound, setIsSetSearchFound] = useState(false);\r\n\r\n  const findRoom = function (myRooms) {\r\n    return function (x) {\r\n      var searchRoom = x.data.name + \"\";\r\n      return (\r\n        searchRoom.toLowerCase().includes(myRooms.toLowerCase()) || !myRooms\r\n      );\r\n    };\r\n  };\r\n\r\n  useEffect(() => {\r\n    const roomResult = () => {\r\n      return (\r\n        <>\r\n          {rooms.filter(findRoom(search)).map((room) => (\r\n            <p key={room.id}>{room.name}</p>\r\n          ))}\r\n        </>\r\n      );\r\n    };\r\n\r\n    if (search) {\r\n      var result = roomResult();\r\n      if (result.props.children.length > 0) {\r\n        setIsSetSearchFound(true);\r\n      } else {\r\n        setIsSetSearchFound(false);\r\n      }\r\n    }\r\n\r\n    //checks if room exists, else will be redirect to landing screen\r\n    var roomList = rooms;\r\n    if (roomList) {\r\n      //checks if the current route(roomId) exists in roomList(array)\r\n      const index = roomList.findIndex(function (id, index) {\r\n        return id.id === roomId;\r\n      });\r\n\r\n      if (index >= 0) {\r\n        setIsRoomExist(index);\r\n        // console.log(\"ROOM EXISTS\");\r\n      } else if (index === -1) {\r\n        setIsRoomExist(index);\r\n        history.push(\"/\");\r\n        // console.log(\"ROOM DOES NOT EXIST\");\r\n      }\r\n    }\r\n  }, [search, rooms, roomId, history, setIsRoomExist]);\r\n\r\n  useEffect(() => {\r\n    if (rooms) {\r\n      if (rooms.length > 0) {\r\n        setNoRooms(false);\r\n        setLoading(true);\r\n      } else if (rooms.length === 0 && isRoomExist === -1) {\r\n        setNoRooms(true);\r\n        setLoading(true);\r\n      }\r\n    }\r\n  }, [isRoomExist, rooms]);\r\n\r\n  // console.log(\"ROOMS> >\", noRooms);\r\n  // console.log(\"ROOMS EXIST> >\", isRoomExist);\r\n\r\n  const handleDrawerLeftOpen = () => {\r\n    setMenuSidebar(null);\r\n    setDrawerLeft(true);\r\n  };\r\n\r\n  const handleMenuOpen = (event) => {\r\n    setMenuSidebar(event.currentTarget);\r\n  };\r\n\r\n  const handleMenuClose = () => {\r\n    setMenuSidebar(null);\r\n  };\r\n\r\n  const archive = () => {\r\n    const archive = \"archive\";\r\n    toastInfo(\"Archive is not yet available!\", archive, \"top-center\");\r\n  };\r\n\r\n  const starred = () => {\r\n    const starred = \"starred\";\r\n    toastInfo(\"Starred is not yet available!\", starred, \"top-center\");\r\n  };\r\n\r\n  const settings = () => {\r\n    const settings = \"settings\";\r\n    toastInfo(\"Settings is not yet available!\", settings, \"top-center\");\r\n  };\r\n\r\n  const logout = () => {\r\n    if (user.isAnonymous === true) {\r\n      auth.currentUser\r\n        .delete()\r\n        .then(function () {\r\n          history.push(\"/\");\r\n        })\r\n        .catch(function (error) {\r\n          // An error happened.\r\n          console.log(\"error deleting anonymous user\", error);\r\n        });\r\n    } else {\r\n      auth.signOut();\r\n    }\r\n  };\r\n\r\n  const menuLists = [\r\n    {\r\n      title: \"Profile\",\r\n      onClick: () => handleDrawerLeftOpen(),\r\n      id: Math.random() * 100000,\r\n    },\r\n    {\r\n      title: \"Archived\",\r\n      onClick: () => archive(),\r\n      id: Math.random() * 100000,\r\n    },\r\n    {\r\n      title: \"Starred\",\r\n      onClick: () => starred(),\r\n      id: Math.random() * 100000,\r\n    },\r\n    {\r\n      title: \"Settings\",\r\n      onClick: () => settings(),\r\n      id: Math.random() * 100000,\r\n    },\r\n    {\r\n      title: \"Logout\",\r\n      onClick: () => logout(),\r\n      id: Math.random() * 100000,\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <div className=\"sidebar\">\r\n      <div className=\"sidebar__header\">\r\n        <UserAvatar\r\n          id=\"UserProfile\"\r\n          photoURL={user.photoURL}\r\n          onClick={() => handleDrawerLeftOpen()}\r\n        />\r\n        <DrawerLeft\r\n          drawerLeft={drawerLeft}\r\n          setDrawerLeft={setDrawerLeft}\r\n          db={db}\r\n          auth={auth}\r\n          storage={storage}\r\n        />\r\n\r\n        <div className=\"sidebar__headerRight\">\r\n          <Status />\r\n          <NewChat db={db} user={user} firebase={firebase} />\r\n          <TooltipCustom\r\n            name=\"Menu\"\r\n            icon={<MoreVertIcon style={{ color: \"#de5751\" }} />}\r\n            onClick={handleMenuOpen}\r\n          />\r\n          <DropdownMenu\r\n            menuLists={menuLists}\r\n            menu={menuSidebar}\r\n            handleMenuOpen={handleMenuOpen}\r\n            handleMenuClose={handleMenuClose}\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      <SearchBar\r\n        search={search}\r\n        setSearch={setSearch}\r\n        placeholder=\"Search or start new chat\"\r\n      />\r\n\r\n      <div className=\"sidebar__chats\">\r\n        {loading ? (\r\n          <>\r\n            {search ? (\r\n              <>\r\n                {isSearchFound ? (\r\n                  <div>\r\n                    {rooms.filter(findRoom(search)).map((room) => (\r\n                      <SidebarChat\r\n                        key={room.id}\r\n                        id={room.id}\r\n                        name={room.data.name}\r\n                      />\r\n                    ))}\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"sidebar__chatsContainer_empty\">\r\n                    <span>No chat room found</span>\r\n                  </div>\r\n                )}\r\n              </>\r\n            ) : (\r\n              <>\r\n                {rooms.map((room) => (\r\n                  <SidebarChat\r\n                    key={room.id}\r\n                    id={room.id}\r\n                    name={room.data.name}\r\n                  />\r\n                ))}\r\n              </>\r\n            )}\r\n          </>\r\n        ) : (\r\n          <div className=\"sidebar__chatsContainer_loading\">\r\n            <div>\r\n              <CircularProgress />\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {noRooms && loading ? (\r\n          <div className=\"sidebar__chatsContainer_empty\">\r\n            <span>No chats</span>\r\n          </div>\r\n        ) : null}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Sidebar;\r\n","import React from \"react\";\r\n//importing material-ui\r\nimport Drawer from \"@material-ui/core/Drawer\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n//importing styles\r\nimport \"./DrawerRight.css\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: \"flex\",\r\n  },\r\n  drawerPaper: {\r\n    [theme.breakpoints.only(\"xs\")]: {\r\n      width: \"100vw\",\r\n    },\r\n    [theme.breakpoints.up(\"sm\")]: {\r\n      position: \"absolute\",\r\n    },\r\n  },\r\n}));\r\n\r\nfunction DrawerRight({ content, drawerRight }) {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <div>\r\n      <Drawer\r\n        anchor=\"right\"\r\n        variant=\"persistent\"\r\n        open={drawerRight}\r\n        classes={{ paper: classes.drawerPaper }}\r\n      >\r\n        {content}\r\n      </Drawer>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default DrawerRight;\r\n","import React, { useState, useEffect } from \"react\";\r\n//importing components\r\nimport SearchBar from \"../shared/SearchBar\";\r\n//importing material-ui\r\nimport DrawerRight from \"./DrawerRight\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\n//importing material-ui-icons\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport DoneIcon from \"@material-ui/icons/Done\";\r\n//importing styles\r\nimport \"./DrawerRightSearch.css\";\r\nconst CryptoJS = require(\"crypto-js\");\r\n\r\nfunction DrawerRightSearch({\r\n  drawerRightSearch,\r\n  setDrawerRightSearch,\r\n  messages,\r\n  user,\r\n}) {\r\n  const [search, setSearch] = useState(\"\");\r\n  const [isFoundMessage, setIsFoundMessage] = useState(false);\r\n\r\n  const findMessage = function (myMessages) {\r\n    return function (x) {\r\n      var searchMessage = x.message + \"\" + x.caption;\r\n      return (\r\n        searchMessage.toLowerCase().includes(myMessages.toLowerCase()) ||\r\n        !myMessages\r\n      );\r\n    };\r\n  };\r\n  const decrypt = (data) => {\r\n    const bytes = CryptoJS.AES.decrypt(data, \"my-secret-key@123\");\r\n    const decryptedData = bytes.toString(CryptoJS.enc.Utf8);\r\n    // return decryptedData\r\n    return data ? decryptedData : data;\r\n  };\r\n  const encrypt = (data) => {\r\n    const text = CryptoJS.AES.encrypt(data, \"my-secret-key@123\").toString();\r\n  };\r\n  useEffect(() => {\r\n    const messageResult = () => {\r\n      return (\r\n        <>\r\n          {messages.filter(findMessage(search)).map((message) => (\r\n            <p key={message.id}>\r\n              {message.message ? decrypt(message.message) : \"\"}\r\n              {message.caption}\r\n            </p>\r\n          ))}\r\n        </>\r\n      );\r\n    };\r\n\r\n    if (search) {\r\n      var result = messageResult();\r\n      // console.log(\"result\", result.props.children)\r\n      if (result.props.children.length > 0) {\r\n        setIsFoundMessage(true);\r\n        console.log(\"search message sucess\");\r\n      } else {\r\n        setIsFoundMessage(false);\r\n        console.log(\"search message fail\");\r\n      }\r\n    }\r\n  }, [search, messages]);\r\n\r\n  const handleDrawerClose = () => {\r\n    setDrawerRightSearch(false);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <DrawerRight\r\n        drawerRight={drawerRightSearch}\r\n        content={\r\n          <>\r\n            <div className=\"drawerRight__header\">\r\n              <IconButton onClick={handleDrawerClose}>\r\n                <CloseIcon />\r\n              </IconButton>\r\n              <p>Search Messages</p>\r\n            </div>\r\n\r\n            <SearchBar\r\n              search={search}\r\n              setSearch={setSearch}\r\n              placeholder=\"Search...\"\r\n            />\r\n\r\n            <div\r\n              className={`drawerRight__content ${\r\n                isFoundMessage === true &&\r\n                search.length > 0 &&\r\n                \"drawerRight__content_searched\"\r\n              }`}\r\n            >\r\n              {search.length > 0 ? (\r\n                <>\r\n                  {isFoundMessage ? (\r\n                    <>\r\n                      {messages.filter(findMessage(search)).map((message) => (\r\n                        <div\r\n                          key={message.id}\r\n                          className=\"drawerRight__content_searched_message\"\r\n                        >\r\n                          <p>\r\n                            {new Date(\r\n                              message.timestamp?.toDate()\r\n                            ).toLocaleTimeString(\"en-US\", {\r\n                              hour: \"numeric\",\r\n                              hour12: true,\r\n                              minute: \"numeric\",\r\n                            })}\r\n                            <br />\r\n                          </p>\r\n                          <p id=\"last_p\">\r\n                            {message.uid === user.uid ? <DoneIcon /> : null}\r\n                            {message.message ? decrypt(message.message) : \"\"}\r\n                            {message.caption}\r\n                          </p>\r\n                          <Divider />\r\n                        </div>\r\n                      ))}\r\n                    </>\r\n                  ) : (\r\n                    <p>No message found</p>\r\n                  )}\r\n                </>\r\n              ) : (\r\n                <p>Search for messages in this room.</p>\r\n              )}\r\n            </div>\r\n          </>\r\n        }\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default DrawerRightSearch;\r\n","import React, { useState, useEffect } from \"react\";\r\n//importing components\r\n// import SearchBar from \"../shared/SearchBar\";\r\n//importing material-ui\r\nimport DrawerRight from \"./DrawerRight\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Zoom from \"@material-ui/core/Zoom\";\r\n// import Drawer from \"@material-ui/core/Drawer\";\r\nimport Avatar from \"@material-ui/core/Avatar\";\r\n// import Dialog from \"@material-ui/core/Dialog\";\r\n// import DialogTitle from \"@material-ui/core/DialogTitle\";\r\n// import DialogContent from \"@material-ui/core/DialogContent\";\r\n// import DialogActions from \"@material-ui/core/DialogActions\";\r\n// import { makeStyles } from \"@material-ui/core/styles\";\r\n// import Divider from \"@material-ui/core/Divider\";\r\n//importing material-ui-icons\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\n// import DoneIcon from \"@material-ui/icons/Done\";\r\nimport PhotoCameraIcon from \"@material-ui/icons/PhotoCamera\";\r\nimport GroupIcon from \"@material-ui/icons/Group\";\r\n//importing styles\r\nimport \"./DrawerRightInfo.css\";\r\n\r\nfunction DrawerRightInfo({\r\n  drawerRightInfo,\r\n  setDrawerRightInfo,\r\n  messages,\r\n  user,\r\n}) {\r\n  const [search, setSearch] = useState(\"\");\r\n  const [isFoundMessage, setIsFoundMessage] = useState(false);\r\n\r\n  const findMessage = function (myMessages) {\r\n    return function (x) {\r\n      var searchMessage = x.message + \"\" + x.caption;\r\n      return (\r\n        searchMessage.toLowerCase().includes(myMessages.toLowerCase()) ||\r\n        !myMessages\r\n      );\r\n    };\r\n  };\r\n\r\n  useEffect(() => {\r\n    const messageResult = () => {\r\n      return (\r\n        <>\r\n          {messages.filter(findMessage(search)).map((message) => (\r\n            <p key={message.id}>\r\n              {message.message}\r\n              {message.caption}\r\n            </p>\r\n          ))}\r\n        </>\r\n      );\r\n    };\r\n\r\n    if (search) {\r\n      var result = messageResult();\r\n      // console.log(\"result\", result.props.children)\r\n      if (result.props.children.length > 0) {\r\n        setIsFoundMessage(true);\r\n        console.log(\"search message sucess\");\r\n      } else {\r\n        setIsFoundMessage(false);\r\n        console.log(\"search message fail\");\r\n      }\r\n    }\r\n  }, [search, messages]);\r\n\r\n  const handleDrawerClose = () => {\r\n    setDrawerRightInfo(false);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <DrawerRight\r\n        drawerRight={drawerRightInfo}\r\n        content={\r\n          <>\r\n            <div className=\"drawer-right-info__header\">\r\n              <IconButton onClick={handleDrawerClose}>\r\n                <CloseIcon />\r\n              </IconButton>\r\n              <p>Group Info</p>\r\n            </div>\r\n            <div className=\"drawer-right-info-content\">\r\n              <div className=\"drawer-right-info-content__photo\">\r\n                <div className=\"profilePhoto\">\r\n                  <Zoom\r\n                    in={drawerRightInfo}\r\n                    style={{\r\n                      transitionDelay: drawerRightInfo ? \"300ms\" : \"0ms\",\r\n                    }}\r\n                  >\r\n                    {/* {photo ? (\r\n                      <Avatar\r\n                        src={photo}\r\n                        className=\"profilePhoto__layer_bottom\"\r\n                      />\r\n                    ) : (\r\n                      <Avatar />\r\n                    )} */}\r\n                    {/* <Avatar /> */}\r\n                    <Avatar>\r\n                      <GroupIcon />\r\n                    </Avatar>\r\n                  </Zoom>\r\n                  <div\r\n                    className=\"profilePhoto__layer_top\"\r\n                    // onClick={handleProfileMenu}\r\n                  >\r\n                    <div className=\"profilePhoto__text\">\r\n                      <PhotoCameraIcon />\r\n                      <p>CHANGE</p>\r\n                      <p>PROFILE PHOTO</p>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </>\r\n        }\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default DrawerRightInfo;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { useStateValue } from \"../StateProvider\";\r\n//importing components\r\nimport DropdownMenu from \"../shared/DropdownMenu\";\r\nimport DrawerRightSearch from \"./DrawerRightSearch\";\r\nimport DrawerRightInfo from \"./DrawerRightInfo\";\r\nimport TooltipCustom from \"../shared/TooltipCustom\";\r\nimport { toastInfo } from \"../shared/toastInfo\";\r\n//importing material-ui\r\nimport Hidden from \"@material-ui/core/Hidden\";\r\nimport Avatar from \"@material-ui/core/Avatar\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\n//importing material-ui-icons\r\nimport SearchOutlinedIcon from \"@material-ui/icons/SearchOutlined\";\r\nimport ArrowBackIcon from \"@material-ui/icons/ArrowBack\";\r\nimport MoreVertIcon from \"@material-ui/icons/MoreVert\";\r\n//importing styles\r\nimport \"./ChatHeader.css\";\r\n\r\nfunction ChatHeader({\r\n  roomCreatedBy,\r\n  roomOwner,\r\n  roomName,\r\n  roomId,\r\n  _roomId,\r\n  messages,\r\n  db,\r\n  history,\r\n  isRoomExist,\r\n}) {\r\n  const [{ user }] = useStateValue();\r\n  const [drawerRightSearch, setDrawerRightSearch] = useState(false);\r\n  const [drawerRightInfo, setDrawerRightInfo] = useState(false);\r\n  const [menuChat, setMenuChat] = useState(null);\r\n  const [role, setRole] = useState(\"\");\r\n  const [showDate, setShowDate] = useState(false);\r\n  const [isLastMessage, setIsLastMessage] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const errorAbout = \"errorAbout\";\r\n    if (user.uid) {\r\n      db.collection(\"users\")\r\n        .doc(user.uid)\r\n        .get()\r\n        .then(function (doc) {\r\n          if (doc.exists) {\r\n            setRole(doc.data().role);\r\n          }\r\n        })\r\n        .catch(function (error) {\r\n          toastInfo(`${error}`, errorAbout, \"top-center\");\r\n        });\r\n    }\r\n\r\n    if (messages[messages.length - 1]?.timestamp) {\r\n      setShowDate(true);\r\n    } else {\r\n      setShowDate(false);\r\n    }\r\n\r\n    if (messages[messages.length - 1]) {\r\n      setIsLastMessage(true);\r\n    } else {\r\n      setIsLastMessage(false);\r\n    }\r\n\r\n    //listens when room is changed, then it closes DrawerRight\r\n    if (isRoomExist >= 0) {\r\n      setDrawerRightInfo(false);\r\n      setDrawerRightSearch(false);\r\n    }\r\n  }, [\r\n    user.uid,\r\n    user.displayName,\r\n    user.isAnonymous,\r\n    db,\r\n    messages,\r\n    roomId,\r\n    isRoomExist,\r\n  ]);\r\n\r\n  // console.log(\"ROOOM ID\", roomId);\r\n  // console.log(\"__ROOOM ID\", _roomId);\r\n\r\n  const getDateFromMessage = () => {\r\n    return new Date(\r\n      messages[messages.length - 1]?.timestamp?.toDate()\r\n    ).toLocaleTimeString([], {\r\n      weekday: \"long\",\r\n      year: \"numeric\",\r\n      month: \"long\",\r\n      day: \"numeric\",\r\n      hour: \"numeric\",\r\n      hour12: true,\r\n      minute: \"numeric\",\r\n    });\r\n  };\r\n\r\n  const getDateLocal = () => {\r\n    return new Date().toLocaleTimeString([], {\r\n      weekday: \"long\",\r\n      year: \"numeric\",\r\n      month: \"long\",\r\n      day: \"numeric\",\r\n      hour: \"numeric\",\r\n      hour12: true,\r\n      minute: \"numeric\",\r\n    });\r\n  };\r\n\r\n  const searchMessage = () => {\r\n    setDrawerRightSearch(true);\r\n  };\r\n\r\n  const contactInfo = () => {\r\n    setDrawerRightInfo(true);\r\n    setMenuChat(null);\r\n  };\r\n\r\n  const selectMessages = () => {\r\n    const selectMessages = \"selectMessages\";\r\n    toastInfo(\r\n      \"Select Messages is not yet  available!\",\r\n      selectMessages,\r\n      \"top-center\"\r\n    );\r\n  };\r\n\r\n  const muteNotifications = () => {\r\n    const muteNotifications = \"muteNotifications\";\r\n    toastInfo(\r\n      \"Mute Notifications is not yet available!\",\r\n      muteNotifications,\r\n      \"top-center\"\r\n    );\r\n  };\r\n\r\n  const clearMessages = () => {\r\n    const clearMessages = \"clearMessages\";\r\n    toastInfo(\r\n      \"Clear Messages is not yet available!\",\r\n      clearMessages,\r\n      \"top-center\"\r\n    );\r\n  };\r\n\r\n  const deleteRoom = () => {\r\n    const roomDeleted = \"roomDeleted\";\r\n\r\n    if (roomOwner === user.uid || role === \"admin\") {\r\n      db.collection(\"rooms\")\r\n        .doc(roomId)\r\n        .delete()\r\n        .then(function () {\r\n          toastInfo(\"Room successfully deleted!\", roomDeleted, \"top-center\");\r\n        })\r\n        .catch(function (error) {\r\n          toastInfo(`Error removing room! ${error}`, roomDeleted, \"top-center\");\r\n        });\r\n      history.push(\"/\");\r\n    } else {\r\n      toastInfo(\r\n        `You are not allowed to delete room ${roomName}. Only the admin or room owner ${roomCreatedBy}`,\r\n        roomDeleted,\r\n        \"top-center\"\r\n      );\r\n    }\r\n  };\r\n\r\n  const handleMenuClose = () => {\r\n    setMenuChat(null);\r\n  };\r\n\r\n  const handleMenuOpen = (event) => {\r\n    setMenuChat(event.currentTarget);\r\n  };\r\n\r\n  const menuChatLists = [\r\n    {\r\n      title: \"Contact info\",\r\n      onClick: () => contactInfo(),\r\n      id: Math.random() * 100000,\r\n    },\r\n    {\r\n      title: \"Select messages\",\r\n      onClick: () => selectMessages(),\r\n      id: Math.random() * 100000,\r\n    },\r\n    {\r\n      title: \"Mute notifications\",\r\n      onClick: () => muteNotifications(),\r\n      id: Math.random() * 100000,\r\n    },\r\n    {\r\n      title: \"Clear messages\",\r\n      onClick: () => clearMessages(),\r\n      id: Math.random() * 100000,\r\n    },\r\n    {\r\n      title: \"Delete Room\",\r\n      onClick: () => deleteRoom(),\r\n      id: Math.random() * 100000,\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <div className=\"chat__header\">\r\n      <DrawerRightSearch\r\n        drawerRightSearch={drawerRightSearch}\r\n        setDrawerRightSearch={setDrawerRightSearch}\r\n        roomId={roomId}\r\n        messages={messages}\r\n        db={db}\r\n        user={user}\r\n      />\r\n\r\n      <DrawerRightInfo\r\n        drawerRightInfo={drawerRightInfo}\r\n        setDrawerRightInfo={setDrawerRightInfo}\r\n        roomId={roomId}\r\n        messages={messages}\r\n        db={db}\r\n        user={user}\r\n      />\r\n\r\n      <Hidden smUp>\r\n        <Link to=\"/\">\r\n          <div className=\"chat__back_button\">\r\n            <IconButton>\r\n              <ArrowBackIcon style={{ color: \"#de5751\" }} />\r\n            </IconButton>\r\n          </div>\r\n        </Link>\r\n      </Hidden>\r\n\r\n      <Avatar>{roomName[0]}</Avatar>\r\n      <div className=\"chat__headerInfo\">\r\n        <h3>{roomName}</h3>\r\n\r\n        {isLastMessage ? (\r\n          <>\r\n            {showDate ? (\r\n              <p>Last seen {getDateFromMessage()}</p>\r\n            ) : (\r\n              <p>Last seen {getDateLocal()}</p>\r\n            )}\r\n          </>\r\n        ) : null}\r\n      </div>\r\n\r\n      <div className=\"chat__headerRight\">\r\n        <TooltipCustom\r\n          name=\"Search\"\r\n          icon={<SearchOutlinedIcon style={{ color: \"#de5751\" }} />}\r\n          onClick={searchMessage}\r\n        />\r\n        <TooltipCustom\r\n          name=\"Menu\"\r\n          icon={<MoreVertIcon style={{ color: \"#de5751\" }} />}\r\n          onClick={handleMenuOpen}\r\n        />\r\n        <DropdownMenu\r\n          menuLists={menuChatLists}\r\n          menu={menuChat}\r\n          handleMenuOpen={handleMenuOpen}\r\n          handleMenuClose={handleMenuClose}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ChatHeader;\r\n","import React, { useEffect, useRef, useState } from \"react\";\r\nimport ReactPlayer from \"react-player\";\r\n// importing component\r\n//importing material-ui-icon\r\nimport LockIcon from \"@material-ui/icons/Lock\";\r\nimport AlarmIcon from \"@material-ui/icons/Alarm\";\r\nimport DoneIcon from \"@material-ui/icons/Done\";\r\n//importing styles\r\nimport \"./ChatBody.css\";\r\nconst CryptoJS = require(\"crypto-js\");\r\n\r\nfunction ChatBody({\r\n  roomOwner,\r\n  roomCreatedBy,\r\n  messages,\r\n  user,\r\n  roomId,\r\n  isRoomExist,\r\n}) {\r\n  const decrypt = (data) => {\r\n    const bytes = CryptoJS.AES.decrypt(data, \"my-secret-key@123\");\r\n    const decryptedData = bytes.toString(CryptoJS.enc.Utf8);\r\n    // return decryptedData\r\n    return data ? decryptedData : data;\r\n  };\r\n  const messagesEndRef = useRef(null);\r\n  const [playing, setPlaying] = useState(false);\r\n\r\n  useEffect(() => {\r\n    //listens when room is changed, then it sets playing to false\r\n    if (isRoomExist >= 0) {\r\n      setPlaying(false);\r\n    }\r\n  }, [isRoomExist]);\r\n\r\n  const handlePlay = () => {\r\n    setPlaying(true);\r\n  };\r\n\r\n  const handlePause = () => {\r\n    setPlaying(false);\r\n  };\r\n\r\n  const scrollToBottom = () => {\r\n    if (roomId) {\r\n      messagesEndRef.current.scrollIntoView({ behavior: \"auto\" });\r\n    }\r\n  };\r\n  useEffect(scrollToBottom, [messages, roomId]);\r\n\r\n  return (\r\n    <div>\r\n      <p className=\"chat__message_reminder\">\r\n        <LockIcon /> Welcome to Tattle. Messages are encrpyted.\r\n      </p>\r\n      <p className=\"chat__message_reminder chat__createdBy\">\r\n        {roomOwner === user.uid\r\n          ? \"You created this group\"\r\n          : `${roomCreatedBy} created this group`}\r\n      </p>\r\n\r\n      {messages.map((message) => (\r\n        <div\r\n          key={message.id}\r\n          className={`chat__message \r\n                    ${message.uid === user.uid && \"chat__sender\"} \r\n                    ${message.photo && \"chat__message_media_image\"}\r\n                    ${message.video && \"chat__message_media_video\"}\r\n                    ${\r\n                      message.video &&\r\n                      !message.caption &&\r\n                      \"chat__message_media_video_noCaption\"\r\n                    } `}\r\n        >\r\n          <span\r\n            className={`chat__name ${\r\n              message.uid === user.uid && \"chat__name_sender\"\r\n            }`}\r\n          >\r\n            {message.name}\r\n          </span>\r\n\r\n          <div className=\"chat__body_image_container\">\r\n            {message.photo ? (\r\n              <>\r\n                <img alt=\"\" className=\"chat__body_image\" src={message.photo} />\r\n              </>\r\n            ) : null}\r\n          </div>\r\n\r\n          <div className=\"chat__body_video_container\">\r\n            {message.video ? (\r\n              <>\r\n                <div className=\"player-wrapper\">\r\n                  <ReactPlayer\r\n                    className=\"react-player\"\r\n                    width=\"100%\"\r\n                    height=\"100%\"\r\n                    url={message.video}\r\n                    controls={true}\r\n                    onPlay={handlePlay}\r\n                    onPause={handlePause}\r\n                    onEnded={handlePause}\r\n                  />\r\n                </div>\r\n              </>\r\n            ) : null}\r\n          </div>\r\n\r\n          <div className=\"chat__message_box\">\r\n            <div\r\n              className={`chat__message_box_text ${\r\n                message.uid === user.uid && \"chat__message_box_text_sender\"\r\n              }\r\n              ${\r\n                message.photo &&\r\n                !message.caption &&\r\n                \"chat__message_box_text_no_caption\"\r\n              } `}\r\n            >\r\n              {message.message ? decrypt(message.message) : null}\r\n              {message.caption ? message.caption : null}\r\n              {message.url ? (\r\n                <a\r\n                  target=\"_blank\"\r\n                  href={`${message.url}`}\r\n                  rel=\"noopener noreferrer\"\r\n                >\r\n                  {message.url}\r\n                </a>\r\n              ) : null}\r\n\r\n              <div\r\n                className={`chat__timestamp_container ${\r\n                  message.uid === user.uid && \"chat__timestamp_container_sender\"\r\n                }`}\r\n              >\r\n                {message.timestamp ? (\r\n                  <div\r\n                    className={`chat__timestamp \r\n                                    ${\r\n                                      message.photo &&\r\n                                      !message.caption &&\r\n                                      \"chat__timestamp_media_photo\"\r\n                                    }  \r\n                                    ${\r\n                                      message.video &&\r\n                                      !message.caption &&\r\n                                      \"chat__timestamp_media_video\"\r\n                                    }\r\n                                    ${\r\n                                      message.video &&\r\n                                      !message.caption &&\r\n                                      playing === true &&\r\n                                      \"chat__timestamp_media_displayNone\"\r\n                                    }`}\r\n                  >\r\n                    <span>\r\n                      {new Date(message.timestamp.toDate()).toLocaleTimeString(\r\n                        \"en-US\",\r\n                        {\r\n                          hour: \"numeric\",\r\n                          hour12: true,\r\n                          minute: \"numeric\",\r\n                        }\r\n                      )}\r\n                      {message.uid === user.uid ? <DoneIcon /> : null}\r\n                    </span>\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"chat__timestamp\">\r\n                    <span>\r\n                      {new Date().toLocaleTimeString(\"en-US\", {\r\n                        hour: \"numeric\",\r\n                        hour12: true,\r\n                        minute: \"numeric\",\r\n                      })}\r\n                      {message.uid === user.uid ? <AlarmIcon /> : null}\r\n                    </span>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      ))}\r\n      {/* it will automatically scroll drown everytime the user enters new chat message */}\r\n      <div ref={messagesEndRef} />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ChatBody;\r\n","import React, { useState } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { useStateValue } from \"../StateProvider\";\r\nimport ReactPlayer from \"react-player\";\r\n//importing material-ui\r\nimport Fab from \"@material-ui/core/Fab\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Drawer from \"@material-ui/core/Drawer\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n//importing material-ui-icons\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport SendIcon from \"@material-ui/icons/Send\";\r\n//importing styles\r\nimport \"./DrawerBottom.css\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: \"flex\",\r\n  },\r\n  drawerPaper: {\r\n    position: \"absolute\",\r\n    width: \"100%\",\r\n  },\r\n  paperAnchorBottom: {\r\n    left: \"auto\",\r\n    right: 0,\r\n    bottom: 0,\r\n    maxHeight: \"100%\",\r\n    [theme.breakpoints.up(\"xs\")]: {\r\n      top: 52,\r\n    },\r\n    [theme.breakpoints.up(\"sm\")]: {\r\n      top: 65,\r\n    },\r\n    [theme.breakpoints.up(\"md\")]: {\r\n      top: 65,\r\n    },\r\n    [theme.breakpoints.up(\"lg\")]: {\r\n      top: 65,\r\n    },\r\n  },\r\n}));\r\n\r\nfunction DrawerBottom({\r\n  drawerBottom,\r\n  setDrawerBottom,\r\n  fileImageUrl,\r\n  fileVideoUrl,\r\n  setFileVideoUrl,\r\n  setFileImageUrl,\r\n  firebase,\r\n  db,\r\n  storage,\r\n}) {\r\n  const classes = useStyles();\r\n  const [{ user }] = useStateValue();\r\n  const [caption, setCaption] = useState(\"\");\r\n  const { roomId } = useParams();\r\n\r\n  const handleUpload = (e) => {\r\n    e.preventDefault();\r\n    if (fileImageUrl) {\r\n      db.collection(\"rooms\")\r\n        .doc(roomId)\r\n        .collection(\"messages\")\r\n        .add({\r\n          photo: fileImageUrl,\r\n          name: user.displayName,\r\n          uid: user.uid,\r\n          caption: caption,\r\n          timestamp: firebase.firestore.FieldValue.serverTimestamp(),\r\n        })\r\n        .then(function (docRef) {\r\n          db.collection(\"rooms\")\r\n            .doc(roomId)\r\n            .collection(\"messages\")\r\n            .doc(docRef.id)\r\n            .set(\r\n              {\r\n                id: docRef.id,\r\n              },\r\n              { merge: true }\r\n            );\r\n        })\r\n        .catch(function (error) {\r\n          console.error(\"Error adding document: \", error);\r\n        });\r\n      setFileImageUrl(null);\r\n    }\r\n    if (fileVideoUrl) {\r\n      db.collection(\"rooms\")\r\n        .doc(roomId)\r\n        .collection(\"messages\")\r\n        .add({\r\n          video: fileVideoUrl,\r\n          name: user.displayName,\r\n          uid: user.uid,\r\n          caption: caption,\r\n          timestamp: firebase.firestore.FieldValue.serverTimestamp(),\r\n        })\r\n        .then(function (docRef) {\r\n          db.collection(\"rooms\")\r\n            .doc(roomId)\r\n            .collection(\"messages\")\r\n            .doc(docRef.id)\r\n            .set(\r\n              {\r\n                id: docRef.id,\r\n              },\r\n              { merge: true }\r\n            );\r\n        })\r\n        .catch(function (error) {\r\n          console.error(\"Error adding document: \", error);\r\n        });\r\n      setFileVideoUrl(null);\r\n    }\r\n    setCaption(\"\");\r\n    setDrawerBottom(false);\r\n  };\r\n\r\n  const handleDrawerClose = () => {\r\n    setDrawerBottom(false);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Drawer\r\n        variant=\"persistent\"\r\n        anchor=\"bottom\"\r\n        open={drawerBottom}\r\n        classes={{\r\n          paper: classes.drawerPaper,\r\n          paperAnchorBottom: classes.paperAnchorBottom,\r\n        }}\r\n      >\r\n        <div className=\"drawerBottom__header\">\r\n          <div className=\"drawerBottom__header_container\">\r\n            <IconButton onClick={handleDrawerClose}>\r\n              <CloseIcon />\r\n            </IconButton>\r\n            <p>Preview</p>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"drawerBottom__content\">\r\n          <div className=\"drawerBottom__content_photo\">\r\n            {fileImageUrl ? (\r\n              <img src={fileImageUrl} alt=\"\" />\r\n            ) : (\r\n              <div className=\"drawerBottom__content_video\">\r\n                <div className=\"player-wrapper\">\r\n                  <ReactPlayer\r\n                    className=\"react-player\"\r\n                    width=\"100%\"\r\n                    height=\"50%\"\r\n                    url={fileVideoUrl}\r\n                    controls={true}\r\n                  />\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n          <div className=\"drawerBottom__content_caption\">\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Add a caption...\"\r\n              value={caption}\r\n              onChange={(e) => setCaption(e.target.value)}\r\n            />\r\n            <Fab\r\n              color=\"primary\"\r\n              aria-label=\"send\"\r\n              size=\"large\"\r\n              onClick={handleUpload}\r\n            >\r\n              <div className=\"chat__icon\">\r\n                <SendIcon />\r\n              </div>\r\n            </Fab>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"drawerBottom__footer\">\r\n          <div>{fileImageUrl ? <img src={fileImageUrl} alt=\"\" /> : null}</div>\r\n        </div>\r\n      </Drawer>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default DrawerBottom;\r\n","import styled from \"styled-components\";\r\nexport const chatfooter_height = styled.div`\r\n  height: ${(props) => (props.drawerBottom ? \"100%\" : \"62px\")};\r\n`;\r\n","import React, { useState } from \"react\";\r\nimport { useStateValue } from \"../StateProvider\";\r\nimport { toastInfo } from \"../shared/toastInfo\";\r\n//importing components\r\nimport DrawerBottom from \"./DrawerBottom\";\r\nimport TooltipCustom from \"../shared/TooltipCustom\";\r\nimport { Picker } from \"emoji-mart\";\r\n//importing material-ui\r\nimport Hidden from \"@material-ui/core/Hidden\";\r\nimport Tooltip from \"@material-ui/core/Tooltip\";\r\nimport Fab from \"@material-ui/core/Fab\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport ClickAwayListener from \"@material-ui/core/ClickAwayListener\";\r\n//importing material-ui-icons\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport InsertEmoticonIcon from \"@material-ui/icons/InsertEmoticon\";\r\nimport SendIcon from \"@material-ui/icons/Send\";\r\nimport AttachFileIcon from \"@material-ui/icons/AttachFile\";\r\nimport InsertDriveFileIcon from \"@material-ui/icons/InsertDriveFile\";\r\nimport PhotoIcon from \"@material-ui/icons/Photo\";\r\nimport CameraAltIcon from \"@material-ui/icons/CameraAlt\";\r\nimport VideoCallIcon from \"@material-ui/icons/VideoCall\";\r\nimport PersonIcon from \"@material-ui/icons/Person\";\r\n//importing styles\r\nimport \"emoji-mart/css/emoji-mart.css\";\r\nimport \"./ChatFooter.css\";\r\nimport * as s from \"./preview.style\";\r\nimport CryptoJS from \"crypto-js\";\r\n\r\nconst attachFileLists = [\r\n  {\r\n    title: \"Room\",\r\n    icon: <VideoCallIcon />,\r\n    id: Math.random() * 100000,\r\n  },\r\n  {\r\n    title: \"Contact\",\r\n    icon: <PersonIcon />,\r\n    id: Math.random() * 100000,\r\n  },\r\n  {\r\n    title: \"Document\",\r\n    icon: <InsertDriveFileIcon />,\r\n    id: Math.random() * 100000,\r\n  },\r\n  {\r\n    title: \"Camera\",\r\n    icon: <CameraAltIcon />,\r\n    id: Math.random() * 100000,\r\n  },\r\n  {\r\n    title: \"Photos & Videos\",\r\n    icon: <PhotoIcon />,\r\n    id: Math.random() * 100000,\r\n  },\r\n];\r\n\r\nfunction ChatFooter({ roomName, roomId, db, firebase, storage }) {\r\n  const [{ user }] = useStateValue();\r\n  const [input, setInput] = useState(\"\");\r\n  const [emoji, setEmoji] = useState(false);\r\n  const [fileImageUrl, setFileImageUrl] = useState(null);\r\n  const [fileVideoUrl, setFileVideoUrl] = useState(null);\r\n  const [drawerBottom, setDrawerBottom] = useState(false);\r\n  const [showAttachFile, setShowAttachFile] = useState(false);\r\n\r\n  const attachFile = () => {\r\n    const attachToastId = \"attach\";\r\n    toastInfo(\r\n      \"All icons have the same functions, you can only upload images, gifs and videos!\",\r\n      attachToastId,\r\n      \"top-center\"\r\n    );\r\n    if (showAttachFile === false) {\r\n      setShowAttachFile(true);\r\n    } else {\r\n      setShowAttachFile(false);\r\n    }\r\n  };\r\n\r\n  const addEmoji = (e) => {\r\n    let emoji = e.native;\r\n    setInput(input + emoji);\r\n  };\r\n\r\n  const handleEmoticons = () => {\r\n    setEmoji(true);\r\n  };\r\n\r\n  const handleEmoticonsClose = () => {\r\n    setEmoji(false);\r\n  };\r\n\r\n  // const voiceMessage = () => {\r\n  //   const voiceMessageToastId = \"voiceMessage\";\r\n  //   toastInfo(\r\n  //     \"Voice Message is not yet available!\",\r\n  //     voiceMessageToastId,\r\n  //     \"top-center\"\r\n  //   );\r\n  // };\r\n\r\n  const onFileChange = async (e) => {\r\n    const fileSizeToastId = \"fileSizeToastId\";\r\n    const file = e.target.files[0];\r\n    if (file.size > 12 * 1024 * 1024) {\r\n      toastInfo(\r\n        \"File should not exceed more than 12MB\",\r\n        fileSizeToastId,\r\n        \"top-center\"\r\n      );\r\n    } else {\r\n      const storageRef = storage.ref();\r\n      if (file.type.match(\"image.*\")) {\r\n        const imagesRef = storageRef.child(`rooms/${roomName}/images/`);\r\n        const fileRef = imagesRef.child(new Date().getTime() + \" \" + file.name);\r\n        await fileRef.put(file);\r\n        setFileImageUrl(await fileRef.getDownloadURL());\r\n        console.log(\"uploading image\", fileImageUrl);\r\n      } else if (file.type.match(\"video.*\")) {\r\n        const videosRef = storageRef.child(`rooms/${roomName}/videos`);\r\n        const fileRef = videosRef.child(new Date().getTime() + \" \" + file.name);\r\n        await fileRef.put(file);\r\n        setFileVideoUrl(await fileRef.getDownloadURL());\r\n        console.log(\"uploading video\", fileVideoUrl);\r\n      }\r\n      setDrawerBottom(true);\r\n    }\r\n  };\r\n\r\n  const handleClickAway = () => {\r\n    setShowAttachFile(false);\r\n  };\r\n\r\n  const onEnterPress = (e) => {\r\n    if (e.keyCode === 13) {\r\n      e.preventDefault();\r\n\r\n      const youtubeLink =\r\n        /^((?:https?:)?\\/\\/)?((?:www|m)\\.)?((?:youtube\\.com|youtu.be))(\\/(?:[\\w\\\\-]+\\?v=|embed\\/|v\\/)?)([\\w\\\\-]+)(\\S+)?$/;\r\n      const facebookVideoLink =\r\n        /^https?:\\/\\/www\\.facebook\\.com.*\\/(video(s)?|watch|story)(\\.php?|\\/).+$/;\r\n      const vimeoLink =\r\n        /(http|https)?:\\/\\/(www\\.|player\\.)?vimeo\\.com\\/(?:channels\\/(?:\\w+\\/)?|groups\\/([^\\\\/]*)\\/videos\\/|video\\/|)(\\d+)(?:|\\/\\?)/;\r\n      const soundcloudLink = /^https?:\\/\\/(soundcloud\\.com|snd\\.sc)\\/(.*)$/;\r\n      const dailymotionLink =\r\n        /^.+dailymotion.com\\/(video|hub)\\/([^_]+)[^#]*(#video=([^_&]+))?/;\r\n      const urlLink =\r\n        /^(?:http(s)?:\\/\\/)?[\\w.-]+(?:\\.[\\w\\\\.-]+)+[\\w\\-\\\\._~:/?#[\\]@!\\\\$&'\\\\(\\\\)\\\\*\\\\+,;=.]+$/;\r\n\r\n      if (roomId) {\r\n        if (\r\n          youtubeLink.test(input) ||\r\n          facebookVideoLink.test(input) ||\r\n          vimeoLink.test(input) ||\r\n          soundcloudLink.test(input) ||\r\n          dailymotionLink.test(input)\r\n        ) {\r\n          db.collection(\"rooms\")\r\n            .doc(roomId)\r\n            .collection(\"messages\")\r\n            .add({\r\n              message: \"\",\r\n              video: input,\r\n              name: user.displayName,\r\n              uid: user.uid,\r\n              timestamp: firebase.firestore.FieldValue.serverTimestamp(),\r\n            })\r\n            .then(function (docRef) {\r\n              console.log(\"Document written with ID: \", docRef.id);\r\n              db.collection(\"rooms\")\r\n                .doc(roomId)\r\n                .collection(\"messages\")\r\n                .doc(docRef.id)\r\n                .set(\r\n                  {\r\n                    id: docRef.id,\r\n                  },\r\n                  { merge: true }\r\n                );\r\n            })\r\n            .catch(function (error) {\r\n              console.error(\"Error adding document: \", error);\r\n            });\r\n        } else if (urlLink.test(input)) {\r\n          db.collection(\"rooms\")\r\n            .doc(roomId)\r\n            .collection(\"messages\")\r\n            .add({\r\n              message: \"\",\r\n              url: input,\r\n              name: user.displayName,\r\n              uid: user.uid,\r\n              timestamp: firebase.firestore.FieldValue.serverTimestamp(),\r\n            })\r\n            .then(function (docRef) {\r\n              console.log(\"Document written with ID: \", docRef.id);\r\n              db.collection(\"rooms\")\r\n                .doc(roomId)\r\n                .collection(\"messages\")\r\n                .doc(docRef.id)\r\n                .set(\r\n                  {\r\n                    id: docRef.id,\r\n                  },\r\n                  { merge: true }\r\n                );\r\n            })\r\n            .catch(function (error) {\r\n              console.error(\"Error adding document: \", error);\r\n            });\r\n        } else if (/\\S/.test(input)) {\r\n          db.collection(\"rooms\")\r\n            .doc(roomId)\r\n            .collection(\"messages\")\r\n            .add({\r\n              message: CryptoJS.AES.encrypt(\r\n                input,\r\n                \"my-secret-key@123\"\r\n              ).toString(),\r\n              name: user.displayName,\r\n              uid: user.uid,\r\n              timestamp: firebase.firestore.FieldValue.serverTimestamp(),\r\n            })\r\n            .then(function (docRef) {\r\n              db.collection(\"rooms\")\r\n                .doc(roomId)\r\n                .collection(\"messages\")\r\n                .doc(docRef.id)\r\n                .set(\r\n                  {\r\n                    id: docRef.id,\r\n                  },\r\n                  { merge: true }\r\n                );\r\n            })\r\n            .catch(function (error) {\r\n              console.error(\"Error adding document: \", error);\r\n            });\r\n        }\r\n      }\r\n      setInput(\"\");\r\n      setEmoji(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <s.chatfooter_height drawerBottom={drawerBottom} className=\"chat__footer\">\r\n      <DrawerBottom\r\n        drawerBottom={drawerBottom}\r\n        setDrawerBottom={setDrawerBottom}\r\n        fileVideoUrl={fileVideoUrl}\r\n        fileImageUrl={fileImageUrl}\r\n        setFileImageUrl={setFileImageUrl}\r\n        setFileVideoUrl={setFileVideoUrl}\r\n        roomId={roomId}\r\n        db={db}\r\n        firebase={firebase}\r\n        storage={storage}\r\n      />\r\n\r\n      {emoji ? (\r\n        <Hidden only={[\"xs\"]}>\r\n          <TooltipCustom\r\n            name=\"Close\"\r\n            icon={<CloseIcon style={{ color: \"#de5751\" }} />}\r\n            onClick={() => handleEmoticonsClose()}\r\n          />\r\n        </Hidden>\r\n      ) : null}\r\n\r\n      <TooltipCustom\r\n        name=\"Emoticons\"\r\n        icon={<InsertEmoticonIcon style={{ color: \"#de5751\" }} />}\r\n        onClick={() => handleEmoticons()}\r\n      />\r\n\r\n      {emoji ? (\r\n        <>\r\n          <Hidden only={[\"xs\"]}>\r\n            <Picker onSelect={addEmoji} />\r\n          </Hidden>\r\n          <Hidden smUp>\r\n            <ClickAwayListener onClickAway={handleEmoticonsClose}>\r\n              <Picker onSelect={addEmoji} />\r\n            </ClickAwayListener>\r\n          </Hidden>\r\n        </>\r\n      ) : null}\r\n\r\n      <div>\r\n        <TooltipCustom\r\n          name=\"Attach\"\r\n          icon={<AttachFileIcon style={{ color: \"#de5751\" }} />}\r\n          onClick={attachFile}\r\n        />\r\n        {showAttachFile ? (\r\n          <ClickAwayListener onClickAway={handleClickAway}>\r\n            <div className=\"chat__attachFile\">\r\n              {attachFileLists.map((attachFileList) => (\r\n                <Slide\r\n                  key={attachFileList.id}\r\n                  direction=\"up\"\r\n                  in={attachFile}\r\n                  mountOnEnter\r\n                  unmountOnExit\r\n                >\r\n                  <Tooltip\r\n                    title={\r\n                      <span\r\n                        style={{ fontSize: \"14px\", padding: \"8px 5px 8px 5px\" }}\r\n                      >\r\n                        {attachFileList.title}\r\n                      </span>\r\n                    }\r\n                    placement=\"left\"\r\n                  >\r\n                    <Fab color=\"primary\" aria-label=\"person\">\r\n                      <div className=\"chat__icon\">\r\n                        <label htmlFor=\"file-input\">\r\n                          {attachFileList.icon}\r\n                        </label>\r\n                        <input\r\n                          id=\"file-input\"\r\n                          type=\"file\"\r\n                          onChange={onFileChange}\r\n                          accept=\"image/*,video/mp4,video/3gpp,video/quicktime\"\r\n                        />\r\n                      </div>\r\n                    </Fab>\r\n                  </Tooltip>\r\n                </Slide>\r\n              ))}\r\n            </div>\r\n          </ClickAwayListener>\r\n        ) : null}\r\n      </div>\r\n\r\n      <form>\r\n        <textarea\r\n          required\r\n          value={input}\r\n          onChange={(e) => setInput(e.target.value)}\r\n          placeholder=\"Type a message\"\r\n          type=\"text\"\r\n          rows=\"1\"\r\n          onKeyDown={onEnterPress}\r\n        />\r\n      </form>\r\n\r\n      <TooltipCustom\r\n        name=\"Send Message\"\r\n        onChange={(e) => setInput(e.target.value)}\r\n        icon={<SendIcon style={{ color: \"#de5751\" }} />}\r\n        onClick={onEnterPress}\r\n      />\r\n    </s.chatfooter_height>\r\n  );\r\n}\r\n\r\nexport default ChatFooter;\r\n","import React from \"react\";\r\nimport LaptopIcon from \"@material-ui/icons/Laptop\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\nimport \"./ChatLandingScreen.css\";\r\nimport Zoom from \"@material-ui/core/Zoom\";\r\n\r\nfunction ChatLandingScreen({ showLandingScreenPhoto }) {\r\n  return (\r\n    <div className=\"chat-landing-screen\">\r\n      <div>\r\n        <Zoom\r\n          in={showLandingScreenPhoto}\r\n          style={{ transitionDelay: showLandingScreenPhoto ? \"300ms\" : \"0ms\" }}\r\n        >\r\n          <img\r\n            className=\"chat-landing-screen__photo\"\r\n            src=\"https://firebasestorage.googleapis.com/v0/b/tattle-9359.appspot.com/o/Folder%2Flogo.webp?alt=media&token=c0d6ec1c-5261-4864-a820-539a731fb7d1\"\r\n            alt=\"TattleLogo\"\r\n          />\r\n        </Zoom>\r\n      </div>\r\n\r\n      <div className=\"chat-landing-screen__title\">\r\n        <p>Keeps you Connected</p>\r\n      </div>\r\n\r\n      <div>\r\n        <p>\r\n          Tattle is driven by a fascination for mobile technology that was once\r\n          viewed as a passing trend.\r\n        </p>\r\n      </div>\r\n\r\n      <Divider />\r\n\r\n      <div className=\"chat-landing-screen__footer\">\r\n        <LaptopIcon />\r\n        <p>Tattle is available for Windows.</p>\r\n        <a\r\n          target=\"_blank\"\r\n          href=\"https://tattle-9359.web.app\"\r\n          rel=\"noopener noreferrer\"\r\n        >\r\n          Get it here.\r\n        </a>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ChatLandingScreen;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useStateValue } from \"../StateProvider\";\r\nimport { useHistory, useParams } from \"react-router-dom\";\r\n//importing firebase\r\nimport { storage, firebase } from \"../firebase\";\r\nimport db from \"../firebase\";\r\n//importing components\r\nimport ChatHeader from \"./ChatHeader\";\r\nimport ChatBody from \"./ChatBody\";\r\nimport ChatFooter from \"./ChatFooter\";\r\nimport ChatLandingScreen from \"./ChatLandingScreen\";\r\n//importing material-ui\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\n//importing styles\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nimport \"./Chat.css\";\r\n\r\nfunction Chat({ isRoomExist }) {\r\n  const history = useHistory();\r\n  const [{ user }] = useStateValue();\r\n  const { roomId } = useParams();\r\n  const [_roomId, set_RoomId] = useState(\"\");\r\n  const [roomName, setRoomName] = useState(\"\");\r\n  const [roomCreatedBy, setRoomCreatedBy] = useState(\"\");\r\n  const [roomOwner, setRoomOwner] = useState(\"\");\r\n  const [messages, setMessages] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [showLandingScreenPhoto, setShowLandingScreenPhoto] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (roomId) {\r\n      db.collection(\"rooms\")\r\n        .doc(roomId)\r\n        .onSnapshot(function (doc) {\r\n          setRoomName(doc.data()?.name);\r\n          setRoomCreatedBy(doc.data()?.createdBy);\r\n          setRoomOwner(doc.data()?.roomOwner);\r\n          set_RoomId(doc.data()?.id);\r\n        });\r\n\r\n      db.collection(\"rooms\")\r\n        .doc(roomId)\r\n        .collection(\"messages\")\r\n        .orderBy(\"timestamp\", \"asc\")\r\n        .onSnapshot(function (doc) {\r\n          setMessages(doc.docs.map((doc) => doc.data()));\r\n          setLoading(true);\r\n        });\r\n\r\n      setShowLandingScreenPhoto(false);\r\n    } else {\r\n      setShowLandingScreenPhoto(true);\r\n      history.push(\"/\");\r\n    }\r\n  }, [roomId, history]);\r\n\r\n  return (\r\n    <div className=\"chat\">\r\n      {roomId ? (\r\n        <>\r\n          <div>\r\n            <ChatHeader\r\n              roomCreatedBy={roomCreatedBy}\r\n              roomOwner={roomOwner}\r\n              roomName={roomName}\r\n              roomId={roomId}\r\n              _roomId={_roomId}\r\n              messages={messages}\r\n              db={db}\r\n              history={history}\r\n              isRoomExist={isRoomExist}\r\n            />\r\n          </div>\r\n\r\n          <div className=\"chat__body\">\r\n            {loading ? (\r\n              <ChatBody\r\n                roomCreatedBy={roomCreatedBy}\r\n                roomOwner={roomOwner}\r\n                roomId={roomId}\r\n                messages={messages}\r\n                user={user}\r\n                isRoomExist={isRoomExist}\r\n              />\r\n            ) : (\r\n              <div className=\"chat__body_loading\">\r\n                <div>\r\n                  <CircularProgress />\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          <div>\r\n            <ChatFooter\r\n              roomName={roomName}\r\n              roomId={roomId}\r\n              db={db}\r\n              firebase={firebase}\r\n              storage={storage}\r\n            />\r\n          </div>\r\n        </>\r\n      ) : (\r\n        <ChatLandingScreen showLandingScreenPhoto={showLandingScreenPhoto} />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Chat;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useStateValue } from \"./StateProvider\";\r\nimport {\r\n  BrowserRouter as Router,\r\n  Switch,\r\n  Route,\r\n  Redirect,\r\n} from \"react-router-dom\";\r\n//importing firebase\r\nimport db from \"./firebase\";\r\nimport { auth, firebase } from \"./firebase\";\r\n//importing actions\r\nimport { setUser } from \"./actions/userAction\";\r\n//importing components\r\nimport Login from \"./Login\";\r\nimport Sidebar from \"../src/Sidebar/Sidebar\";\r\nimport Chat from \"../src/Chat/Chat\";\r\nimport { ToastContainer } from \"react-toastify\";\r\nimport { toastInfo } from \"./shared/toastInfo\";\r\n//importing material-ui\r\nimport Hidden from \"@material-ui/core/Hidden\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport LinearProgress from \"@material-ui/core/LinearProgress\";\r\n//importing styles\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nimport \"./App.css\";\r\n\r\nfunction App() {\r\n  const [{ user }, dispatch] = useStateValue();\r\n  const [rooms, setRooms] = useState([]);\r\n  const [isRoomExist, setIsRoomExist] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const unsubscribe = auth.onAuthStateChanged((authUser) => {\r\n      if (authUser) {\r\n        dispatch(setUser(authUser));\r\n        setLoading(true);\r\n\r\n        db.collection(\"rooms\")\r\n          .orderBy(\"timestamp\", \"desc\")\r\n          .onSnapshot((snapshot) =>\r\n            setRooms(\r\n              snapshot.docs.map((doc) => ({\r\n                id: doc.id,\r\n                data: doc.data(),\r\n              }))\r\n            )\r\n          );\r\n\r\n        if (authUser.isAnonymous === true && authUser.displayName === null) {\r\n          var anonymousName =\r\n            // eslint-disable-next-line no-useless-concat\r\n            \"Anonymous\" + \" \" + Math.floor(Math.random() * 1000000);\r\n\r\n          auth.currentUser.updateProfile({\r\n            displayName: anonymousName,\r\n            photoURL: \"\",\r\n          });\r\n\r\n          db.collection(\"users\")\r\n            .doc(authUser.uid)\r\n            .set({\r\n              name: anonymousName,\r\n              about: \"Hey there! I am using Tattle.\",\r\n              photoURL: \"https://avatars.dicebear.com/api/human/ugtjh.svg\",\r\n              role: \"anonymous\",\r\n              dateJoined: firebase.firestore.FieldValue.serverTimestamp(),\r\n            })\r\n            .then(function () {\r\n              console.log(\"Document successfully updated!\");\r\n            })\r\n            .catch(function (error) {\r\n              // The document probably doesn't exist.\r\n              console.error(\"Error updating document: \", error);\r\n            });\r\n        }\r\n\r\n        if (\r\n          authUser.uid &&\r\n          authUser.isAnonymous === false &&\r\n          authUser.photoURL !== null\r\n        ) {\r\n          const errorAbout = \"errorAbout\";\r\n          db.collection(\"users\")\r\n            .doc(authUser.uid)\r\n            .get()\r\n            .then(function (doc) {\r\n              if (doc.exists) {\r\n                // console.log(\"USER EXIST\");\r\n              } else {\r\n                db.collection(\"users\").doc(authUser.uid).set({\r\n                  name: authUser.displayName,\r\n                  about: \"Hey there! I am using Tattle.\",\r\n                  photoURL: user.photoURL,\r\n                  role: \"regular\",\r\n                  dateJoined: firebase.firestore.FieldValue.serverTimestamp(),\r\n                });\r\n              }\r\n            })\r\n            .catch(function (error) {\r\n              toastInfo(`${error}`, errorAbout, \"top-center\");\r\n            });\r\n        } else if (\r\n          authUser.uid &&\r\n          authUser.isAnonymous === false &&\r\n          authUser.photoURL === null\r\n        ) {\r\n          const errorAbout = \"errorAbout\";\r\n          db.collection(\"users\")\r\n            .doc(authUser.uid)\r\n            .get()\r\n            .then(function (doc) {\r\n              if (doc.exists) {\r\n                console.log(\"USER EXIST\");\r\n              } else {\r\n                db.collection(\"users\").doc(authUser.uid).set({\r\n                  name: authUser.displayName,\r\n                  about: \"Hey there! I am using Tattle.\",\r\n                  photoURL: \"\",\r\n                  role: \"regular\",\r\n                  dateJoined: firebase.firestore.FieldValue.serverTimestamp(),\r\n                });\r\n              }\r\n            })\r\n            .catch(function (error) {\r\n              toastInfo(`${error}`, errorAbout, \"top-center\");\r\n            });\r\n        }\r\n      } else {\r\n        dispatch(setUser(null));\r\n        setLoading(true);\r\n      }\r\n    });\r\n\r\n    return () => {\r\n      unsubscribe();\r\n    };\r\n  }, [dispatch, user]);\r\n\r\n  return (\r\n    <div className={`app ${loading === false && \"app-no-bg\"}`}>\r\n      {loading ? (\r\n      <>\r\n          <ToastContainer\r\n            position=\"top-center\"\r\n            autoClose={5000}\r\n            newestOnTop={false}\r\n            closeOnClick\r\n            rtl={false}\r\n            pauseOnFocusLoss\r\n            draggable\r\n          />\r\n          {!user ? (\r\n            <Login />\r\n          ) : (\r\n            <div className=\"app__body\">\r\n              <Router>\r\n                <Switch>\r\n                  <Route exact path=\"/\">\r\n                    <Sidebar\r\n                      rooms={rooms}\r\n                      setIsRoomExist={setIsRoomExist}\r\n                      isRoomExist={isRoomExist}\r\n                    />\r\n                    <Hidden only={[\"xs\"]}>\r\n                      {\" \"}\r\n                      {/* Chat component will be hidden in mobile view */}\r\n                      <Chat isRoomExist={isRoomExist} />\r\n                    </Hidden>\r\n                  </Route>\r\n\r\n                  <Route exact path=\"/rooms/:roomId\">\r\n                    <Hidden only={[\"xs\"]}>\r\n                      {\" \"}\r\n                      {/* Sidebar component will be hidden in mobile view */}\r\n                      <Sidebar\r\n                        rooms={rooms}\r\n                        setIsRoomExist={setIsRoomExist}\r\n                        isRoomExist={isRoomExist}\r\n                      />\r\n                    </Hidden>\r\n                    <Chat isRoomExist={isRoomExist} />\r\n                  </Route>\r\n\r\n                  <Route path=\"*\">\r\n                    <Redirect to=\"/\" />\r\n                  </Route>\r\n                </Switch>\r\n              </Router>\r\n            </div>\r\n          )}\r\n        </>\r\n      ) : (\r\n        <div className=\"app__loading\">\r\n          <div>\r\n            <div className=\"app__loading_circular\">\r\n              <CircularProgress />\r\n            </div>\r\n            <div className=\"app__loading_linear\">\r\n              <LinearProgress />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://cra.link/PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://cra.link/PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then((registration) => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://cra.link/PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch((error) => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then((response) => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then((registration) => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log('No internet connection found. App is running in offline mode.');\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then((registration) => {\r\n        registration.unregister();\r\n      })\r\n      .catch((error) => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","export const initialState = {\r\n    user: null,\r\n}\r\n\r\nexport const actionTypes = {\r\n    SET_USER: \"SET_USER\",\r\n}\r\n\r\nconst reducer = (state, action) => {\r\n\r\n    switch (action.type) {\r\n        case actionTypes.SET_USER:\r\n            return {\r\n                ...state,\r\n                user: action.user,\r\n            };\r\n\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default reducer;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorkerRegistration from './serviceWorkerRegistration';\r\nimport { StateProvider } from './StateProvider';\r\nimport reducer, { initialState } from './reducer';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <StateProvider initialState={initialState} reducer={reducer} >\r\n      <App />\r\n    </StateProvider>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://cra.link/PWA\r\nserviceWorkerRegistration.register();\r\n"],"sourceRoot":""}