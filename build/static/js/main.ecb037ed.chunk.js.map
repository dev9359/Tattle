{"version":3,"sources":["StateProvider.js","firebase.js","actions/userAction.js","shared/toastInfo.js","images/logo.webp","Login.js","images/Google G Logo.png","Sidebar/UserAvatar.js","shared/TooltipCustom.js","Sidebar/NewChat.js","Sidebar/Status.js","shared/DropdownMenu.js","shared/DialogCustom.js","Sidebar/DrawerLeft.js","shared/SearchBar.js","Sidebar/SidebarChat.js","Sidebar/Sidebar.js","Chat/DrawerRight.js","Chat/DrawerRightSearch.js","Chat/DrawerRightInfo.js","Chat/ChatHeader.js","Chat/ChatBody.js","Chat/DrawerBottom.js","Chat/preview.style.js","Chat/ChatFooter.js","Chat/ChatLandingScreen.js","Chat/Chat.js","App.js","serviceWorkerRegistration.js","reducer.js","index.js"],"names":["StateContext","createContext","StateProvider","reducer","initialState","children","Provider","value","useReducer","useStateValue","useContext","db","firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","firestore","auth","provider","GoogleAuthProvider","storage","setUser","authUser","type","user","toastInfo","toastTitle","toastId","position","toast","info","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","Login","className","rel","src","Logo","alt","onClick","signInWithPopup","catch","error","signInAnonymously","UserAvatar","photoURL","style","cursor","Avatar","TooltipCustom","name","icon","Tooltip","title","fontSize","padding","placement","IconButton","use","currentUser","console","log","uid","NewChat","useState","roomName","setRoomName","users","setUsers","open","setOpen","handleNewChatClose","color","Dialog","onClose","aria-labelledby","DialogTitle","id","DialogContent","TextField","autoFocus","margin","label","fullWidth","onChange","e","target","DialogActions","Button","preventDefault","collection","onSnapshot","snapshot","docs","map","doc","data","email","find","add","roomOwner","createdBy","displayName","timestamp","FieldValue","serverTimestamp","then","docRef","set","merge","disabled","Status","DropdownMenu","menuLists","menu","handleMenuClose","Menu","anchorEl","keepMounted","Boolean","anchorOrigin","vertical","horizontal","transformOrigin","getContentAnchorEl","menuList","MenuItem","key","DialogCustom","close","photo","fullScreen","aria-describedby","edge","aria-label","Zoom","in","transitionDelay","useStyles","makeStyles","theme","root","display","drawerPaper","DrawerLeft","drawerLeft","setDrawerLeft","classes","setName","about","setAbout","showEditName","setShowEditName","showEditAbout","setShowEditAbout","showProfilePhoto","setShowProfilePhoto","uploadPhotoLink","setUploadPhotoLink","showDialogUpload","setShowDialogUpload","menuProfile","setMenuProfile","setPhoto","useEffect","onFileChangeImage","a","file","files","size","storageRef","ref","isAnonymous","imagesRef","child","fileRef","put","getDownloadURL","handleUploadPhoto","updateProfile","Math","random","htmlFor","accept","Drawer","anchor","variant","paper","event","currentTarget","styles","borderBottom","update","SearchBar","placeholder","setSearch","search","showArrowIcon","setShowArrowIcon","required","onFocus","onBlur","CryptoJS","require","SidebarChat","messages","setMessages","orderBy","to","video","message","decryptedData","AES","decrypt","toString","enc","Utf8","url","Sidebar","rooms","setIsRoomExist","isRoomExist","history","useHistory","roomId","useParams","loading","setLoading","noRooms","setNoRooms","menuSidebar","setMenuSidebar","isSearchFound","setIsSetSearchFound","findRoom","myRooms","x","toLowerCase","includes","filter","room","props","length","index","findIndex","push","handleDrawerLeftOpen","handleMenuOpen","delete","signOut","CircularProgress","breakpoints","only","width","up","DrawerRight","content","drawerRight","DrawerRightSearch","drawerRightSearch","setDrawerRightSearch","isFoundMessage","setIsFoundMessage","findMessage","myMessages","caption","Date","toDate","toLocaleTimeString","hour","hour12","minute","Divider","DrawerRightInfo","drawerRightInfo","setDrawerRightInfo","messageResult","ChatHeader","roomCreatedBy","_roomId","menuChat","setMenuChat","role","setRole","showDate","setShowDate","isLastMessage","setIsLastMessage","get","exists","menuChatLists","roomDeleted","deleteRoom","Hidden","smUp","weekday","year","month","day","getDateFromMessage","ChatBody","messagesEndRef","useRef","playing","setPlaying","handlePlay","handlePause","current","scrollIntoView","behavior","height","controls","onPlay","onPause","onEnded","href","paperAnchorBottom","left","right","bottom","maxHeight","top","DrawerBottom","drawerBottom","setDrawerBottom","fileImageUrl","fileVideoUrl","setFileVideoUrl","setFileImageUrl","setCaption","Fab","chatfooter_height","styled","div","attachFileLists","ChatFooter","input","setInput","emoji","setEmoji","showAttachFile","setShowAttachFile","attachFile","addEmoji","native","handleEmoticonsClose","onFileChange","match","getTime","videosRef","onEnterPress","keyCode","test","encrypt","onSelect","ClickAwayListener","onClickAway","attachFileList","Slide","direction","mountOnEnter","unmountOnExit","rows","onKeyDown","ChatLandingScreen","showLandingScreenPhoto","Chat","set_RoomId","setRoomCreatedBy","setRoomOwner","setShowLandingScreenPhoto","App","dispatch","setRooms","unsubscribe","onAuthStateChanged","anonymousName","floor","dateJoined","newestOnTop","rtl","pauseOnFocusLoss","exact","path","LinearProgress","isLocalhost","window","location","hostname","registerValidSW","swUrl","config","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","state","controller","onUpdate","onSuccess","actionTypes","action","ReactDOM","render","StrictMode","document","getElementById","URL","process","origin","addEventListener","fetch","headers","response","contentType","status","indexOf","ready","unregister","reload","checkValidServiceWorker","serviceWorkerRegistration"],"mappings":"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","file":"static/js/main.ecb037ed.chunk.js","sourcesContent":["import React, { createContext, useContext, useReducer } from 'react';\r\n\r\nexport const StateContext = createContext();\r\n\r\nexport const StateProvider = ({ reducer, initialState, children }) => (\r\n    <StateContext.Provider value={useReducer(reducer, initialState)}>\r\n        {children}\r\n    </StateContext.Provider>\r\n);\r\n\r\nexport const useStateValue =  () => useContext(StateContext);","import firebase from \"firebase\";\r\n\r\nconst firebaseConfig = {\r\n  apiKey: \"AIzaSyCF7lHw_Z7DmZgpoZuYIGveD0eZ8ha7Qyg\",\r\n  authDomain: \"tattle-9359.firebaseapp.com\",\r\n  databaseURL: \"https://tattle-9359-default-rtdb.firebaseio.com/\",\r\n  projectId: \"tattle-9359\",\r\n  storageBucket: \"tattle-9359.appspot.com\",\r\n  messagingSenderId: \"849640668400\",\r\n  appId: \"1:849640668400:web:91c77b3a931a325ef4d635\",\r\n  measurementId: \"G-17X1MHRTRX\",\r\n};\r\n\r\nconst firebaseApp = firebase.initializeApp(firebaseConfig);\r\n\r\nconst db = firebaseApp.firestore();\r\nconst auth = firebase.auth();\r\nconst provider = new firebase.auth.GoogleAuthProvider();\r\nconst storage = firebase.storage();\r\n\r\nexport { auth, provider, storage, firebase };\r\nexport default db;\r\n","export function setUser(authUser){\r\n    return {\r\n        type: 'SET_USER',\r\n        user: authUser,\r\n    }\r\n}","import { toast } from 'react-toastify';\r\n\r\nexport const toastInfo = ( toastTitle, toastId, position ) => {\r\n    toast.info(toastTitle, {\r\n        toastId: toastId,\r\n        position: position,\r\n        autoClose: 5000,\r\n        hideProgressBar: true,\r\n        closeOnClick: true,\r\n        pauseOnHover: true,\r\n        draggable: true,\r\n        progress: undefined,\r\n        }\r\n    );\r\n}","export default __webpack_public_path__ + \"static/media/logo.179025b4.webp\";","import React from \"react\";\r\nimport { auth, provider } from \"./firebase\";\r\nimport { toastInfo } from \"./shared/toastInfo\";\r\nimport PermIdentityIcon from \"@material-ui/icons/PermIdentity\";\r\nimport GoogleLogo from \"./images/Google G Logo.png\";\r\nimport Logo from \"./images/logo.webp\";\r\nimport \"./Login.css\";\r\n\r\nfunction Login() {\r\n  const signInGoogle = () => {\r\n    const google = \"google\";\r\n\r\n    auth\r\n      .signInWithPopup(provider)\r\n      .catch((error) => toastInfo(`${error}`, google, \"top-center\"));\r\n  };\r\n\r\n  const loginAnonymously = () => {\r\n    const anonymous = \"anonymous\";\r\n\r\n    auth\r\n      .signInAnonymously()\r\n      .catch((error) => toastInfo(`${error}`, anonymous, \"top-center\"));\r\n  };\r\n\r\n  return (\r\n    <div className=\"login\">\r\n      <div className=\"login__container\">\r\n        <img rel=\"preload\" src={Logo} alt=\"Tattle Logo\" />\r\n        <div className=\"login__text\">\r\n          <h2>Keeps you Connected</h2>\r\n          <br></br>\r\n          <p>Tattle is driven by a fascination for communication </p>\r\n          <p>technology that was once viewed as a passing trend.</p>\r\n        </div>\r\n        <div className=\"login__withGoogle\" onClick={signInGoogle}>\r\n          <img src={GoogleLogo} alt=\"Google Logo\" />\r\n          <span>Sign in with Google</span>\r\n        </div>\r\n\r\n        <div\r\n          className=\"login__withGoogle login__Anonymously\"\r\n          onClick={loginAnonymously}\r\n        >\r\n          <PermIdentityIcon />\r\n          <span>Login Anonymously</span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Login;\r\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAD8klEQVRogc2aW6iUVRTHf845apiXY4lgFlYoSealSMuQiiwjQkEsIqjH6CUIeu/NehAEC8Oi7EoUeSLJk90IAi8pFlREF1SiOtWb1vFW56j/WLUmpmkG197f983MHzYzD/vy/3/7svZaa4+TRAmYAlwOLASWAvOAS4DpwGTgLHAcOAoMA4eAfcDX/v9EUQpFhVwP3AGs8v852AN8AOwEPs1mYkIyymJJr0o6ofIwIulNSStzOKU2mC1pq6SjJQpoxilJL0m6qCohd0n6vkIBzfhR0v1lCpkg6ckOCmjGYxEh/efYQnbivAyszd6ExXAQ2Ft0s0+WNNTFmdgpaU7RpTVe0ntdFLFZUl8Zm31DlwSMSXok5/htZRDvAV7PXNmjwLfALrfcPwNH3LIPAHOAZcCNwHxgYkNbq/sA8G7WyE3KZkgazvyS29yYjQt8Qatzi6Ttkv6Q9KWkq3Jmot3SejpDxO5ca+zlJkkzi4hoFrJc0miiiGckTSpKooxSa1hlDwPjE1bleuBB4GTWmi4b/jUWSvo9cSa6PguNpT4jZrmnBr/RF8BDPTELDaj5EXh7sP6YixjrCLsEmJC5wHXBJub87O4J5k0wIUuAvkDdY8CmjrJLgN1+FwWrfwd8nDnOav6x2lVhyIQsCHZ+oACJJS6mKky1pTU72PknBUiMVCjCMFBLOHaHKyZTBNNNyLRg5SNVsymA801INLA12pMSHCbkt2DdgcrZ5GOk5vYhgst6XcgvwcrXFBgo5Vadgx9MyFfBhisLDFS/mylYzDU+5b8RHOr322wEi1zMRxlC3gIOA38G659xv/7RYP3P7S6/QNKZoB+yo4M+xvNBTsb9SmswUdKuYCNzhVd0QMQKD2hEsN/c7ZpP9/vBKbRN+1TFm/c8YLNfaCPYYe523UN8O+E+ZHtlSzUa/oa5CouDdY859/9EUV4LTmUdj1ewpDYmcthWb9vYyfLETgzPlhQOmiJpS8b4N7QSYuW5jM4sQHdbARG3StqXMe6Ljf00d3qhZ4pScVrSoKRViSHTQW+bil89Dfhvn62C2HcDb2RuVLPg33iAYj/wU0MQ21LVl3r62ozdFU1B7BTc+79Ae5sv1q20QgSbWnFul2e3M3w7cGfmF6sKlo9f0+qqU2sz4GnPkwz1mIh17e5r7YTgzypsLQ5Wxy2Md5zL8bYNAidMn6/LbuEJSf3n4ply3q+TdLiDYswM3Bfll2q8Zvn1uuonHC/4WGFuudbYHtW8UrIgy88M5qbxij5zutq9Rjumb87sw4znh76hP8slUtbDM/MhzFLbw7Nr/eHZxcAF/gzEBrETx6y8RSztaYZZ/vrDs2LpO+AvpvyKMZBkRBsAAAAASUVORK5CYII=\"","import React from 'react';\r\nimport Avatar from '@material-ui/core/Avatar';\r\n\r\nfunction UserAvatar( { photoURL, onClick }) {\r\n    return (\r\n        <div style={{cursor: 'pointer'}}>\r\n            <Avatar \r\n                src={photoURL} \r\n                onClick={onClick}\r\n            />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default UserAvatar","import React from 'react';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\nimport IconButton from '@material-ui/core/IconButton';\r\n\r\nfunction TooltipCustom( { name, icon, onClick }) {\r\n    return (\r\n        <div>\r\n            <Tooltip title={<span style={{fontSize: '14px', \r\n                padding: '8px 5px 8px 5px'}}>{name}</span>} \r\n                placement=\"bottom-end\">\r\n                <IconButton onClick={onClick}>\r\n                    {icon}\r\n                </IconButton>\r\n            </Tooltip>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default TooltipCustom\r\n","import React, { useState } from \"react\";\r\nimport TooltipCustom from \"../shared/TooltipCustom\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport ChatIcon from \"@material-ui/icons/Chat\";\r\nimport firebase from \"firebase/app\";\r\nimport \"firebase/auth\";\r\nlet use = firebase.auth().currentUser;\r\nconsole.log(use.uid);\r\n\r\nfunction NewChat({ user, db, firebase }) {\r\n  const [roomName, setRoomName] = useState(\"\");\r\n  const [users, setUsers] = useState([]);\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const handleNewChatOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleNewChatClose = () => {\r\n    setOpen(false);\r\n    setRoomName(\"\");\r\n  };\r\n\r\n  const createChat = (e) => {\r\n    e.preventDefault();\r\n    db.collection(\"users\").onSnapshot((snapshot) => {\r\n      setUsers(\r\n        snapshot.docs.map((doc) => ({\r\n          id: doc.id,\r\n          data: doc.data(),\r\n        }))\r\n      );\r\n    });\r\n    console.log(\r\n      users.map((user) => {\r\n        return user.data.email;\r\n      })\r\n    );\r\n\r\n    var email = users.find((user) => user.data.email === use.email);\r\n    if (roomName) {\r\n      db.collection(\"rooms\")\r\n        .add({\r\n          roomOwner: email.data.email,\r\n          createdBy: user.displayName,\r\n          name: roomName,\r\n          timestamp: firebase.firestore.FieldValue.serverTimestamp(),\r\n        })\r\n        .then(function (docRef) {\r\n          db.collection(\"rooms\").doc(docRef.id).set(\r\n            {\r\n              id: docRef.id,\r\n            },\r\n            { merge: true }\r\n          );\r\n        })\r\n        .catch(function (error) {\r\n          console.error(\"Error adding document: \", error);\r\n        });\r\n    }\r\n    setOpen(false);\r\n    setRoomName(\"\");\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <TooltipCustom\r\n        name=\"New Chat\"\r\n        onClick={() => handleNewChatOpen()}\r\n        icon={<ChatIcon style={{ color: \"#de5751\" }} />}\r\n      />\r\n\r\n      <Dialog\r\n        open={open}\r\n        onClose={handleNewChatClose}\r\n        aria-labelledby=\"form-dialog-title\"\r\n      >\r\n        <DialogTitle id=\"form-dialog-title\">Create Chat Room</DialogTitle>\r\n        <DialogContent>\r\n          <TextField\r\n            autoFocus\r\n            margin=\"dense\"\r\n            id=\"name\"\r\n            label=\"Room Name\"\r\n            type=\"text\"\r\n            fullWidth\r\n            value={roomName}\r\n            onChange={(e) => setRoomName(e.target.value)}\r\n          />\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={handleNewChatClose} color=\"primary\">\r\n            Cancel\r\n          </Button>\r\n          <Button onClick={createChat} color=\"primary\" disabled={!roomName}>\r\n            Create\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default NewChat;\r\n","import React from \"react\";\r\nimport TooltipCustom from \"../shared/TooltipCustom\";\r\nimport DonutLargeIcon from \"@material-ui/icons/DonutLarge\";\r\n\r\nfunction Status() {\r\n  return (\r\n    <div>\r\n      <TooltipCustom\r\n        name=\"Status\"\r\n        icon={<DonutLargeIcon style={{ color: \"#de5751\" }} />}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Status;\r\n","import React from 'react';\r\nimport Menu from '@material-ui/core/Menu';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\n\r\nfunction DropdownMenu ( { menuLists, menu, handleMenuClose }) {\r\n    return (\r\n        <div>\r\n            <Menu id=\"simple-menu\"\r\n                anchorEl={menu}\r\n                keepMounted\r\n                open={Boolean(menu)}\r\n                onClose={handleMenuClose}\r\n                anchorOrigin={{\r\n                    vertical: \"bottom\",\r\n                    horizontal: \"right\"\r\n                }}\r\n                transformOrigin={{\r\n                    vertical: \"top\",\r\n                    horizontal: \"right\"\r\n                }}\r\n                getContentAnchorEl={null}\r\n                >\r\n                \r\n                {menuLists.map((menuList) =>\r\n                    <MenuItem key={menuList.id} onClick={menuList.onClick}>\r\n                        {menuList.title}\r\n                    </MenuItem>\r\n                )}\r\n            </Menu>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default DropdownMenu","import React from 'react';\r\n// import ReactPlayer from 'react-player';\r\n//importing material-ui\r\nimport Zoom from '@material-ui/core/Zoom';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport IconButton from '@material-ui/core/IconButton';\r\n//importing material-ui-icons\r\nimport CloseIcon from '@material-ui/icons/Close';\r\n//importing styles\r\nimport './DialogCustom.css'\r\n\r\nfunction DialogCustom({ open, close, user, photo }) {\r\n    \r\n    return (\r\n        <Dialog\r\n            open={open}\r\n            fullScreen \r\n            onClose={close}\r\n            aria-labelledby=\"alert-dialog-title\"\r\n            aria-describedby=\"alert-dialog-description\"\r\n            >\r\n            <DialogTitle id=\"alert-dialog-title-dialogCustom\">\r\n                <div>\r\n                    <Avatar src={user.photoURL}/>\r\n                </div>\r\n                <div>\r\n                    <IconButton edge=\"end\" color=\"inherit\" onClick={close} aria-label=\"close\">\r\n                        <CloseIcon />\r\n                    </IconButton>\r\n                </div>\r\n            </DialogTitle>\r\n            <DialogContent>\r\n                <Zoom in={open} style={{ transitionDelay: open ? '300ms' : '0ms' }}>\r\n                    <img src={photo} alt=\"\" className=\"DialogCustom__photo\"/>\r\n                </Zoom>\r\n            </DialogContent>\r\n        </Dialog>\r\n    )\r\n}\r\n\r\nexport default DialogCustom\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useStateValue } from \"../StateProvider\";\r\n//importing components\r\nimport DropdownMenu from \"../shared/DropdownMenu\";\r\nimport { toastInfo } from \"../shared/toastInfo\";\r\nimport DialogCustom from \"../shared/DialogCustom\";\r\n//importing material-ui\r\nimport Zoom from \"@material-ui/core/Zoom\";\r\nimport Drawer from \"@material-ui/core/Drawer\";\r\nimport Avatar from \"@material-ui/core/Avatar\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n//importing material-ui-icons\r\nimport PhotoCameraIcon from \"@material-ui/icons/PhotoCamera\";\r\nimport ArrowBackIcon from \"@material-ui/icons/ArrowBack\";\r\nimport EditIcon from \"@material-ui/icons/Edit\";\r\nimport CheckIcon from \"@material-ui/icons/Check\";\r\n//importing styles\r\nimport \"./DrawerLeft.css\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: \"flex\",\r\n  },\r\n  drawerPaper: {\r\n    position: \"absolute\",\r\n  },\r\n}));\r\n\r\nfunction DrawerLeft({ drawerLeft, setDrawerLeft, db, auth, storage }) {\r\n  const classes = useStyles();\r\n  const [{ user }] = useStateValue();\r\n  const [name, setName] = useState(\"\");\r\n  const [about, setAbout] = useState(\"\");\r\n  const [showEditName, setShowEditName] = useState(false);\r\n  const [showEditAbout, setShowEditAbout] = useState(false);\r\n  const [showProfilePhoto, setShowProfilePhoto] = useState(false);\r\n  const [uploadPhotoLink, setUploadPhotoLink] = useState(null);\r\n  const [showDialogUpload, setShowDialogUpload] = useState(false);\r\n  const [menuProfile, setMenuProfile] = useState(null);\r\n  const [photo, setPhoto] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    setName(user.displayName);\r\n\r\n    db.collection(\"users\")\r\n      .doc(user.uid)\r\n      .onSnapshot(function (doc) {\r\n        setPhoto(doc.data()?.photoURL);\r\n        setAbout(doc.data()?.about);\r\n      });\r\n  }, [user.uid, user.displayName, db]);\r\n\r\n  const updateName = (e) => {\r\n    e.preventDefault();\r\n\r\n    if (user.uid) {\r\n      db.collection(\"users\")\r\n        .doc(user.uid)\r\n        .update({\r\n          name: name,\r\n        })\r\n        .then(function () {\r\n          console.log(\"Document successfully updated!\");\r\n        })\r\n        .catch(function (error) {\r\n          // The document probably doesn't exist.\r\n          console.error(\"Error updating document: \", error);\r\n        });\r\n\r\n      auth.currentUser.updateProfile({\r\n        displayName: name,\r\n      });\r\n    }\r\n    setShowEditName(false);\r\n  };\r\n\r\n  const updateAbout = (e) => {\r\n    e.preventDefault();\r\n\r\n    if (user.uid) {\r\n      db.collection(\"users\")\r\n        .doc(user.uid)\r\n        .update({\r\n          about: about,\r\n        })\r\n        .then(function () {\r\n          console.log(\"Document successfully updated!\");\r\n        })\r\n        .catch(function (error) {\r\n          // The document probably doesn't exist.\r\n          console.error(\"Error updating document: \", error);\r\n        });\r\n    }\r\n    setShowEditAbout(false);\r\n  };\r\n\r\n  const editName = () => {\r\n    setShowEditName(true);\r\n  };\r\n\r\n  const editAbout = () => {\r\n    setShowEditAbout(true);\r\n  };\r\n\r\n  const handleDrawerClose = () => {\r\n    setDrawerLeft(false);\r\n    setShowEditName(false);\r\n    setShowEditAbout(false);\r\n  };\r\n\r\n  const viewPhoto = () => {\r\n    const viewPhoto = \"viewPhoto\";\r\n\r\n    if (user) {\r\n      setShowProfilePhoto(true);\r\n    } else {\r\n      toastInfo(\"You have no photo!\", viewPhoto, \"top-center\");\r\n    }\r\n    setMenuProfile(null);\r\n  };\r\n\r\n  const viewPhotoClose = () => {\r\n    setShowProfilePhoto(false);\r\n  };\r\n\r\n  const takePhoto = () => {\r\n    const takePhoto = \"takePhoto\";\r\n    toastInfo(\"Take photo is not yet available!\", takePhoto, \"top-center\");\r\n  };\r\n\r\n  const removedPhoto = () => {\r\n    const removedPhoto = \"removedPhoto\";\r\n    toastInfo(\r\n      \"Removed photo is not yet available!\",\r\n      removedPhoto,\r\n      \"top-center\"\r\n    );\r\n  };\r\n\r\n  const onFileChangeImage = async (e) => {\r\n    const imageFileSizeToastId = \"imageFileSizeToastId\";\r\n    const file = e.target.files[0];\r\n\r\n    if (file.size > 3 * 1024 * 1024) {\r\n      toastInfo(\r\n        \"Image should not exceed more than 3Mb\",\r\n        imageFileSizeToastId,\r\n        \"top-center\"\r\n      );\r\n    } else {\r\n      const storageRef = storage.ref();\r\n      if (user.isAnonymous === true) {\r\n        const imagesRef = storageRef.child(`user/anonymous/${user.uid}`);\r\n        const fileRef = imagesRef.child(file.name);\r\n        await fileRef.put(file);\r\n        setUploadPhotoLink(await fileRef.getDownloadURL());\r\n        console.log(\"uploading image\", uploadPhotoLink);\r\n      } else {\r\n        const imagesRef = storageRef.child(`user/regular/${user.uid}`);\r\n        const fileRef = imagesRef.child(file.name);\r\n        await fileRef.put(file);\r\n        setUploadPhotoLink(await fileRef.getDownloadURL());\r\n        console.log(\"uploading image\", uploadPhotoLink);\r\n      }\r\n    }\r\n    setMenuProfile(null);\r\n    setShowDialogUpload(true);\r\n  };\r\n\r\n  const uploadPhoto = () => {\r\n    return (\r\n      <div className=\"profileMenu_uploadPhoto\">\r\n        <label htmlFor=\"file-input\">Upload photo</label>\r\n        <input\r\n          id=\"file-input\"\r\n          type=\"file\"\r\n          onChange={onFileChangeImage}\r\n          accept=\"image/*\"\r\n        />\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const handleUploadPhoto = () => {\r\n    const uploadPhotoError = \"uploadPhotoError\";\r\n\r\n    if (uploadPhotoLink) {\r\n      auth.currentUser.updateProfile({\r\n        photoURL: uploadPhotoLink,\r\n      });\r\n      db.collection(\"users\").doc(user.uid).set(\r\n        {\r\n          photoURL: uploadPhotoLink,\r\n        },\r\n        { merge: true }\r\n      );\r\n      setShowDialogUpload(false);\r\n    } else {\r\n      toastInfo(\"Select photo to upload!\", uploadPhotoError, \"top-center\");\r\n    }\r\n  };\r\n\r\n  const handleDialogUploadClose = () => {\r\n    setShowDialogUpload(false);\r\n  };\r\n\r\n  const handleProfileMenu = (event) => {\r\n    setMenuProfile(event.currentTarget);\r\n  };\r\n\r\n  const handleProfileMenuClose = () => {\r\n    setMenuProfile(null);\r\n  };\r\n\r\n  const menuLists = [\r\n    {\r\n      title: \"View Photo\",\r\n      onClick: () => viewPhoto(),\r\n      id: Math.random() * 100000,\r\n    },\r\n    {\r\n      title: \"Take photo\",\r\n      onClick: () => takePhoto(),\r\n      id: Math.random() * 100000,\r\n    },\r\n    {\r\n      title: uploadPhoto(),\r\n      onClick: () => handleUploadPhoto(),\r\n      id: Math.random() * 100000,\r\n    },\r\n    {\r\n      title: \"Removed photo\",\r\n      onClick: () => removedPhoto(),\r\n      id: Math.random() * 100000,\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <div>\r\n      <Drawer\r\n        anchor=\"left\"\r\n        variant=\"persistent\"\r\n        open={drawerLeft}\r\n        classes={{ paper: classes.drawerPaper }}\r\n      >\r\n        <div className=\"drawerLeft__header\">\r\n          <div className=\"drawerLeft__header_container\">\r\n            <IconButton onClick={handleDrawerClose}>\r\n              <ArrowBackIcon />\r\n            </IconButton>\r\n            <p>Profile</p>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"drawerLeft__content\">\r\n          <div className=\"drawerLeft__content_photo\">\r\n            <div className=\"profilePhoto\">\r\n              <Zoom\r\n                in={drawerLeft}\r\n                style={{ transitionDelay: drawerLeft ? \"300ms\" : \"0ms\" }}\r\n              >\r\n                {photo ? (\r\n                  <Avatar src={photo} className=\"profilePhoto__layer_bottom\" />\r\n                ) : (\r\n                  <Avatar />\r\n                )}\r\n              </Zoom>\r\n              <div\r\n                className=\"profilePhoto__layer_top\"\r\n                onClick={handleProfileMenu}\r\n              >\r\n                <div className=\"profilePhoto__text\">\r\n                  <PhotoCameraIcon />\r\n                  <p>CHANGE</p>\r\n                  <p>PROFILE PHOTO</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <DropdownMenu\r\n              menuLists={menuLists}\r\n              menu={menuProfile}\r\n              handleMenuClose={handleProfileMenuClose}\r\n            />\r\n\r\n            <DialogCustom\r\n              open={showProfilePhoto}\r\n              close={viewPhotoClose}\r\n              photo={photo}\r\n              user={user}\r\n            />\r\n          </div>\r\n\r\n          <div className=\"profileMenu__diaglog\">\r\n            <Dialog\r\n              open={showDialogUpload}\r\n              onClose={handleDialogUploadClose}\r\n              aria-labelledby=\"form-dialog-title\"\r\n            >\r\n              <DialogTitle id=\"form-dialog-title-drawerLeft\">\r\n                Upload Photo\r\n              </DialogTitle>\r\n              <DialogContent id=\"form-dialog-content\">\r\n                <div className=\"profileMenu__uploadPhoto_dialog\">\r\n                  <img src={uploadPhotoLink} alt=\"\" />\r\n                </div>\r\n              </DialogContent>\r\n              <DialogActions>\r\n                <div className=\"profileMenu_uploadPhoto_iconButton\">\r\n                  <IconButton onClick={handleUploadPhoto}>\r\n                    <CheckIcon />\r\n                  </IconButton>\r\n                </div>\r\n              </DialogActions>\r\n            </Dialog>\r\n          </div>\r\n\r\n          <div className=\"drawerLeft__content_name\">\r\n            <p>Your Name</p>\r\n            <form>\r\n              {showEditName ? (\r\n                <>\r\n                  <input\r\n                    value={name}\r\n                    onChange={(e) => setName(e.target.value)}\r\n                    type=\"text\"\r\n                    styles={{ borderBottom: \"1px solid green !important\" }}\r\n                  />\r\n                  <CheckIcon onClick={updateName} />\r\n                </>\r\n              ) : (\r\n                <>\r\n                  <span>{name}</span>\r\n                  <EditIcon onClick={editName} />\r\n                </>\r\n              )}\r\n            </form>\r\n          </div>\r\n\r\n          <div className=\"drawerLeft__note\">\r\n            <span>\r\n              This is not your username or pin. This name will be visible to\r\n              your Tattle contacts.\r\n            </span>\r\n          </div>\r\n\r\n          <div className=\"drawerLeft__content_name\">\r\n            <p>About</p>\r\n            <form>\r\n              {showEditAbout ? (\r\n                <>\r\n                  <input\r\n                    value={about}\r\n                    onChange={(e) => setAbout(e.target.value)}\r\n                    type=\"text\"\r\n                  />\r\n                  <CheckIcon onClick={updateAbout} />\r\n                </>\r\n              ) : (\r\n                <>\r\n                  <span>{about}</span>\r\n                  <EditIcon onClick={editAbout} />\r\n                </>\r\n              )}\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </Drawer>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default DrawerLeft;\r\n","import React, { useState } from 'react';\r\nimport SearchOutlinedIcon from '@material-ui/icons/SearchOutlined';\r\nimport ArrowForwardIcon from '@material-ui/icons/ArrowForward';\r\nimport './SearchBar.css';\r\n\r\nfunction SearchBar( { placeholder, setSearch, search } ) {\r\n    const [showArrowIcon, setShowArrowIcon] = useState(false);\r\n\r\n    const displaySearchIcon = () => {\r\n        setShowArrowIcon(false);\r\n    }\r\n    \r\n    const displayArrowIcon = () => {\r\n        setShowArrowIcon(true);\r\n    }\r\n\r\n    return (\r\n        <div className={`search ${showArrowIcon===true && \"search__bgColorChange\"}`}>\r\n            <div className=\"search__container\">\r\n                <span className={`${showArrowIcon===true?\"arroww\":''}`}>{showArrowIcon? <ArrowForwardIcon />:<SearchOutlinedIcon/>}</span>\r\n                <input \r\n                    value={search} \r\n                    onChange={e => setSearch(e.target.value)} \r\n                    type=\"text\" \r\n                    placeholder={placeholder} \r\n                    required\r\n                    onFocus={displayArrowIcon}\r\n                    onBlur={displaySearchIcon}\r\n                />\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default SearchBar","import React, { useEffect, useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport Avatar from \"@material-ui/core/Avatar\";\r\nimport PhotoCameraIcon from \"@material-ui/icons/PhotoCamera\";\r\nimport VideocamIcon from \"@material-ui/icons/Videocam\";\r\nimport db from \"../firebase\";\r\nimport \"./SidebarChat.css\";\r\nconst CryptoJS = require(\"crypto-js\");\r\n\r\nfunction SidebarChat({ id, name }) {\r\n  const [messages, setMessages] = useState([]);\r\n\r\n  useEffect(() => {\r\n    if (id) {\r\n      db.collection(\"rooms\")\r\n        .doc(id)\r\n        .collection(\"messages\")\r\n        .orderBy(\"timestamp\", \"desc\")\r\n        .onSnapshot((snapshot) =>\r\n          setMessages(snapshot.docs.map((doc) => doc.data()))\r\n        );\r\n    }\r\n  }, [id]);\r\n  const decrypt = (data) => {\r\n    const bytes = CryptoJS.AES.decrypt(data, \"my-secret-key@123\");\r\n    const decryptedData = bytes.toString(CryptoJS.enc.Utf8);\r\n    // return decryptedData\r\n    return data ? decryptedData : data;\r\n  };\r\n  return (\r\n    <Link to={`/rooms/${id}`} className=\"sidebarChat__link\">\r\n      <div className=\"sidebarChat\">\r\n        <Avatar>{name[0]}</Avatar>\r\n        <div className=\"sidebarChat__info\">\r\n          <h2>{name}</h2>\r\n          {messages[0]?.photo ? (\r\n            <div className=\"sideChat__photo\">\r\n              <PhotoCameraIcon /> <span>Photo</span>\r\n            </div>\r\n          ) : null}\r\n          {messages[0]?.video ? (\r\n            <div className=\"sideChat__photo\">\r\n              <VideocamIcon /> <span>Video</span>\r\n            </div>\r\n          ) : null}\r\n          <p>{messages[0]?.message ? decrypt(messages[0]?.message) : \"\"}</p>\r\n          <p>{messages[0]?.url}</p>\r\n        </div>\r\n      </div>\r\n    </Link>\r\n  );\r\n}\r\n\r\nexport default SidebarChat;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { useHistory, useParams } from \"react-router-dom\";\r\nimport { useStateValue } from \"../StateProvider\";\r\n//importing firebase\r\nimport db from \"../firebase\";\r\nimport { auth, storage, firebase } from \"../firebase\";\r\n//importing components\r\nimport UserAvatar from \"./UserAvatar\";\r\nimport NewChat from \"./NewChat\";\r\nimport Status from \"./Status\";\r\nimport DropdownMenu from \"../shared/DropdownMenu\";\r\nimport DrawerLeft from \"./DrawerLeft\";\r\nimport SearchBar from \"../shared/SearchBar\";\r\nimport SidebarChat from \"./SidebarChat\";\r\nimport { toastInfo } from \"../shared/toastInfo\";\r\nimport TooltipCustom from \"../shared/TooltipCustom\";\r\n//importing material-ui\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport MoreVertIcon from \"@material-ui/icons/MoreVert\";\r\n//importing styles\r\nimport \"./Sidebar.css\";\r\n\r\nfunction Sidebar({ rooms, setIsRoomExist, isRoomExist }) {\r\n  const history = useHistory();\r\n  const { roomId } = useParams();\r\n  const [{ user }] = useStateValue();\r\n  const [search, setSearch] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n  const [noRooms, setNoRooms] = useState(false);\r\n  const [drawerLeft, setDrawerLeft] = useState(false);\r\n  const [menuSidebar, setMenuSidebar] = useState(null);\r\n  const [isSearchFound, setIsSetSearchFound] = useState(false);\r\n\r\n  const findRoom = function (myRooms) {\r\n    return function (x) {\r\n      var searchRoom = x.data.name + \"\";\r\n      return (\r\n        searchRoom.toLowerCase().includes(myRooms.toLowerCase()) || !myRooms\r\n      );\r\n    };\r\n  };\r\n\r\n  useEffect(() => {\r\n    const roomResult = () => {\r\n      return (\r\n        <>\r\n          {rooms.filter(findRoom(search)).map((room) => (\r\n            <p key={room.id}>{room.name}</p>\r\n          ))}\r\n        </>\r\n      );\r\n    };\r\n\r\n    if (search) {\r\n      var result = roomResult();\r\n      if (result.props.children.length > 0) {\r\n        setIsSetSearchFound(true);\r\n      } else {\r\n        setIsSetSearchFound(false);\r\n      }\r\n    }\r\n\r\n    //checks if room exists, else will be redirect to landing screen\r\n    var roomList = rooms;\r\n    if (roomList) {\r\n      //checks if the current route(roomId) exists in roomList(array)\r\n      const index = roomList.findIndex(function (id, index) {\r\n        return id.id === roomId;\r\n      });\r\n\r\n      if (index >= 0) {\r\n        setIsRoomExist(index);\r\n        // console.log(\"ROOM EXISTS\");\r\n      } else if (index === -1) {\r\n        setIsRoomExist(index);\r\n        history.push(\"/\");\r\n        // console.log(\"ROOM DOES NOT EXIST\");\r\n      }\r\n    }\r\n  }, [search, rooms, roomId, history, setIsRoomExist]);\r\n\r\n  useEffect(() => {\r\n    if (rooms) {\r\n      if (rooms.length > 0) {\r\n        setNoRooms(false);\r\n        setLoading(true);\r\n      } else if (rooms.length === 0 && isRoomExist === -1) {\r\n        setNoRooms(true);\r\n        setLoading(true);\r\n      }\r\n    }\r\n  }, [isRoomExist, rooms]);\r\n\r\n  // console.log(\"ROOMS> >\", noRooms);\r\n  // console.log(\"ROOMS EXIST> >\", isRoomExist);\r\n\r\n  const handleDrawerLeftOpen = () => {\r\n    setMenuSidebar(null);\r\n    setDrawerLeft(true);\r\n  };\r\n\r\n  const handleMenuOpen = (event) => {\r\n    setMenuSidebar(event.currentTarget);\r\n  };\r\n\r\n  const handleMenuClose = () => {\r\n    setMenuSidebar(null);\r\n  };\r\n\r\n  const archive = () => {\r\n    const archive = \"archive\";\r\n    toastInfo(\"Archive is not yet available!\", archive, \"top-center\");\r\n  };\r\n\r\n  const starred = () => {\r\n    const starred = \"starred\";\r\n    toastInfo(\"Starred is not yet available!\", starred, \"top-center\");\r\n  };\r\n\r\n  const settings = () => {\r\n    const settings = \"settings\";\r\n    toastInfo(\"Settings is not yet available!\", settings, \"top-center\");\r\n  };\r\n\r\n  const logout = () => {\r\n    if (user.isAnonymous === true) {\r\n      auth.currentUser\r\n        .delete()\r\n        .then(function () {\r\n          history.push(\"/\");\r\n        })\r\n        .catch(function (error) {\r\n          // An error happened.\r\n          console.log(\"error deleting anonymous user\", error);\r\n        });\r\n    } else {\r\n      auth.signOut();\r\n    }\r\n  };\r\n\r\n  const menuLists = [\r\n    {\r\n      title: \"Profile\",\r\n      onClick: () => handleDrawerLeftOpen(),\r\n      id: Math.random() * 100000,\r\n    },\r\n    {\r\n      title: \"Archived\",\r\n      onClick: () => archive(),\r\n      id: Math.random() * 100000,\r\n    },\r\n    {\r\n      title: \"Starred\",\r\n      onClick: () => starred(),\r\n      id: Math.random() * 100000,\r\n    },\r\n    {\r\n      title: \"Settings\",\r\n      onClick: () => settings(),\r\n      id: Math.random() * 100000,\r\n    },\r\n    {\r\n      title: \"Logout\",\r\n      onClick: () => logout(),\r\n      id: Math.random() * 100000,\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <div className=\"sidebar\">\r\n      <div className=\"sidebar__header\">\r\n        <UserAvatar\r\n          id=\"UserProfile\"\r\n          photoURL={user.photoURL}\r\n          onClick={() => handleDrawerLeftOpen()}\r\n        />\r\n        <DrawerLeft\r\n          drawerLeft={drawerLeft}\r\n          setDrawerLeft={setDrawerLeft}\r\n          db={db}\r\n          auth={auth}\r\n          storage={storage}\r\n        />\r\n\r\n        <div className=\"sidebar__headerRight\">\r\n          <Status />\r\n          <NewChat db={db} user={user} firebase={firebase} />\r\n          <TooltipCustom\r\n            name=\"Menu\"\r\n            icon={<MoreVertIcon style={{ color: \"#de5751\" }} />}\r\n            onClick={handleMenuOpen}\r\n          />\r\n          <DropdownMenu\r\n            menuLists={menuLists}\r\n            menu={menuSidebar}\r\n            handleMenuOpen={handleMenuOpen}\r\n            handleMenuClose={handleMenuClose}\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      <SearchBar\r\n        search={search}\r\n        setSearch={setSearch}\r\n        placeholder=\"Search or start new chat\"\r\n      />\r\n\r\n      <div className=\"sidebar__chats\">\r\n        {loading ? (\r\n          <>\r\n            {search ? (\r\n              <>\r\n                {isSearchFound ? (\r\n                  <div>\r\n                    {rooms.filter(findRoom(search)).map((room) => (\r\n                      <SidebarChat\r\n                        key={room.id}\r\n                        id={room.id}\r\n                        name={room.data.name}\r\n                      />\r\n                    ))}\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"sidebar__chatsContainer_empty\">\r\n                    <span>No chat room found</span>\r\n                  </div>\r\n                )}\r\n              </>\r\n            ) : (\r\n              <>\r\n                {rooms.map((room) => (\r\n                  <SidebarChat\r\n                    key={room.id}\r\n                    id={room.id}\r\n                    name={room.data.name}\r\n                  />\r\n                ))}\r\n              </>\r\n            )}\r\n          </>\r\n        ) : (\r\n          <div className=\"sidebar__chatsContainer_loading\">\r\n            <div>\r\n              <CircularProgress />\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {noRooms && loading ? (\r\n          <div className=\"sidebar__chatsContainer_empty\">\r\n            <span>No chats</span>\r\n          </div>\r\n        ) : null}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Sidebar;\r\n","import React from \"react\";\r\n//importing material-ui\r\nimport Drawer from \"@material-ui/core/Drawer\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n//importing styles\r\nimport \"./DrawerRight.css\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: \"flex\",\r\n  },\r\n  drawerPaper: {\r\n    [theme.breakpoints.only(\"xs\")]: {\r\n      width: \"100vw\",\r\n    },\r\n    [theme.breakpoints.up(\"sm\")]: {\r\n      position: \"absolute\",\r\n    },\r\n  },\r\n}));\r\n\r\nfunction DrawerRight({ content, drawerRight }) {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <div>\r\n      <Drawer\r\n        anchor=\"right\"\r\n        variant=\"persistent\"\r\n        open={drawerRight}\r\n        classes={{ paper: classes.drawerPaper }}\r\n      >\r\n        {content}\r\n      </Drawer>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default DrawerRight;\r\n","import React, { useState, useEffect } from \"react\";\r\n//importing components\r\nimport SearchBar from \"../shared/SearchBar\";\r\n//importing material-ui\r\nimport DrawerRight from \"./DrawerRight\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\n//importing material-ui-icons\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport DoneIcon from \"@material-ui/icons/Done\";\r\n//importing styles\r\nimport \"./DrawerRightSearch.css\";\r\nconst CryptoJS = require(\"crypto-js\");\r\n\r\nfunction DrawerRightSearch({\r\n  drawerRightSearch,\r\n  setDrawerRightSearch,\r\n  messages,\r\n  user,\r\n}) {\r\n  const [search, setSearch] = useState(\"\");\r\n  const [isFoundMessage, setIsFoundMessage] = useState(false);\r\n\r\n  const findMessage = function (myMessages) {\r\n    return function (x) {\r\n      var searchMessage = x.message + \"\" + x.caption;\r\n      return (\r\n        searchMessage.toLowerCase().includes(myMessages.toLowerCase()) ||\r\n        !myMessages\r\n      );\r\n    };\r\n  };\r\n  const decrypt = (data) => {\r\n    const bytes = CryptoJS.AES.decrypt(data, \"my-secret-key@123\");\r\n    const decryptedData = bytes.toString(CryptoJS.enc.Utf8);\r\n    // return decryptedData\r\n    return data ? decryptedData : data;\r\n  };\r\n  const encrypt = (data) => {\r\n    const text = CryptoJS.AES.encrypt(data, \"my-secret-key@123\").toString();\r\n  };\r\n  useEffect(() => {\r\n    const messageResult = () => {\r\n      return (\r\n        <>\r\n          {messages.filter(findMessage(search)).map((message) => (\r\n            <p key={message.id}>\r\n              {message.message ? decrypt(message.message) : \"\"}\r\n              {message.caption}\r\n            </p>\r\n          ))}\r\n        </>\r\n      );\r\n    };\r\n\r\n    if (search) {\r\n      var result = messageResult();\r\n      // console.log(\"result\", result.props.children)\r\n      if (result.props.children.length > 0) {\r\n        setIsFoundMessage(true);\r\n        console.log(\"search message sucess\");\r\n      } else {\r\n        setIsFoundMessage(false);\r\n        console.log(\"search message fail\");\r\n      }\r\n    }\r\n  }, [search, messages]);\r\n\r\n  const handleDrawerClose = () => {\r\n    setDrawerRightSearch(false);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <DrawerRight\r\n        drawerRight={drawerRightSearch}\r\n        content={\r\n          <>\r\n            <div className=\"drawerRight__header\">\r\n              <IconButton onClick={handleDrawerClose}>\r\n                <CloseIcon />\r\n              </IconButton>\r\n              <p>Search Messages</p>\r\n            </div>\r\n\r\n            <SearchBar\r\n              search={search}\r\n              setSearch={setSearch}\r\n              placeholder=\"Search...\"\r\n            />\r\n\r\n            <div\r\n              className={`drawerRight__content ${\r\n                isFoundMessage === true &&\r\n                search.length > 0 &&\r\n                \"drawerRight__content_searched\"\r\n              }`}\r\n            >\r\n              {search.length > 0 ? (\r\n                <>\r\n                  {isFoundMessage ? (\r\n                    <>\r\n                      {messages.filter(findMessage(search)).map((message) => (\r\n                        <div\r\n                          key={message.id}\r\n                          className=\"drawerRight__content_searched_message\"\r\n                        >\r\n                          <p>\r\n                            {new Date(\r\n                              message.timestamp?.toDate()\r\n                            ).toLocaleTimeString(\"en-US\", {\r\n                              hour: \"numeric\",\r\n                              hour12: true,\r\n                              minute: \"numeric\",\r\n                            })}\r\n                            <br />\r\n                          </p>\r\n                          <p id=\"last_p\">\r\n                            {message.uid === user.uid ? <DoneIcon /> : null}\r\n                            {message.message ? decrypt(message.message) : \"\"}\r\n                            {message.caption}\r\n                          </p>\r\n                          <Divider />\r\n                        </div>\r\n                      ))}\r\n                    </>\r\n                  ) : (\r\n                    <p>No message found</p>\r\n                  )}\r\n                </>\r\n              ) : (\r\n                <p>Search for messages in this room.</p>\r\n              )}\r\n            </div>\r\n          </>\r\n        }\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default DrawerRightSearch;\r\n","import React, { useState, useEffect } from \"react\";\r\n//importing components\r\n// import SearchBar from \"../shared/SearchBar\";\r\n//importing material-ui\r\nimport DrawerRight from \"./DrawerRight\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Zoom from \"@material-ui/core/Zoom\";\r\n// import Drawer from \"@material-ui/core/Drawer\";\r\nimport Avatar from \"@material-ui/core/Avatar\";\r\n// import Dialog from \"@material-ui/core/Dialog\";\r\n// import DialogTitle from \"@material-ui/core/DialogTitle\";\r\n// import DialogContent from \"@material-ui/core/DialogContent\";\r\n// import DialogActions from \"@material-ui/core/DialogActions\";\r\n// import { makeStyles } from \"@material-ui/core/styles\";\r\n// import Divider from \"@material-ui/core/Divider\";\r\n//importing material-ui-icons\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\n// import DoneIcon from \"@material-ui/icons/Done\";\r\nimport PhotoCameraIcon from \"@material-ui/icons/PhotoCamera\";\r\nimport GroupIcon from \"@material-ui/icons/Group\";\r\n//importing styles\r\nimport \"./DrawerRightInfo.css\";\r\n\r\nfunction DrawerRightInfo({\r\n  drawerRightInfo,\r\n  setDrawerRightInfo,\r\n  messages,\r\n  user,\r\n}) {\r\n  const [search, setSearch] = useState(\"\");\r\n  const [isFoundMessage, setIsFoundMessage] = useState(false);\r\n\r\n  const findMessage = function (myMessages) {\r\n    return function (x) {\r\n      var searchMessage = x.message + \"\" + x.caption;\r\n      return (\r\n        searchMessage.toLowerCase().includes(myMessages.toLowerCase()) ||\r\n        !myMessages\r\n      );\r\n    };\r\n  };\r\n\r\n  useEffect(() => {\r\n    const messageResult = () => {\r\n      return (\r\n        <>\r\n          {messages.filter(findMessage(search)).map((message) => (\r\n            <p key={message.id}>\r\n              {message.message}\r\n              {message.caption}\r\n            </p>\r\n          ))}\r\n        </>\r\n      );\r\n    };\r\n\r\n    if (search) {\r\n      var result = messageResult();\r\n      // console.log(\"result\", result.props.children)\r\n      if (result.props.children.length > 0) {\r\n        setIsFoundMessage(true);\r\n        console.log(\"search message sucess\");\r\n      } else {\r\n        setIsFoundMessage(false);\r\n        console.log(\"search message fail\");\r\n      }\r\n    }\r\n  }, [search, messages]);\r\n\r\n  const handleDrawerClose = () => {\r\n    setDrawerRightInfo(false);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <DrawerRight\r\n        drawerRight={drawerRightInfo}\r\n        content={\r\n          <>\r\n            <div className=\"drawer-right-info__header\">\r\n              <IconButton onClick={handleDrawerClose}>\r\n                <CloseIcon />\r\n              </IconButton>\r\n              <p>Group Info</p>\r\n            </div>\r\n            <div className=\"drawer-right-info-content\">\r\n              <div className=\"drawer-right-info-content__photo\">\r\n                <div className=\"profilePhoto\">\r\n                  <Zoom\r\n                    in={drawerRightInfo}\r\n                    style={{\r\n                      transitionDelay: drawerRightInfo ? \"300ms\" : \"0ms\",\r\n                    }}\r\n                  >\r\n                    {/* {photo ? (\r\n                      <Avatar\r\n                        src={photo}\r\n                        className=\"profilePhoto__layer_bottom\"\r\n                      />\r\n                    ) : (\r\n                      <Avatar />\r\n                    )} */}\r\n                    {/* <Avatar /> */}\r\n                    <Avatar>\r\n                      <GroupIcon />\r\n                    </Avatar>\r\n                  </Zoom>\r\n                  <div\r\n                    className=\"profilePhoto__layer_top\"\r\n                    // onClick={handleProfileMenu}\r\n                  >\r\n                    <div className=\"profilePhoto__text\">\r\n                      <PhotoCameraIcon />\r\n                      <p>CHANGE</p>\r\n                      <p>PROFILE PHOTO</p>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </>\r\n        }\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default DrawerRightInfo;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { useStateValue } from \"../StateProvider\";\r\n//importing components\r\nimport DropdownMenu from \"../shared/DropdownMenu\";\r\nimport DrawerRightSearch from \"./DrawerRightSearch\";\r\nimport DrawerRightInfo from \"./DrawerRightInfo\";\r\nimport TooltipCustom from \"../shared/TooltipCustom\";\r\nimport { toastInfo } from \"../shared/toastInfo\";\r\n//importing material-ui\r\nimport Hidden from \"@material-ui/core/Hidden\";\r\nimport Avatar from \"@material-ui/core/Avatar\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\n//importing material-ui-icons\r\nimport SearchOutlinedIcon from \"@material-ui/icons/SearchOutlined\";\r\nimport ArrowBackIcon from \"@material-ui/icons/ArrowBack\";\r\nimport MoreVertIcon from \"@material-ui/icons/MoreVert\";\r\n//importing styles\r\nimport \"./ChatHeader.css\";\r\n\r\nfunction ChatHeader({\r\n  roomCreatedBy,\r\n  roomOwner,\r\n  roomName,\r\n  roomId,\r\n  _roomId,\r\n  messages,\r\n  db,\r\n  history,\r\n  isRoomExist,\r\n}) {\r\n  const [{ user }] = useStateValue();\r\n  const [drawerRightSearch, setDrawerRightSearch] = useState(false);\r\n  const [drawerRightInfo, setDrawerRightInfo] = useState(false);\r\n  const [menuChat, setMenuChat] = useState(null);\r\n  const [role, setRole] = useState(\"\");\r\n  const [showDate, setShowDate] = useState(false);\r\n  const [isLastMessage, setIsLastMessage] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const errorAbout = \"errorAbout\";\r\n    if (user.uid) {\r\n      db.collection(\"users\")\r\n        .doc(user.uid)\r\n        .get()\r\n        .then(function (doc) {\r\n          if (doc.exists) {\r\n            setRole(doc.data().role);\r\n          }\r\n        })\r\n        .catch(function (error) {\r\n          toastInfo(`${error}`, errorAbout, \"top-center\");\r\n        });\r\n    }\r\n\r\n    if (messages[messages.length - 1]?.timestamp) {\r\n      setShowDate(true);\r\n    } else {\r\n      setShowDate(false);\r\n    }\r\n\r\n    if (messages[messages.length - 1]) {\r\n      setIsLastMessage(true);\r\n    } else {\r\n      setIsLastMessage(false);\r\n    }\r\n\r\n    //listens when room is changed, then it closes DrawerRight\r\n    if (isRoomExist >= 0) {\r\n      setDrawerRightInfo(false);\r\n      setDrawerRightSearch(false);\r\n    }\r\n  }, [\r\n    user.uid,\r\n    user.displayName,\r\n    user.isAnonymous,\r\n    db,\r\n    messages,\r\n    roomId,\r\n    isRoomExist,\r\n  ]);\r\n\r\n  // console.log(\"ROOOM ID\", roomId);\r\n  // console.log(\"__ROOOM ID\", _roomId);\r\n\r\n  const getDateFromMessage = () => {\r\n    return new Date(\r\n      messages[messages.length - 1]?.timestamp?.toDate()\r\n    ).toLocaleTimeString([], {\r\n      weekday: \"long\",\r\n      year: \"numeric\",\r\n      month: \"long\",\r\n      day: \"numeric\",\r\n      hour: \"numeric\",\r\n      hour12: true,\r\n      minute: \"numeric\",\r\n    });\r\n  };\r\n\r\n  const getDateLocal = () => {\r\n    return new Date().toLocaleTimeString([], {\r\n      weekday: \"long\",\r\n      year: \"numeric\",\r\n      month: \"long\",\r\n      day: \"numeric\",\r\n      hour: \"numeric\",\r\n      hour12: true,\r\n      minute: \"numeric\",\r\n    });\r\n  };\r\n\r\n  const searchMessage = () => {\r\n    setDrawerRightSearch(true);\r\n  };\r\n\r\n  const contactInfo = () => {\r\n    setDrawerRightInfo(true);\r\n    setMenuChat(null);\r\n  };\r\n\r\n  const selectMessages = () => {\r\n    const selectMessages = \"selectMessages\";\r\n    toastInfo(\r\n      \"Select Messages is not yet  available!\",\r\n      selectMessages,\r\n      \"top-center\"\r\n    );\r\n  };\r\n\r\n  const muteNotifications = () => {\r\n    const muteNotifications = \"muteNotifications\";\r\n    toastInfo(\r\n      \"Mute Notifications is not yet available!\",\r\n      muteNotifications,\r\n      \"top-center\"\r\n    );\r\n  };\r\n\r\n  const clearMessages = () => {\r\n    const clearMessages = \"clearMessages\";\r\n    toastInfo(\r\n      \"Clear Messages is not yet available!\",\r\n      clearMessages,\r\n      \"top-center\"\r\n    );\r\n  };\r\n\r\n  const deleteRoom = () => {\r\n    const roomDeleted = \"roomDeleted\";\r\n\r\n    if (roomOwner === user.uid || role === \"admin\") {\r\n      db.collection(\"rooms\")\r\n        .doc(roomId)\r\n        .delete()\r\n        .then(function () {\r\n          toastInfo(\"Room successfully deleted!\", roomDeleted, \"top-center\");\r\n        })\r\n        .catch(function (error) {\r\n          toastInfo(`Error removing room! ${error}`, roomDeleted, \"top-center\");\r\n        });\r\n      history.push(\"/\");\r\n    } else {\r\n      toastInfo(\r\n        `You are not allowed to delete room ${roomName}. Only the admin or room owner ${roomCreatedBy}`,\r\n        roomDeleted,\r\n        \"top-center\"\r\n      );\r\n    }\r\n  };\r\n\r\n  const handleMenuClose = () => {\r\n    setMenuChat(null);\r\n  };\r\n\r\n  const handleMenuOpen = (event) => {\r\n    setMenuChat(event.currentTarget);\r\n  };\r\n\r\n  const menuChatLists = [\r\n    {\r\n      title: \"Contact info\",\r\n      onClick: () => contactInfo(),\r\n      id: Math.random() * 100000,\r\n    },\r\n    {\r\n      title: \"Select messages\",\r\n      onClick: () => selectMessages(),\r\n      id: Math.random() * 100000,\r\n    },\r\n    {\r\n      title: \"Mute notifications\",\r\n      onClick: () => muteNotifications(),\r\n      id: Math.random() * 100000,\r\n    },\r\n    {\r\n      title: \"Clear messages\",\r\n      onClick: () => clearMessages(),\r\n      id: Math.random() * 100000,\r\n    },\r\n    {\r\n      title: \"Delete Room\",\r\n      onClick: () => deleteRoom(),\r\n      id: Math.random() * 100000,\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <div className=\"chat__header\">\r\n      <DrawerRightSearch\r\n        drawerRightSearch={drawerRightSearch}\r\n        setDrawerRightSearch={setDrawerRightSearch}\r\n        roomId={roomId}\r\n        messages={messages}\r\n        db={db}\r\n        user={user}\r\n      />\r\n\r\n      <DrawerRightInfo\r\n        drawerRightInfo={drawerRightInfo}\r\n        setDrawerRightInfo={setDrawerRightInfo}\r\n        roomId={roomId}\r\n        messages={messages}\r\n        db={db}\r\n        user={user}\r\n      />\r\n\r\n      <Hidden smUp>\r\n        <Link to=\"/\">\r\n          <div className=\"chat__back_button\">\r\n            <IconButton>\r\n              <ArrowBackIcon style={{ color: \"#de5751\" }} />\r\n            </IconButton>\r\n          </div>\r\n        </Link>\r\n      </Hidden>\r\n\r\n      <Avatar>{roomName[0]}</Avatar>\r\n      <div className=\"chat__headerInfo\">\r\n        <h3>{roomName}</h3>\r\n\r\n        {isLastMessage ? (\r\n          <>\r\n            {showDate ? (\r\n              <p>Last seen {getDateFromMessage()}</p>\r\n            ) : (\r\n              <p>Last seen {getDateLocal()}</p>\r\n            )}\r\n          </>\r\n        ) : null}\r\n      </div>\r\n\r\n      <div className=\"chat__headerRight\">\r\n        <TooltipCustom\r\n          name=\"Search\"\r\n          icon={<SearchOutlinedIcon style={{ color: \"#de5751\" }} />}\r\n          onClick={searchMessage}\r\n        />\r\n        <TooltipCustom\r\n          name=\"Menu\"\r\n          icon={<MoreVertIcon style={{ color: \"#de5751\" }} />}\r\n          onClick={handleMenuOpen}\r\n        />\r\n        <DropdownMenu\r\n          menuLists={menuChatLists}\r\n          menu={menuChat}\r\n          handleMenuOpen={handleMenuOpen}\r\n          handleMenuClose={handleMenuClose}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ChatHeader;\r\n","import React, { useEffect, useRef, useState } from \"react\";\r\nimport ReactPlayer from \"react-player\";\r\n// importing component\r\n//importing material-ui-icon\r\nimport LockIcon from \"@material-ui/icons/Lock\";\r\nimport AlarmIcon from \"@material-ui/icons/Alarm\";\r\nimport DoneIcon from \"@material-ui/icons/Done\";\r\n//importing styles\r\nimport \"./ChatBody.css\";\r\nconst CryptoJS = require(\"crypto-js\");\r\n\r\nfunction ChatBody({\r\n  roomOwner,\r\n  roomCreatedBy,\r\n  messages,\r\n  user,\r\n  roomId,\r\n  isRoomExist,\r\n}) {\r\n  const decrypt = (data) => {\r\n    const bytes = CryptoJS.AES.decrypt(data, \"my-secret-key@123\");\r\n    const decryptedData = bytes.toString(CryptoJS.enc.Utf8);\r\n    // return decryptedData\r\n    return data ? decryptedData : data;\r\n  };\r\n  const messagesEndRef = useRef(null);\r\n  const [playing, setPlaying] = useState(false);\r\n\r\n  useEffect(() => {\r\n    //listens when room is changed, then it sets playing to false\r\n    if (isRoomExist >= 0) {\r\n      setPlaying(false);\r\n    }\r\n  }, [isRoomExist]);\r\n\r\n  const handlePlay = () => {\r\n    setPlaying(true);\r\n  };\r\n\r\n  const handlePause = () => {\r\n    setPlaying(false);\r\n  };\r\n\r\n  const scrollToBottom = () => {\r\n    if (roomId) {\r\n      messagesEndRef.current.scrollIntoView({ behavior: \"auto\" });\r\n    }\r\n  };\r\n  useEffect(scrollToBottom, [messages, roomId]);\r\n\r\n  return (\r\n    <div>\r\n      <p className=\"chat__message_reminder\">\r\n        <LockIcon /> Welcome to Tattle. Messages are encrpyted.\r\n      </p>\r\n      <p className=\"chat__message_reminder chat__createdBy\">\r\n        {roomOwner === user.uid\r\n          ? \"You created this group\"\r\n          : `${roomCreatedBy} created this group`}\r\n      </p>\r\n\r\n      {messages.map((message) => (\r\n        <div\r\n          key={message.id}\r\n          className={`chat__message \r\n                    ${message.uid === user.uid && \"chat__sender\"} \r\n                    ${message.photo && \"chat__message_media_image\"}\r\n                    ${message.video && \"chat__message_media_video\"}\r\n                    ${\r\n                      message.video &&\r\n                      !message.caption &&\r\n                      \"chat__message_media_video_noCaption\"\r\n                    } `}\r\n        >\r\n          <span\r\n            className={`chat__name ${\r\n              message.uid === user.uid && \"chat__name_sender\"\r\n            }`}\r\n          >\r\n            {message.name}\r\n          </span>\r\n\r\n          <div className=\"chat__body_image_container\">\r\n            {message.photo ? (\r\n              <>\r\n                <img alt=\"\" className=\"chat__body_image\" src={message.photo} />\r\n              </>\r\n            ) : null}\r\n          </div>\r\n\r\n          <div className=\"chat__body_video_container\">\r\n            {message.video ? (\r\n              <>\r\n                <div className=\"player-wrapper\">\r\n                  <ReactPlayer\r\n                    className=\"react-player\"\r\n                    width=\"100%\"\r\n                    height=\"100%\"\r\n                    url={message.video}\r\n                    controls={true}\r\n                    onPlay={handlePlay}\r\n                    onPause={handlePause}\r\n                    onEnded={handlePause}\r\n                  />\r\n                </div>\r\n              </>\r\n            ) : null}\r\n          </div>\r\n\r\n          <div className=\"chat__message_box\">\r\n            <div\r\n              className={`chat__message_box_text ${\r\n                message.uid === user.uid && \"chat__message_box_text_sender\"\r\n              }\r\n              ${\r\n                message.photo &&\r\n                !message.caption &&\r\n                \"chat__message_box_text_no_caption\"\r\n              } `}\r\n            >\r\n              {message.message ? decrypt(message.message) : null}\r\n              {message.caption ? message.caption : null}\r\n              {message.url ? (\r\n                <a\r\n                  target=\"_blank\"\r\n                  href={`${message.url}`}\r\n                  rel=\"noopener noreferrer\"\r\n                >\r\n                  {message.url}\r\n                </a>\r\n              ) : null}\r\n\r\n              <div\r\n                className={`chat__timestamp_container ${\r\n                  message.uid === user.uid && \"chat__timestamp_container_sender\"\r\n                }`}\r\n              >\r\n                {message.timestamp ? (\r\n                  <div\r\n                    className={`chat__timestamp \r\n                                    ${\r\n                                      message.photo &&\r\n                                      !message.caption &&\r\n                                      \"chat__timestamp_media_photo\"\r\n                                    }  \r\n                                    ${\r\n                                      message.video &&\r\n                                      !message.caption &&\r\n                                      \"chat__timestamp_media_video\"\r\n                                    }\r\n                                    ${\r\n                                      message.video &&\r\n                                      !message.caption &&\r\n                                      playing === true &&\r\n                                      \"chat__timestamp_media_displayNone\"\r\n                                    }`}\r\n                  >\r\n                    <span>\r\n                      {new Date(message.timestamp.toDate()).toLocaleTimeString(\r\n                        \"en-US\",\r\n                        {\r\n                          hour: \"numeric\",\r\n                          hour12: true,\r\n                          minute: \"numeric\",\r\n                        }\r\n                      )}\r\n                      {message.uid === user.uid ? <DoneIcon /> : null}\r\n                    </span>\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"chat__timestamp\">\r\n                    <span>\r\n                      {new Date().toLocaleTimeString(\"en-US\", {\r\n                        hour: \"numeric\",\r\n                        hour12: true,\r\n                        minute: \"numeric\",\r\n                      })}\r\n                      {message.uid === user.uid ? <AlarmIcon /> : null}\r\n                    </span>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      ))}\r\n      {/* it will automatically scroll drown everytime the user enters new chat message */}\r\n      <div ref={messagesEndRef} />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ChatBody;\r\n","import React, { useState } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { useStateValue } from \"../StateProvider\";\r\nimport ReactPlayer from \"react-player\";\r\n//importing material-ui\r\nimport Fab from \"@material-ui/core/Fab\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Drawer from \"@material-ui/core/Drawer\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n//importing material-ui-icons\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport SendIcon from \"@material-ui/icons/Send\";\r\n//importing styles\r\nimport \"./DrawerBottom.css\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: \"flex\",\r\n  },\r\n  drawerPaper: {\r\n    position: \"absolute\",\r\n    width: \"100%\",\r\n  },\r\n  paperAnchorBottom: {\r\n    left: \"auto\",\r\n    right: 0,\r\n    bottom: 0,\r\n    maxHeight: \"100%\",\r\n    [theme.breakpoints.up(\"xs\")]: {\r\n      top: 52,\r\n    },\r\n    [theme.breakpoints.up(\"sm\")]: {\r\n      top: 65,\r\n    },\r\n    [theme.breakpoints.up(\"md\")]: {\r\n      top: 65,\r\n    },\r\n    [theme.breakpoints.up(\"lg\")]: {\r\n      top: 65,\r\n    },\r\n  },\r\n}));\r\n\r\nfunction DrawerBottom({\r\n  drawerBottom,\r\n  setDrawerBottom,\r\n  fileImageUrl,\r\n  fileVideoUrl,\r\n  setFileVideoUrl,\r\n  setFileImageUrl,\r\n  firebase,\r\n  db,\r\n  storage,\r\n}) {\r\n  const classes = useStyles();\r\n  const [{ user }] = useStateValue();\r\n  const [caption, setCaption] = useState(\"\");\r\n  const { roomId } = useParams();\r\n\r\n  const handleUpload = (e) => {\r\n    e.preventDefault();\r\n    if (fileImageUrl) {\r\n      db.collection(\"rooms\")\r\n        .doc(roomId)\r\n        .collection(\"messages\")\r\n        .add({\r\n          photo: fileImageUrl,\r\n          name: user.displayName,\r\n          uid: user.uid,\r\n          caption: caption,\r\n          timestamp: firebase.firestore.FieldValue.serverTimestamp(),\r\n        })\r\n        .then(function (docRef) {\r\n          db.collection(\"rooms\")\r\n            .doc(roomId)\r\n            .collection(\"messages\")\r\n            .doc(docRef.id)\r\n            .set(\r\n              {\r\n                id: docRef.id,\r\n              },\r\n              { merge: true }\r\n            );\r\n        })\r\n        .catch(function (error) {\r\n          console.error(\"Error adding document: \", error);\r\n        });\r\n      setFileImageUrl(null);\r\n    }\r\n    if (fileVideoUrl) {\r\n      db.collection(\"rooms\")\r\n        .doc(roomId)\r\n        .collection(\"messages\")\r\n        .add({\r\n          video: fileVideoUrl,\r\n          name: user.displayName,\r\n          uid: user.uid,\r\n          caption: caption,\r\n          timestamp: firebase.firestore.FieldValue.serverTimestamp(),\r\n        })\r\n        .then(function (docRef) {\r\n          db.collection(\"rooms\")\r\n            .doc(roomId)\r\n            .collection(\"messages\")\r\n            .doc(docRef.id)\r\n            .set(\r\n              {\r\n                id: docRef.id,\r\n              },\r\n              { merge: true }\r\n            );\r\n        })\r\n        .catch(function (error) {\r\n          console.error(\"Error adding document: \", error);\r\n        });\r\n      setFileVideoUrl(null);\r\n    }\r\n    setCaption(\"\");\r\n    setDrawerBottom(false);\r\n  };\r\n\r\n  const handleDrawerClose = () => {\r\n    setDrawerBottom(false);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Drawer\r\n        variant=\"persistent\"\r\n        anchor=\"bottom\"\r\n        open={drawerBottom}\r\n        classes={{\r\n          paper: classes.drawerPaper,\r\n          paperAnchorBottom: classes.paperAnchorBottom,\r\n        }}\r\n      >\r\n        <div className=\"drawerBottom__header\">\r\n          <div className=\"drawerBottom__header_container\">\r\n            <IconButton onClick={handleDrawerClose}>\r\n              <CloseIcon />\r\n            </IconButton>\r\n            <p>Preview</p>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"drawerBottom__content\">\r\n          <div className=\"drawerBottom__content_photo\">\r\n            {fileImageUrl ? (\r\n              <img src={fileImageUrl} alt=\"\" />\r\n            ) : (\r\n              <div className=\"drawerBottom__content_video\">\r\n                <div className=\"player-wrapper\">\r\n                  <ReactPlayer\r\n                    className=\"react-player\"\r\n                    width=\"100%\"\r\n                    height=\"50%\"\r\n                    url={fileVideoUrl}\r\n                    controls={true}\r\n                  />\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n          <div className=\"drawerBottom__content_caption\">\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Add a caption...\"\r\n              value={caption}\r\n              onChange={(e) => setCaption(e.target.value)}\r\n            />\r\n            <Fab\r\n              color=\"primary\"\r\n              aria-label=\"send\"\r\n              size=\"large\"\r\n              onClick={handleUpload}\r\n            >\r\n              <div className=\"chat__icon\">\r\n                <SendIcon />\r\n              </div>\r\n            </Fab>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"drawerBottom__footer\">\r\n          <div>{fileImageUrl ? <img src={fileImageUrl} alt=\"\" /> : null}</div>\r\n        </div>\r\n      </Drawer>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default DrawerBottom;\r\n","import styled from \"styled-components\";\r\nexport const chatfooter_height = styled.div`\r\n  height: ${(props) => (props.drawerBottom ? \"100%\" : \"62px\")};\r\n`;\r\n","import React, { useState } from \"react\";\r\nimport { useStateValue } from \"../StateProvider\";\r\nimport { toastInfo } from \"../shared/toastInfo\";\r\n//importing components\r\nimport DrawerBottom from \"./DrawerBottom\";\r\nimport TooltipCustom from \"../shared/TooltipCustom\";\r\nimport { Picker } from \"emoji-mart\";\r\n//importing material-ui\r\nimport Hidden from \"@material-ui/core/Hidden\";\r\nimport Tooltip from \"@material-ui/core/Tooltip\";\r\nimport Fab from \"@material-ui/core/Fab\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport ClickAwayListener from \"@material-ui/core/ClickAwayListener\";\r\n//importing material-ui-icons\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport InsertEmoticonIcon from \"@material-ui/icons/InsertEmoticon\";\r\nimport SendIcon from \"@material-ui/icons/Send\";\r\nimport AttachFileIcon from \"@material-ui/icons/AttachFile\";\r\nimport InsertDriveFileIcon from \"@material-ui/icons/InsertDriveFile\";\r\nimport PhotoIcon from \"@material-ui/icons/Photo\";\r\nimport CameraAltIcon from \"@material-ui/icons/CameraAlt\";\r\nimport VideoCallIcon from \"@material-ui/icons/VideoCall\";\r\nimport PersonIcon from \"@material-ui/icons/Person\";\r\n//importing styles\r\nimport \"emoji-mart/css/emoji-mart.css\";\r\nimport \"./ChatFooter.css\";\r\nimport * as s from \"./preview.style\";\r\nimport CryptoJS from \"crypto-js\";\r\n\r\nconst attachFileLists = [\r\n  {\r\n    title: \"Room\",\r\n    icon: <VideoCallIcon />,\r\n    id: Math.random() * 100000,\r\n  },\r\n  {\r\n    title: \"Contact\",\r\n    icon: <PersonIcon />,\r\n    id: Math.random() * 100000,\r\n  },\r\n  {\r\n    title: \"Document\",\r\n    icon: <InsertDriveFileIcon />,\r\n    id: Math.random() * 100000,\r\n  },\r\n  {\r\n    title: \"Camera\",\r\n    icon: <CameraAltIcon />,\r\n    id: Math.random() * 100000,\r\n  },\r\n  {\r\n    title: \"Photos & Videos\",\r\n    icon: <PhotoIcon />,\r\n    id: Math.random() * 100000,\r\n  },\r\n];\r\n\r\nfunction ChatFooter({ roomName, roomId, db, firebase, storage }) {\r\n  const [{ user }] = useStateValue();\r\n  const [input, setInput] = useState(\"\");\r\n  const [emoji, setEmoji] = useState(false);\r\n  const [fileImageUrl, setFileImageUrl] = useState(null);\r\n  const [fileVideoUrl, setFileVideoUrl] = useState(null);\r\n  const [drawerBottom, setDrawerBottom] = useState(false);\r\n  const [showAttachFile, setShowAttachFile] = useState(false);\r\n\r\n  const attachFile = () => {\r\n    const attachToastId = \"attach\";\r\n    toastInfo(\r\n      \"All icons have the same functions, you can only upload images, gifs and videos!\",\r\n      attachToastId,\r\n      \"top-center\"\r\n    );\r\n    if (showAttachFile === false) {\r\n      setShowAttachFile(true);\r\n    } else {\r\n      setShowAttachFile(false);\r\n    }\r\n  };\r\n\r\n  const addEmoji = (e) => {\r\n    let emoji = e.native;\r\n    setInput(input + emoji);\r\n  };\r\n\r\n  const handleEmoticons = () => {\r\n    setEmoji(true);\r\n  };\r\n\r\n  const handleEmoticonsClose = () => {\r\n    setEmoji(false);\r\n  };\r\n\r\n  // const voiceMessage = () => {\r\n  //   const voiceMessageToastId = \"voiceMessage\";\r\n  //   toastInfo(\r\n  //     \"Voice Message is not yet available!\",\r\n  //     voiceMessageToastId,\r\n  //     \"top-center\"\r\n  //   );\r\n  // };\r\n\r\n  const onFileChange = async (e) => {\r\n    const fileSizeToastId = \"fileSizeToastId\";\r\n    const file = e.target.files[0];\r\n    if (file.size > 12 * 1024 * 1024) {\r\n      toastInfo(\r\n        \"File should not exceed more than 12MB\",\r\n        fileSizeToastId,\r\n        \"top-center\"\r\n      );\r\n    } else {\r\n      const storageRef = storage.ref();\r\n      if (file.type.match(\"image.*\")) {\r\n        const imagesRef = storageRef.child(`rooms/${roomName}/images/`);\r\n        const fileRef = imagesRef.child(new Date().getTime() + \" \" + file.name);\r\n        await fileRef.put(file);\r\n        setFileImageUrl(await fileRef.getDownloadURL());\r\n        console.log(\"uploading image\", fileImageUrl);\r\n      } else if (file.type.match(\"video.*\")) {\r\n        const videosRef = storageRef.child(`rooms/${roomName}/videos`);\r\n        const fileRef = videosRef.child(new Date().getTime() + \" \" + file.name);\r\n        await fileRef.put(file);\r\n        setFileVideoUrl(await fileRef.getDownloadURL());\r\n        console.log(\"uploading video\", fileVideoUrl);\r\n      }\r\n      setDrawerBottom(true);\r\n    }\r\n  };\r\n\r\n  const handleClickAway = () => {\r\n    setShowAttachFile(false);\r\n  };\r\n\r\n  const onEnterPress = (e) => {\r\n    if (e.keyCode === 13) {\r\n      e.preventDefault();\r\n\r\n      const youtubeLink =\r\n        /^((?:https?:)?\\/\\/)?((?:www|m)\\.)?((?:youtube\\.com|youtu.be))(\\/(?:[\\w\\\\-]+\\?v=|embed\\/|v\\/)?)([\\w\\\\-]+)(\\S+)?$/;\r\n      const facebookVideoLink =\r\n        /^https?:\\/\\/www\\.facebook\\.com.*\\/(video(s)?|watch|story)(\\.php?|\\/).+$/;\r\n      const vimeoLink =\r\n        /(http|https)?:\\/\\/(www\\.|player\\.)?vimeo\\.com\\/(?:channels\\/(?:\\w+\\/)?|groups\\/([^\\\\/]*)\\/videos\\/|video\\/|)(\\d+)(?:|\\/\\?)/;\r\n      const soundcloudLink = /^https?:\\/\\/(soundcloud\\.com|snd\\.sc)\\/(.*)$/;\r\n      const dailymotionLink =\r\n        /^.+dailymotion.com\\/(video|hub)\\/([^_]+)[^#]*(#video=([^_&]+))?/;\r\n      const urlLink =\r\n        /^(?:http(s)?:\\/\\/)?[\\w.-]+(?:\\.[\\w\\\\.-]+)+[\\w\\-\\\\._~:/?#[\\]@!\\\\$&'\\\\(\\\\)\\\\*\\\\+,;=.]+$/;\r\n\r\n      if (roomId) {\r\n        if (\r\n          youtubeLink.test(input) ||\r\n          facebookVideoLink.test(input) ||\r\n          vimeoLink.test(input) ||\r\n          soundcloudLink.test(input) ||\r\n          dailymotionLink.test(input)\r\n        ) {\r\n          db.collection(\"rooms\")\r\n            .doc(roomId)\r\n            .collection(\"messages\")\r\n            .add({\r\n              message: \"\",\r\n              video: input,\r\n              name: user.displayName,\r\n              uid: user.uid,\r\n              timestamp: firebase.firestore.FieldValue.serverTimestamp(),\r\n            })\r\n            .then(function (docRef) {\r\n              console.log(\"Document written with ID: \", docRef.id);\r\n              db.collection(\"rooms\")\r\n                .doc(roomId)\r\n                .collection(\"messages\")\r\n                .doc(docRef.id)\r\n                .set(\r\n                  {\r\n                    id: docRef.id,\r\n                  },\r\n                  { merge: true }\r\n                );\r\n            })\r\n            .catch(function (error) {\r\n              console.error(\"Error adding document: \", error);\r\n            });\r\n        } else if (urlLink.test(input)) {\r\n          db.collection(\"rooms\")\r\n            .doc(roomId)\r\n            .collection(\"messages\")\r\n            .add({\r\n              message: \"\",\r\n              url: input,\r\n              name: user.displayName,\r\n              uid: user.uid,\r\n              timestamp: firebase.firestore.FieldValue.serverTimestamp(),\r\n            })\r\n            .then(function (docRef) {\r\n              console.log(\"Document written with ID: \", docRef.id);\r\n              db.collection(\"rooms\")\r\n                .doc(roomId)\r\n                .collection(\"messages\")\r\n                .doc(docRef.id)\r\n                .set(\r\n                  {\r\n                    id: docRef.id,\r\n                  },\r\n                  { merge: true }\r\n                );\r\n            })\r\n            .catch(function (error) {\r\n              console.error(\"Error adding document: \", error);\r\n            });\r\n        } else if (/\\S/.test(input)) {\r\n          db.collection(\"rooms\")\r\n            .doc(roomId)\r\n            .collection(\"messages\")\r\n            .add({\r\n              message: CryptoJS.AES.encrypt(\r\n                input,\r\n                \"my-secret-key@123\"\r\n              ).toString(),\r\n              name: user.displayName,\r\n              uid: user.uid,\r\n              timestamp: firebase.firestore.FieldValue.serverTimestamp(),\r\n            })\r\n            .then(function (docRef) {\r\n              db.collection(\"rooms\")\r\n                .doc(roomId)\r\n                .collection(\"messages\")\r\n                .doc(docRef.id)\r\n                .set(\r\n                  {\r\n                    id: docRef.id,\r\n                  },\r\n                  { merge: true }\r\n                );\r\n            })\r\n            .catch(function (error) {\r\n              console.error(\"Error adding document: \", error);\r\n            });\r\n        }\r\n      }\r\n      setInput(\"\");\r\n      setEmoji(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <s.chatfooter_height drawerBottom={drawerBottom} className=\"chat__footer\">\r\n      <DrawerBottom\r\n        drawerBottom={drawerBottom}\r\n        setDrawerBottom={setDrawerBottom}\r\n        fileVideoUrl={fileVideoUrl}\r\n        fileImageUrl={fileImageUrl}\r\n        setFileImageUrl={setFileImageUrl}\r\n        setFileVideoUrl={setFileVideoUrl}\r\n        roomId={roomId}\r\n        db={db}\r\n        firebase={firebase}\r\n        storage={storage}\r\n      />\r\n\r\n      {emoji ? (\r\n        <Hidden only={[\"xs\"]}>\r\n          <TooltipCustom\r\n            name=\"Close\"\r\n            icon={<CloseIcon style={{ color: \"#de5751\" }} />}\r\n            onClick={() => handleEmoticonsClose()}\r\n          />\r\n        </Hidden>\r\n      ) : null}\r\n\r\n      <TooltipCustom\r\n        name=\"Emoticons\"\r\n        icon={<InsertEmoticonIcon style={{ color: \"#de5751\" }} />}\r\n        onClick={() => handleEmoticons()}\r\n      />\r\n\r\n      {emoji ? (\r\n        <>\r\n          <Hidden only={[\"xs\"]}>\r\n            <Picker onSelect={addEmoji} />\r\n          </Hidden>\r\n          <Hidden smUp>\r\n            <ClickAwayListener onClickAway={handleEmoticonsClose}>\r\n              <Picker onSelect={addEmoji} />\r\n            </ClickAwayListener>\r\n          </Hidden>\r\n        </>\r\n      ) : null}\r\n\r\n      <div>\r\n        <TooltipCustom\r\n          name=\"Attach\"\r\n          icon={<AttachFileIcon style={{ color: \"#de5751\" }} />}\r\n          onClick={attachFile}\r\n        />\r\n        {showAttachFile ? (\r\n          <ClickAwayListener onClickAway={handleClickAway}>\r\n            <div className=\"chat__attachFile\">\r\n              {attachFileLists.map((attachFileList) => (\r\n                <Slide\r\n                  key={attachFileList.id}\r\n                  direction=\"up\"\r\n                  in={attachFile}\r\n                  mountOnEnter\r\n                  unmountOnExit\r\n                >\r\n                  <Tooltip\r\n                    title={\r\n                      <span\r\n                        style={{ fontSize: \"14px\", padding: \"8px 5px 8px 5px\" }}\r\n                      >\r\n                        {attachFileList.title}\r\n                      </span>\r\n                    }\r\n                    placement=\"left\"\r\n                  >\r\n                    <Fab color=\"primary\" aria-label=\"person\">\r\n                      <div className=\"chat__icon\">\r\n                        <label htmlFor=\"file-input\">\r\n                          {attachFileList.icon}\r\n                        </label>\r\n                        <input\r\n                          id=\"file-input\"\r\n                          type=\"file\"\r\n                          onChange={onFileChange}\r\n                          accept=\"image/*,video/mp4,video/3gpp,video/quicktime\"\r\n                        />\r\n                      </div>\r\n                    </Fab>\r\n                  </Tooltip>\r\n                </Slide>\r\n              ))}\r\n            </div>\r\n          </ClickAwayListener>\r\n        ) : null}\r\n      </div>\r\n\r\n      <form>\r\n        <textarea\r\n          required\r\n          value={input}\r\n          onChange={(e) => setInput(e.target.value)}\r\n          placeholder=\"Type a message\"\r\n          type=\"text\"\r\n          rows=\"1\"\r\n          onKeyDown={onEnterPress}\r\n        />\r\n      </form>\r\n\r\n      <TooltipCustom\r\n        name=\"Send Message\"\r\n        onChange={(e) => setInput(e.target.value)}\r\n        icon={<SendIcon style={{ color: \"#de5751\" }} />}\r\n        onClick={onEnterPress}\r\n      />\r\n    </s.chatfooter_height>\r\n  );\r\n}\r\n\r\nexport default ChatFooter;\r\n","import React from \"react\";\r\nimport LaptopIcon from \"@material-ui/icons/Laptop\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\nimport \"./ChatLandingScreen.css\";\r\nimport Zoom from \"@material-ui/core/Zoom\";\r\n\r\nfunction ChatLandingScreen({ showLandingScreenPhoto }) {\r\n  return (\r\n    <div className=\"chat-landing-screen\">\r\n      <div>\r\n        <Zoom\r\n          in={showLandingScreenPhoto}\r\n          style={{ transitionDelay: showLandingScreenPhoto ? \"300ms\" : \"0ms\" }}\r\n        >\r\n          <img\r\n            className=\"chat-landing-screen__photo\"\r\n            src=\"https://firebasestorage.googleapis.com/v0/b/tattle-9359.appspot.com/o/Folder%2Flogo.webp?alt=media&token=c0d6ec1c-5261-4864-a820-539a731fb7d1\"\r\n            alt=\"TattleLogo\"\r\n          />\r\n        </Zoom>\r\n      </div>\r\n\r\n      <div className=\"chat-landing-screen__title\">\r\n        <p>Keeps you Connected</p>\r\n      </div>\r\n\r\n      <div>\r\n        <p>\r\n          Tattle is driven by a fascination for mobile technology that was once\r\n          viewed as a passing trend.\r\n        </p>\r\n      </div>\r\n\r\n      <Divider />\r\n\r\n      <div className=\"chat-landing-screen__footer\">\r\n        <LaptopIcon />\r\n        <p>Tattle is available for Windows.</p>\r\n        <a\r\n          target=\"_blank\"\r\n          href=\"https://tattle-9359.web.app\"\r\n          rel=\"noopener noreferrer\"\r\n        >\r\n          Get it here.\r\n        </a>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ChatLandingScreen;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useStateValue } from \"../StateProvider\";\r\nimport { useHistory, useParams } from \"react-router-dom\";\r\n//importing firebase\r\nimport { storage, firebase } from \"../firebase\";\r\nimport db from \"../firebase\";\r\n//importing components\r\nimport ChatHeader from \"./ChatHeader\";\r\nimport ChatBody from \"./ChatBody\";\r\nimport ChatFooter from \"./ChatFooter\";\r\nimport ChatLandingScreen from \"./ChatLandingScreen\";\r\n//importing material-ui\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\n//importing styles\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nimport \"./Chat.css\";\r\n\r\nfunction Chat({ isRoomExist }) {\r\n  const history = useHistory();\r\n  const [{ user }] = useStateValue();\r\n  const { roomId } = useParams();\r\n  const [_roomId, set_RoomId] = useState(\"\");\r\n  const [roomName, setRoomName] = useState(\"\");\r\n  const [roomCreatedBy, setRoomCreatedBy] = useState(\"\");\r\n  const [roomOwner, setRoomOwner] = useState(\"\");\r\n  const [messages, setMessages] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [showLandingScreenPhoto, setShowLandingScreenPhoto] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (roomId) {\r\n      db.collection(\"rooms\")\r\n        .doc(roomId)\r\n        .onSnapshot(function (doc) {\r\n          setRoomName(doc.data()?.name);\r\n          setRoomCreatedBy(doc.data()?.createdBy);\r\n          setRoomOwner(doc.data()?.roomOwner);\r\n          set_RoomId(doc.data()?.id);\r\n        });\r\n\r\n      db.collection(\"rooms\")\r\n        .doc(roomId)\r\n        .collection(\"messages\")\r\n        .orderBy(\"timestamp\", \"asc\")\r\n        .onSnapshot(function (doc) {\r\n          setMessages(doc.docs.map((doc) => doc.data()));\r\n          setLoading(true);\r\n        });\r\n\r\n      setShowLandingScreenPhoto(false);\r\n    } else {\r\n      setShowLandingScreenPhoto(true);\r\n      history.push(\"/\");\r\n    }\r\n  }, [roomId, history]);\r\n\r\n  return (\r\n    <div className=\"chat\">\r\n      {roomId ? (\r\n        <>\r\n          <div>\r\n            <ChatHeader\r\n              roomCreatedBy={roomCreatedBy}\r\n              roomOwner={roomOwner}\r\n              roomName={roomName}\r\n              roomId={roomId}\r\n              _roomId={_roomId}\r\n              messages={messages}\r\n              db={db}\r\n              history={history}\r\n              isRoomExist={isRoomExist}\r\n            />\r\n          </div>\r\n\r\n          <div className=\"chat__body\">\r\n            {loading ? (\r\n              <ChatBody\r\n                roomCreatedBy={roomCreatedBy}\r\n                roomOwner={roomOwner}\r\n                roomId={roomId}\r\n                messages={messages}\r\n                user={user}\r\n                isRoomExist={isRoomExist}\r\n              />\r\n            ) : (\r\n              <div className=\"chat__body_loading\">\r\n                <div>\r\n                  <CircularProgress />\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          <div>\r\n            <ChatFooter\r\n              roomName={roomName}\r\n              roomId={roomId}\r\n              db={db}\r\n              firebase={firebase}\r\n              storage={storage}\r\n            />\r\n          </div>\r\n        </>\r\n      ) : (\r\n        <ChatLandingScreen showLandingScreenPhoto={showLandingScreenPhoto} />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Chat;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useStateValue } from \"./StateProvider\";\r\nimport {\r\n  BrowserRouter as Router,\r\n  Switch,\r\n  Route,\r\n  Redirect,\r\n} from \"react-router-dom\";\r\n//importing firebase\r\nimport db from \"./firebase\";\r\nimport { auth, firebase } from \"./firebase\";\r\n//importing actions\r\nimport { setUser } from \"./actions/userAction\";\r\n//importing components\r\nimport Login from \"./Login\";\r\nimport Sidebar from \"../src/Sidebar/Sidebar\";\r\nimport Chat from \"../src/Chat/Chat\";\r\nimport { ToastContainer } from \"react-toastify\";\r\nimport { toastInfo } from \"./shared/toastInfo\";\r\n//importing material-ui\r\nimport Hidden from \"@material-ui/core/Hidden\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport LinearProgress from \"@material-ui/core/LinearProgress\";\r\n//importing styles\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nimport \"./App.css\";\r\n\r\nfunction App() {\r\n  const [{ user }, dispatch] = useStateValue();\r\n  const [rooms, setRooms] = useState([]);\r\n  const [isRoomExist, setIsRoomExist] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const unsubscribe = auth.onAuthStateChanged((authUser) => {\r\n      if (authUser) {\r\n        dispatch(setUser(authUser));\r\n        setLoading(true);\r\n\r\n        db.collection(\"rooms\")\r\n          .orderBy(\"timestamp\", \"desc\")\r\n          .onSnapshot((snapshot) =>\r\n            setRooms(\r\n              snapshot.docs.map((doc) => ({\r\n                id: doc.id,\r\n                data: doc.data(),\r\n              }))\r\n            )\r\n          );\r\n\r\n        if (authUser.isAnonymous === true && authUser.displayName === null) {\r\n          var anonymousName =\r\n            // eslint-disable-next-line no-useless-concat\r\n            \"anonymous\" + Math.floor(Math.random() * 1000000);\r\n\r\n          auth.currentUser.updateProfile({\r\n            displayName: anonymousName,\r\n            photoURL: \"\",\r\n          });\r\n\r\n          db.collection(\"users\")\r\n            .doc(authUser.uid)\r\n            .set({\r\n              name: anonymousName,\r\n              about: \"Hey there! I am using Tattle.\",\r\n              photoURL: \"https://avatars.dicebear.com/api/human/ugtjh.svg\",\r\n              role: \"anonymous\",\r\n              email: anonymousName + \"@anonymous.com\",\r\n              dateJoined: firebase.firestore.FieldValue.serverTimestamp(),\r\n            })\r\n            .then(function () {\r\n              console.log(\"Document successfully updated!\");\r\n            })\r\n            .catch(function (error) {\r\n              // The document probably doesn't exist.\r\n              console.error(\"Error updating document: \", error);\r\n            });\r\n        }\r\n\r\n        if (\r\n          authUser.uid &&\r\n          authUser.isAnonymous === false &&\r\n          authUser.photoURL !== null\r\n        ) {\r\n          const errorAbout = \"errorAbout\";\r\n          db.collection(\"users\")\r\n            .doc(authUser.uid)\r\n            .get()\r\n            .then(function (doc) {\r\n              if (doc.exists) {\r\n                // console.log(\"USER EXIST\");\r\n              } else {\r\n                db.collection(\"users\").doc(authUser.uid).set({\r\n                  name: authUser.displayName,\r\n                  about: \"Hey there! I am using Tattle.\",\r\n                  photoURL: user.photoURL,\r\n                  role: \"regular\",\r\n                  email: authUser.email,\r\n                  dateJoined: firebase.firestore.FieldValue.serverTimestamp(),\r\n                });\r\n              }\r\n            })\r\n            .catch(function (error) {\r\n              toastInfo(`${error}`, errorAbout, \"top-center\");\r\n            });\r\n        } else if (\r\n          authUser.uid &&\r\n          authUser.isAnonymous === false &&\r\n          authUser.photoURL === null\r\n        ) {\r\n          const errorAbout = \"errorAbout\";\r\n          db.collection(\"users\")\r\n            .doc(authUser.uid)\r\n            .get()\r\n            .then(function (doc) {\r\n              if (doc.exists) {\r\n                console.log(\"USER EXIST\");\r\n              } else {\r\n                db.collection(\"users\").doc(authUser.uid).set({\r\n                  name: authUser.displayName,\r\n                  about: \"Hey there! I am using Tattle.\",\r\n                  photoURL: \"\",\r\n                  role: \"regular\",\r\n                  email: authUser.email,\r\n                  dateJoined: firebase.firestore.FieldValue.serverTimestamp(),\r\n                });\r\n              }\r\n            })\r\n            .catch(function (error) {\r\n              toastInfo(`${error}`, errorAbout, \"top-center\");\r\n            });\r\n        }\r\n      } else {\r\n        dispatch(setUser(null));\r\n        setLoading(true);\r\n      }\r\n    });\r\n\r\n    return () => {\r\n      unsubscribe();\r\n    };\r\n  }, [dispatch, user]);\r\n\r\n  return (\r\n    <div className={`app ${loading === false && \"app-no-bg\"}`}>\r\n      {loading ? (\r\n        <>\r\n          <ToastContainer\r\n            position=\"top-center\"\r\n            autoClose={5000}\r\n            newestOnTop={false}\r\n            closeOnClick\r\n            rtl={false}\r\n            pauseOnFocusLoss\r\n            draggable\r\n          />\r\n          {!user ? (\r\n            <Login />\r\n          ) : (\r\n            <div className=\"app__body\">\r\n              <Router>\r\n                <Switch>\r\n                  <Route exact path=\"/\">\r\n                    <Sidebar\r\n                      rooms={rooms}\r\n                      setIsRoomExist={setIsRoomExist}\r\n                      isRoomExist={isRoomExist}\r\n                    />\r\n                    <Hidden only={[\"xs\"]}>\r\n                      {\" \"}\r\n                      {/* Chat component will be hidden in mobile view */}\r\n                      <Chat isRoomExist={isRoomExist} />\r\n                    </Hidden>\r\n                  </Route>\r\n\r\n                  <Route exact path=\"/rooms/:roomId\">\r\n                    <Hidden only={[\"xs\"]}>\r\n                      {\" \"}\r\n                      {/* Sidebar component will be hidden in mobile view */}\r\n                      <Sidebar\r\n                        rooms={rooms}\r\n                        setIsRoomExist={setIsRoomExist}\r\n                        isRoomExist={isRoomExist}\r\n                      />\r\n                    </Hidden>\r\n                    <Chat isRoomExist={isRoomExist} />\r\n                  </Route>\r\n\r\n                  <Route path=\"*\">\r\n                    <Redirect to=\"/\" />\r\n                  </Route>\r\n                </Switch>\r\n              </Router>\r\n            </div>\r\n          )}\r\n        </>\r\n      ) : (\r\n        <div className=\"app__loading\">\r\n          <div>\r\n            <div className=\"app__loading_circular\">\r\n              <CircularProgress />\r\n            </div>\r\n            <div className=\"app__loading_linear\">\r\n              <LinearProgress />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://cra.link/PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://cra.link/PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then((registration) => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://cra.link/PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch((error) => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then((response) => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then((registration) => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log('No internet connection found. App is running in offline mode.');\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then((registration) => {\r\n        registration.unregister();\r\n      })\r\n      .catch((error) => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","export const initialState = {\r\n    user: null,\r\n}\r\n\r\nexport const actionTypes = {\r\n    SET_USER: \"SET_USER\",\r\n}\r\n\r\nconst reducer = (state, action) => {\r\n\r\n    switch (action.type) {\r\n        case actionTypes.SET_USER:\r\n            return {\r\n                ...state,\r\n                user: action.user,\r\n            };\r\n\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default reducer;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorkerRegistration from './serviceWorkerRegistration';\r\nimport { StateProvider } from './StateProvider';\r\nimport reducer, { initialState } from './reducer';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <StateProvider initialState={initialState} reducer={reducer} >\r\n      <App />\r\n    </StateProvider>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://cra.link/PWA\r\nserviceWorkerRegistration.register();\r\n"],"sourceRoot":""}