{"version":3,"sources":["Chat/Chat.js"],"names":["ChatHeader","React","lazy","ChatBody","ChatFooter","ChatLandingScreen","Chat","isRoomExist","history","useHistory","useStateValue","user","roomId","useParams","useState","_roomId","set_RoomId","roomName","setRoomName","roomCreatedBy","setRoomCreatedBy","roomOwner","setRoomOwner","messages","setMessages","loading","setLoading","showLandingScreenPhoto","setShowLandingScreenPhoto","useEffect","db","collection","doc","onSnapshot","data","name","createdBy","id","orderBy","docs","map","push","Suspense","fallback","className","firebase","storage"],"mappings":"4LAaMA,G,aAAaC,IAAMC,MAAK,kBAAM,yDAC9BC,EAAWF,IAAMC,MAAK,kBAAM,+DAC5BE,EAAaH,IAAMC,MAAK,kBAAM,6EAC9BG,EAAoBJ,IAAMC,MAAK,kBAAM,kCAgG5BI,UA/Ff,YAAgC,IAAhBC,EAAe,EAAfA,YACRC,EAAUC,cAChB,EAAmBC,cAAVC,EAAT,oBAASA,KACDC,EAAWC,cAAXD,OACR,EAA8BE,mBAAS,IAAvC,mBAAOC,EAAP,KAAgBC,EAAhB,KACA,EAAgCF,mBAAS,IAAzC,mBAAOG,EAAP,KAAiBC,EAAjB,KACA,EAA0CJ,mBAAS,IAAnD,mBAAOK,EAAP,KAAsBC,EAAtB,KACA,EAAkCN,mBAAS,IAA3C,mBAAOO,EAAP,KAAkBC,EAAlB,KACA,EAAgCR,mBAAS,IAAzC,mBAAOS,EAAP,KAAiBC,EAAjB,KACA,EAA8BV,oBAAS,GAAvC,mBAAOW,EAAP,KAAgBC,EAAhB,KACA,EAA4DZ,oBAAS,GAArE,mBAAOa,EAAP,KAA+BC,EAA/B,KA6BA,OA3BAC,qBAAU,WACJjB,GACFkB,IAAGC,WAAW,SACXC,IAAIpB,GACJqB,YAAW,SAAUD,GAAM,IAAD,QACzBd,EAAW,UAACc,EAAIE,cAAL,aAAC,EAAYC,MACxBf,EAAgB,UAACY,EAAIE,cAAL,aAAC,EAAYE,WAC7Bd,EAAY,UAACU,EAAIE,cAAL,aAAC,EAAYb,WACzBL,EAAU,UAACgB,EAAIE,cAAL,aAAC,EAAYG,OAG3BP,IAAGC,WAAW,SACXC,IAAIpB,GACJmB,WAAW,YACXO,QAAQ,YAAa,OACrBL,YAAW,SAAUD,GACpBR,EAAYQ,EAAIO,KAAKC,KAAI,SAACR,GAAD,OAASA,EAAIE,WACtCR,GAAW,MAGfE,GAA0B,KAE1BA,GAA0B,GAC1BpB,EAAQiC,KAAK,QAEd,CAAC7B,EAAQJ,IAGV,kBAAC,IAAMkC,SAAP,CAAgBC,SAAU,uCACxB,yBAAKC,UAAU,QACZhC,EACC,oCACE,6BACE,kBAACZ,EAAD,CACEmB,cAAeA,EACfE,UAAWA,EACXJ,SAAUA,EACVL,OAAQA,EACRG,QAASA,EACTQ,SAAUA,EACVO,GAAIA,IACJtB,QAASA,EACTD,YAAaA,KAIjB,yBAAKqC,UAAU,cACZnB,EACC,kBAACtB,EAAD,CACEgB,cAAeA,EACfE,UAAWA,EACXT,OAAQA,EACRW,SAAUA,EACVZ,KAAMA,EACNJ,YAAaA,IAGf,yBAAKqC,UAAU,sBACb,6BACE,kBAAC,IAAD,SAMR,6BACE,kBAACxC,EAAD,CACEa,SAAUA,EACVL,OAAQA,EACRkB,GAAIA,IACJe,SAAUA,IACVC,QAASA,QAKf,kBAACzC,EAAD,CAAmBsB,uBAAwBA","file":"static/js/29.699e0e3c.chunk.js","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useStateValue } from \"../StateProvider\";\r\nimport { useHistory, useParams } from \"react-router-dom\";\r\n//importing firebase\r\nimport db from \"../firebase\";\r\nimport { storage, firebase } from \"../firebase\";\r\n//importing components\r\n//importing material-ui\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\n//importing styles\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nimport \"./Chat.css\";\r\n\r\nconst ChatHeader = React.lazy(() => import(\"./ChatHeader\"));\r\nconst ChatBody = React.lazy(() => import(\"./ChatBody\"));\r\nconst ChatFooter = React.lazy(() => import(\"./ChatFooter\"));\r\nconst ChatLandingScreen = React.lazy(() => import(\"./ChatLandingScreen\"));\r\nfunction Chat({ isRoomExist }) {\r\n  const history = useHistory();\r\n  const [{ user }] = useStateValue();\r\n  const { roomId } = useParams();\r\n  const [_roomId, set_RoomId] = useState(\"\");\r\n  const [roomName, setRoomName] = useState(\"\");\r\n  const [roomCreatedBy, setRoomCreatedBy] = useState(\"\");\r\n  const [roomOwner, setRoomOwner] = useState(\"\");\r\n  const [messages, setMessages] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [showLandingScreenPhoto, setShowLandingScreenPhoto] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (roomId) {\r\n      db.collection(\"rooms\")\r\n        .doc(roomId)\r\n        .onSnapshot(function (doc) {\r\n          setRoomName(doc.data()?.name);\r\n          setRoomCreatedBy(doc.data()?.createdBy);\r\n          setRoomOwner(doc.data()?.roomOwner);\r\n          set_RoomId(doc.data()?.id);\r\n        });\r\n\r\n      db.collection(\"rooms\")\r\n        .doc(roomId)\r\n        .collection(\"messages\")\r\n        .orderBy(\"timestamp\", \"asc\")\r\n        .onSnapshot(function (doc) {\r\n          setMessages(doc.docs.map((doc) => doc.data()));\r\n          setLoading(true);\r\n        });\r\n\r\n      setShowLandingScreenPhoto(false);\r\n    } else {\r\n      setShowLandingScreenPhoto(true);\r\n      history.push(\"/\");\r\n    }\r\n  }, [roomId, history]);\r\n\r\n  return (\r\n    <React.Suspense fallback={<p>Loading</p>}>\r\n      <div className=\"chat\">\r\n        {roomId ? (\r\n          <>\r\n            <div>\r\n              <ChatHeader\r\n                roomCreatedBy={roomCreatedBy}\r\n                roomOwner={roomOwner}\r\n                roomName={roomName}\r\n                roomId={roomId}\r\n                _roomId={_roomId}\r\n                messages={messages}\r\n                db={db}\r\n                history={history}\r\n                isRoomExist={isRoomExist}\r\n              />\r\n            </div>\r\n\r\n            <div className=\"chat__body\">\r\n              {loading ? (\r\n                <ChatBody\r\n                  roomCreatedBy={roomCreatedBy}\r\n                  roomOwner={roomOwner}\r\n                  roomId={roomId}\r\n                  messages={messages}\r\n                  user={user}\r\n                  isRoomExist={isRoomExist}\r\n                />\r\n              ) : (\r\n                <div className=\"chat__body_loading\">\r\n                  <div>\r\n                    <CircularProgress />\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            <div>\r\n              <ChatFooter\r\n                roomName={roomName}\r\n                roomId={roomId}\r\n                db={db}\r\n                firebase={firebase}\r\n                storage={storage}\r\n              />\r\n            </div>\r\n          </>\r\n        ) : (\r\n          <ChatLandingScreen showLandingScreenPhoto={showLandingScreenPhoto} />\r\n        )}\r\n      </div>\r\n    </React.Suspense>\r\n  );\r\n}\r\n\r\nexport default Chat;\r\n"],"sourceRoot":""}