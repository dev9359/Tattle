(this.webpackJsonptattle=this.webpackJsonptattle||[]).push([[30],{295:function(e,t,a){},476:function(e,t,a){"use strict";a.r(t);var n=a(26),o=a(2),c=a.n(o),l=a(35),i=a(10),r=a(14),s=a(92),d=(a(55),a(295),c.a.lazy((function(){return Promise.all([a.e(1),a.e(19)]).then(a.bind(null,414))}))),u=c.a.lazy((function(){return Promise.all([a.e(2),a.e(5),a.e(14)]).then(a.bind(null,416))})),m=c.a.lazy((function(){return Promise.all([a.e(1),a.e(2),a.e(3),a.e(7),a.e(12)]).then(a.bind(null,463))})),b=c.a.lazy((function(){return a.e(17).then(a.bind(null,451))}));t.default=function(e){var t=e.isRoomExist,a=Object(i.g)(),O=Object(l.b)(),v=Object(n.a)(O,1)[0].user,j=Object(i.h)().roomId,f=Object(o.useState)(""),h=Object(n.a)(f,2),p=h[0],E=h[1],S=Object(o.useState)(""),g=Object(n.a)(S,2),y=g[0],w=g[1],I=Object(o.useState)(""),_=Object(n.a)(I,2),N=_[0],x=_[1],z=Object(o.useState)(""),B=Object(n.a)(z,2),P=B[0],k=B[1],R=Object(o.useState)([]),C=Object(n.a)(R,2),J=C[0],L=C[1],F=Object(o.useState)([]),U=Object(n.a)(F,2),q=U[0],A=U[1],D=Object(o.useState)(!1),G=Object(n.a)(D,2),H=G[0],K=G[1],M=Object(o.useState)(!1),Q=Object(n.a)(M,2),T=Q[0],V=Q[1],W=Object(o.useState)(null),X=Object(n.a)(W,2),Y=X[0],Z=X[1];Object(o.useEffect)((function(){j?(r.b.collection("rooms").doc(j).onSnapshot((function(e){var t,a,n,o;w(null===(t=e.data())||void 0===t?void 0:t.name),x(null===(a=e.data())||void 0===a?void 0:a.createdBy),k(null===(n=e.data())||void 0===n?void 0:n.roomOwner),E(null===(o=e.data())||void 0===o?void 0:o.id),$(e.data())})),r.b.collection("rooms").doc(j).collection("messages").orderBy("timestamp","asc").onSnapshot((function(e){A(e.id),L(e.docs.map((function(e){return e.data()}))),K(!0)})),V(!1)):(V(!0),a.push("/"))}),[j,a]);var $=function(e){var t;if(null===(t=e.participants)||void 0===t?void 0:t.includes(v.uid)){var a,n=null===(a=e.participants)||void 0===a?void 0:a.splice(e.participants.indexOf(v.uid,1));r.b.collection("users").doc(n[0]).get().then((function(e){Z(e.data())}))}};return c.a.createElement(c.a.Suspense,{fallback:c.a.createElement("p",null,"Loading")},c.a.createElement("div",{className:"chat"},j?c.a.createElement(c.a.Fragment,null,c.a.createElement("div",null,c.a.createElement(d,{roomCreatedBy:N,roomOwner:P,roomName:y,roomId:j,_roomId:p,messagesId:q,messages:J,db:r.b,chatUser:Y,history:a,isRoomExist:t})),c.a.createElement("div",{className:"chat__body"},H?c.a.createElement(u,{roomCreatedBy:N,roomOwner:P,roomId:j,messages:J,user:v,isRoomExist:t}):c.a.createElement("div",{className:"chat__body_loading"},c.a.createElement("div",null,c.a.createElement(s.a,null)))),c.a.createElement("div",null,c.a.createElement(m,{roomName:y,roomId:j,db:r.b,firebase:r.c,storage:r.e}))):c.a.createElement(b,{showLandingScreenPhoto:T})))}}}]);
//# sourceMappingURL=30.f5bab736.chunk.js.map