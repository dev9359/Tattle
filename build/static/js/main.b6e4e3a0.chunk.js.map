{"version":3,"sources":["StateProvider.js","firebase.js","actions/userAction.js","shared/toastInfo.js","images/logo.webp","Login.js","images/Google G Logo.png","Sidebar/UserAvatar.js","shared/DropdownMenu.js","shared/DialogCustom.js","Sidebar/DrawerLeft.js","shared/SearchBar.js","Sidebar/SidebarChat.js","Sidebar/SiderbarUserList.js","Sidebar/Drawer2.js","shared/TooltipCustom.js","Sidebar/Sidebar.js","Chat/DrawerRight.js","Chat/DrawerRightSearch.js","Chat/DrawerRightInfo.js","Chat/ChatHeader.js","Chat/ChatBody.js","Chat/DrawerBottom.js","Chat/preview.style.js","Chat/ChatFooter.js","Chat/ChatLandingScreen.js","Chat/Chat.js","App.js","serviceWorkerRegistration.js","reducer.js","index.js"],"names":["StateContext","createContext","StateProvider","reducer","initialState","children","Provider","value","useReducer","useStateValue","useContext","db","firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","firestore","auth","provider","GoogleAuthProvider","storage","setUser","authUser","type","user","toastInfo","toastTitle","toastId","position","toast","info","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","Login","className","rel","src","Logo","alt","onClick","signInWithPopup","catch","error","signInAnonymously","UserAvatar","photoURL","style","cursor","Avatar","DropdownMenu","menuLists","menu","handleMenuClose","Menu","id","anchorEl","keepMounted","open","Boolean","onClose","anchorOrigin","vertical","horizontal","transformOrigin","getContentAnchorEl","map","menuList","MenuItem","key","title","DialogCustom","close","photo","Dialog","fullScreen","aria-labelledby","aria-describedby","DialogTitle","IconButton","edge","color","aria-label","DialogContent","Zoom","in","transitionDelay","useStyles","makeStyles","theme","root","display","drawerPaper","DrawerLeft","drawerLeft","setDrawerLeft","classes","useState","name","setName","about","setAbout","showEditName","setShowEditName","showEditAbout","setShowEditAbout","showProfilePhoto","setShowProfilePhoto","uploadPhotoLink","setUploadPhotoLink","showDialogUpload","setShowDialogUpload","menuProfile","setMenuProfile","setPhoto","useEffect","displayName","collection","doc","uid","onSnapshot","data","onFileChangeImage","e","a","file","target","files","size","storageRef","ref","isAnonymous","imagesRef","child","fileRef","put","getDownloadURL","console","log","handleUploadPhoto","currentUser","updateProfile","set","merge","Math","random","htmlFor","onChange","accept","Drawer","anchor","variant","paper","event","currentTarget","DialogActions","styles","borderBottom","preventDefault","update","then","SearchBar","placeholder","setSearch","search","showArrowIcon","setShowArrowIcon","required","onFocus","onBlur","CryptoJS","require","SidebarChat","messages","setMessages","fetchRooms","orderBy","snapshot","docs","to","video","message","decryptedData","AES","decrypt","toString","enc","Utf8","url","SidebarUserList","email","Drawer2","myUsers","drawer2","setDrawer2","userData","rooms","setIsRoomExist","isRoomExist","useHistory","useParams","roomId","loading","noRooms","filter","x","toLowerCase","includes","CircularProgress","TooltipCustom","icon","Tooltip","fontSize","padding","placement","Sidebar","history","setLoading","setNoRooms","menuSidebar","setMenuSidebar","setUserData","isSearchFound","setIsSetSearchFound","findRoom","myRooms","room","props","length","index","findIndex","push","fetchUser","handleDrawerLeftOpen","handleMenuOpen","delete","signOut","owner","roomOwner","breakpoints","only","width","up","DrawerRight","content","drawerRight","DrawerRightSearch","drawerRightSearch","setDrawerRightSearch","isFoundMessage","setIsFoundMessage","findMessage","myMessages","caption","Date","timestamp","toDate","toLocaleTimeString","hour","hour12","minute","Divider","DrawerRightInfo","drawerRightInfo","setDrawerRightInfo","ChatHeader","roomCreatedBy","roomName","_roomId","menuChat","setMenuChat","role","setRole","showDate","setShowDate","isLastMessage","setIsLastMessage","get","exists","menuChatLists","roomDeleted","deleteRoom","Hidden","smUp","weekday","year","month","day","getDateFromMessage","ChatBody","messagesEndRef","useRef","playing","setPlaying","handlePlay","handlePause","current","scrollIntoView","behavior","height","controls","onPlay","onPause","onEnded","href","paperAnchorBottom","left","right","bottom","maxHeight","top","DrawerBottom","drawerBottom","setDrawerBottom","fileImageUrl","fileVideoUrl","setFileVideoUrl","setFileImageUrl","setCaption","Fab","add","FieldValue","serverTimestamp","docRef","chatfooter_height","styled","div","attachFileLists","ChatFooter","input","setInput","emoji","setEmoji","showAttachFile","setShowAttachFile","attachFile","addEmoji","native","handleEmoticonsClose","onFileChange","match","getTime","videosRef","onSelect","ClickAwayListener","onClickAway","attachFileList","Slide","direction","mountOnEnter","unmountOnExit","rows","onKeyDown","keyCode","shiftKey","test","encrypt","ChatLandingScreen","showLandingScreenPhoto","Chat","set_RoomId","setRoomName","setRoomCreatedBy","setRoomOwner","setShowLandingScreenPhoto","createdBy","App","dispatch","setRooms","unsubscribe","onAuthStateChanged","anonymousName","floor","dateJoined","newestOnTop","rtl","pauseOnFocusLoss","exact","path","LinearProgress","isLocalhost","window","location","hostname","registerValidSW","swUrl","config","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","state","controller","onUpdate","onSuccess","actionTypes","action","ReactDOM","render","StrictMode","document","getElementById","URL","process","origin","addEventListener","fetch","headers","response","contentType","status","indexOf","ready","unregister","reload","checkValidServiceWorker","serviceWorkerRegistration"],"mappings":"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","file":"static/js/main.b6e4e3a0.chunk.js","sourcesContent":["import React, { createContext, useContext, useReducer } from 'react';\r\n\r\nexport const StateContext = createContext();\r\n\r\nexport const StateProvider = ({ reducer, initialState, children }) => (\r\n    <StateContext.Provider value={useReducer(reducer, initialState)}>\r\n        {children}\r\n    </StateContext.Provider>\r\n);\r\n\r\nexport const useStateValue =  () => useContext(StateContext);","import firebase from \"firebase\";\r\n\r\nconst firebaseConfig = {\r\n  apiKey: \"AIzaSyCF7lHw_Z7DmZgpoZuYIGveD0eZ8ha7Qyg\",\r\n  authDomain: \"tattle-9359.firebaseapp.com\",\r\n  databaseURL: \"https://tattle-9359-default-rtdb.firebaseio.com/\",\r\n  projectId: \"tattle-9359\",\r\n  storageBucket: \"tattle-9359.appspot.com\",\r\n  messagingSenderId: \"849640668400\",\r\n  appId: \"1:849640668400:web:91c77b3a931a325ef4d635\",\r\n  measurementId: \"G-17X1MHRTRX\",\r\n};\r\n\r\nconst firebaseApp = firebase.initializeApp(firebaseConfig);\r\n\r\nconst db = firebaseApp.firestore();\r\nconst auth = firebase.auth();\r\nconst provider = new firebase.auth.GoogleAuthProvider();\r\nconst storage = firebase.storage();\r\n\r\nexport { auth, provider, storage, firebase };\r\nexport default db;\r\n","export function setUser(authUser){\r\n    return {\r\n        type: 'SET_USER',\r\n        user: authUser,\r\n    }\r\n}","import { toast } from 'react-toastify';\r\n\r\nexport const toastInfo = ( toastTitle, toastId, position ) => {\r\n    toast.info(toastTitle, {\r\n        toastId: toastId,\r\n        position: position,\r\n        autoClose: 5000,\r\n        hideProgressBar: true,\r\n        closeOnClick: true,\r\n        pauseOnHover: true,\r\n        draggable: true,\r\n        progress: undefined,\r\n        }\r\n    );\r\n}","export default __webpack_public_path__ + \"static/media/logo.179025b4.webp\";","import React from \"react\";\r\nimport { auth, provider } from \"./firebase\";\r\nimport { toastInfo } from \"./shared/toastInfo\";\r\nimport PermIdentityIcon from \"@material-ui/icons/PermIdentity\";\r\nimport GoogleLogo from \"./images/Google G Logo.png\";\r\nimport Logo from \"./images/logo.webp\";\r\nimport \"./Login.css\";\r\n\r\nfunction Login() {\r\n  const signInGoogle = () => {\r\n    const google = \"google\";\r\n\r\n    auth\r\n      .signInWithPopup(provider)\r\n      .catch((error) => toastInfo(`${error}`, google, \"top-center\"));\r\n  };\r\n\r\n  const loginAnonymously = () => {\r\n    const anonymous = \"anonymous\";\r\n\r\n    auth\r\n      .signInAnonymously()\r\n      .catch((error) => toastInfo(`${error}`, anonymous, \"top-center\"));\r\n  };\r\n\r\n  return (\r\n    <div className=\"login\">\r\n      <div className=\"login__container\">\r\n        <img rel=\"preload\" src={Logo} alt=\"Tattle Logo\" />\r\n        <div className=\"login__text\">\r\n          <h2>Keeps you Connected</h2>\r\n          <br></br>\r\n          <p>Tattle is driven by a fascination for communication </p>\r\n          <p>technology that was once viewed as a passing trend.</p>\r\n        </div>\r\n        <div className=\"login__withGoogle\" onClick={signInGoogle}>\r\n          <img src={GoogleLogo} alt=\"Google Logo\" />\r\n          <span>Sign in with Google</span>\r\n        </div>\r\n\r\n        <div\r\n          className=\"login__withGoogle login__Anonymously\"\r\n          onClick={loginAnonymously}\r\n        >\r\n          <PermIdentityIcon />\r\n          <span>Login Anonymously</span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Login;\r\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAD8klEQVRogc2aW6iUVRTHf845apiXY4lgFlYoSealSMuQiiwjQkEsIqjH6CUIeu/NehAEC8Oi7EoUeSLJk90IAi8pFlREF1SiOtWb1vFW56j/WLUmpmkG197f983MHzYzD/vy/3/7svZaa4+TRAmYAlwOLASWAvOAS4DpwGTgLHAcOAoMA4eAfcDX/v9EUQpFhVwP3AGs8v852AN8AOwEPs1mYkIyymJJr0o6ofIwIulNSStzOKU2mC1pq6SjJQpoxilJL0m6qCohd0n6vkIBzfhR0v1lCpkg6ckOCmjGYxEh/efYQnbivAyszd6ExXAQ2Ft0s0+WNNTFmdgpaU7RpTVe0ntdFLFZUl8Zm31DlwSMSXok5/htZRDvAV7PXNmjwLfALrfcPwNH3LIPAHOAZcCNwHxgYkNbq/sA8G7WyE3KZkgazvyS29yYjQt8Qatzi6Ttkv6Q9KWkq3Jmot3SejpDxO5ca+zlJkkzi4hoFrJc0miiiGckTSpKooxSa1hlDwPjE1bleuBB4GTWmi4b/jUWSvo9cSa6PguNpT4jZrmnBr/RF8BDPTELDaj5EXh7sP6YixjrCLsEmJC5wHXBJub87O4J5k0wIUuAvkDdY8CmjrJLgN1+FwWrfwd8nDnOav6x2lVhyIQsCHZ+oACJJS6mKky1pTU72PknBUiMVCjCMFBLOHaHKyZTBNNNyLRg5SNVsymA801INLA12pMSHCbkt2DdgcrZ5GOk5vYhgst6XcgvwcrXFBgo5Vadgx9MyFfBhisLDFS/mylYzDU+5b8RHOr322wEi1zMRxlC3gIOA38G659xv/7RYP3P7S6/QNKZoB+yo4M+xvNBTsb9SmswUdKuYCNzhVd0QMQKD2hEsN/c7ZpP9/vBKbRN+1TFm/c8YLNfaCPYYe523UN8O+E+ZHtlSzUa/oa5CouDdY859/9EUV4LTmUdj1ewpDYmcthWb9vYyfLETgzPlhQOmiJpS8b4N7QSYuW5jM4sQHdbARG3StqXMe6Ljf00d3qhZ4pScVrSoKRViSHTQW+bil89Dfhvn62C2HcDb2RuVLPg33iAYj/wU0MQ21LVl3r62ozdFU1B7BTc+79Ae5sv1q20QgSbWnFul2e3M3w7cGfmF6sKlo9f0+qqU2sz4GnPkwz1mIh17e5r7YTgzypsLQ5Wxy2Md5zL8bYNAidMn6/LbuEJSf3n4ply3q+TdLiDYswM3Bfll2q8Zvn1uuonHC/4WGFuudbYHtW8UrIgy88M5qbxij5zutq9Rjumb87sw4znh76hP8slUtbDM/MhzFLbw7Nr/eHZxcAF/gzEBrETx6y8RSztaYZZ/vrDs2LpO+AvpvyKMZBkRBsAAAAASUVORK5CYII=\"","import React from 'react';\r\nimport Avatar from '@material-ui/core/Avatar';\r\n\r\nfunction UserAvatar( { photoURL, onClick }) {\r\n    return (\r\n        <div style={{cursor: 'pointer'}}>\r\n            <Avatar \r\n                src={photoURL} \r\n                onClick={onClick}\r\n            />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default UserAvatar","import React from 'react';\r\nimport Menu from '@material-ui/core/Menu';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\n\r\nfunction DropdownMenu ( { menuLists, menu, handleMenuClose }) {\r\n    return (\r\n        <div>\r\n            <Menu id=\"simple-menu\"\r\n                anchorEl={menu}\r\n                keepMounted\r\n                open={Boolean(menu)}\r\n                onClose={handleMenuClose}\r\n                anchorOrigin={{\r\n                    vertical: \"bottom\",\r\n                    horizontal: \"right\"\r\n                }}\r\n                transformOrigin={{\r\n                    vertical: \"top\",\r\n                    horizontal: \"right\"\r\n                }}\r\n                getContentAnchorEl={null}\r\n                >\r\n                \r\n                {menuLists.map((menuList) =>\r\n                    <MenuItem key={menuList.id} onClick={menuList.onClick}>\r\n                        {menuList.title}\r\n                    </MenuItem>\r\n                )}\r\n            </Menu>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default DropdownMenu","import React from 'react';\r\n// import ReactPlayer from 'react-player';\r\n//importing material-ui\r\nimport Zoom from '@material-ui/core/Zoom';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport IconButton from '@material-ui/core/IconButton';\r\n//importing material-ui-icons\r\nimport CloseIcon from '@material-ui/icons/Close';\r\n//importing styles\r\nimport './DialogCustom.css'\r\n\r\nfunction DialogCustom({ open, close, user, photo }) {\r\n    \r\n    return (\r\n        <Dialog\r\n            open={open}\r\n            fullScreen \r\n            onClose={close}\r\n            aria-labelledby=\"alert-dialog-title\"\r\n            aria-describedby=\"alert-dialog-description\"\r\n            >\r\n            <DialogTitle id=\"alert-dialog-title-dialogCustom\">\r\n                <div>\r\n                    <Avatar src={user.photoURL}/>\r\n                </div>\r\n                <div>\r\n                    <IconButton edge=\"end\" color=\"inherit\" onClick={close} aria-label=\"close\">\r\n                        <CloseIcon />\r\n                    </IconButton>\r\n                </div>\r\n            </DialogTitle>\r\n            <DialogContent>\r\n                <Zoom in={open} style={{ transitionDelay: open ? '300ms' : '0ms' }}>\r\n                    <img src={photo} alt=\"\" className=\"DialogCustom__photo\"/>\r\n                </Zoom>\r\n            </DialogContent>\r\n        </Dialog>\r\n    )\r\n}\r\n\r\nexport default DialogCustom\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useStateValue } from \"../StateProvider\";\r\n//importing components\r\nimport DropdownMenu from \"../shared/DropdownMenu\";\r\nimport { toastInfo } from \"../shared/toastInfo\";\r\nimport DialogCustom from \"../shared/DialogCustom\";\r\n//importing material-ui\r\nimport Zoom from \"@material-ui/core/Zoom\";\r\nimport Drawer from \"@material-ui/core/Drawer\";\r\nimport Avatar from \"@material-ui/core/Avatar\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n//importing material-ui-icons\r\nimport PhotoCameraIcon from \"@material-ui/icons/PhotoCamera\";\r\nimport ArrowBackIcon from \"@material-ui/icons/ArrowBack\";\r\nimport EditIcon from \"@material-ui/icons/Edit\";\r\nimport CheckIcon from \"@material-ui/icons/Check\";\r\n//importing styles\r\nimport \"./DrawerLeft.css\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: \"flex\",\r\n  },\r\n  drawerPaper: {\r\n    position: \"absolute\",\r\n  },\r\n}));\r\n\r\nfunction DrawerLeft({ drawerLeft, setDrawerLeft, db, auth, storage }) {\r\n  const classes = useStyles();\r\n  const [{ user }] = useStateValue();\r\n  const [name, setName] = useState(\"\");\r\n  const [about, setAbout] = useState(\"\");\r\n  const [showEditName, setShowEditName] = useState(false);\r\n  const [showEditAbout, setShowEditAbout] = useState(false);\r\n  const [showProfilePhoto, setShowProfilePhoto] = useState(false);\r\n  const [uploadPhotoLink, setUploadPhotoLink] = useState(null);\r\n  const [showDialogUpload, setShowDialogUpload] = useState(false);\r\n  const [menuProfile, setMenuProfile] = useState(null);\r\n  const [photo, setPhoto] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    setName(user.displayName);\r\n\r\n    db.collection(\"users\")\r\n      .doc(user.uid)\r\n      .onSnapshot(function (doc) {\r\n        setPhoto(doc.data()?.photoURL);\r\n        setAbout(doc.data()?.about);\r\n      });\r\n  }, [user.uid, user.displayName, db]);\r\n\r\n  const updateName = (e) => {\r\n    e.preventDefault();\r\n\r\n    if (user.uid) {\r\n      db.collection(\"users\")\r\n        .doc(user.uid)\r\n        .update({\r\n          name: name,\r\n        })\r\n        .then(function () {\r\n          console.log(\"Document successfully updated!\");\r\n        })\r\n        .catch(function (error) {\r\n          // The document probably doesn't exist.\r\n          console.error(\"Error updating document: \", error);\r\n        });\r\n\r\n      auth.currentUser.updateProfile({\r\n        displayName: name,\r\n      });\r\n    }\r\n    setShowEditName(false);\r\n  };\r\n\r\n  const updateAbout = (e) => {\r\n    e.preventDefault();\r\n\r\n    if (user.uid) {\r\n      db.collection(\"users\")\r\n        .doc(user.uid)\r\n        .update({\r\n          about: about,\r\n        })\r\n        .then(function () {\r\n          console.log(\"Document successfully updated!\");\r\n        })\r\n        .catch(function (error) {\r\n          // The document probably doesn't exist.\r\n          console.error(\"Error updating document: \", error);\r\n        });\r\n    }\r\n    setShowEditAbout(false);\r\n  };\r\n\r\n  const editName = () => {\r\n    setShowEditName(true);\r\n  };\r\n\r\n  const editAbout = () => {\r\n    setShowEditAbout(true);\r\n  };\r\n\r\n  const handleDrawerClose = () => {\r\n    setDrawerLeft(false);\r\n    setShowEditName(false);\r\n    setShowEditAbout(false);\r\n  };\r\n\r\n  const viewPhoto = () => {\r\n    const viewPhoto = \"viewPhoto\";\r\n\r\n    if (user) {\r\n      setShowProfilePhoto(true);\r\n    } else {\r\n      toastInfo(\"You have no photo!\", viewPhoto, \"top-center\");\r\n    }\r\n    setMenuProfile(null);\r\n  };\r\n\r\n  const viewPhotoClose = () => {\r\n    setShowProfilePhoto(false);\r\n  };\r\n\r\n  const takePhoto = () => {\r\n    const takePhoto = \"takePhoto\";\r\n    toastInfo(\"Take photo is not yet available!\", takePhoto, \"top-center\");\r\n  };\r\n\r\n  const removedPhoto = () => {\r\n    const removedPhoto = \"removedPhoto\";\r\n    toastInfo(\r\n      \"Removed photo is not yet available!\",\r\n      removedPhoto,\r\n      \"top-center\"\r\n    );\r\n  };\r\n\r\n  const onFileChangeImage = async (e) => {\r\n    const imageFileSizeToastId = \"imageFileSizeToastId\";\r\n    const file = e.target.files[0];\r\n\r\n    if (file.size > 3 * 1024 * 1024) {\r\n      toastInfo(\r\n        \"Image should not exceed more than 3Mb\",\r\n        imageFileSizeToastId,\r\n        \"top-center\"\r\n      );\r\n    } else {\r\n      const storageRef = storage.ref();\r\n      if (user.isAnonymous === true) {\r\n        const imagesRef = storageRef.child(`user/anonymous/${user.uid}`);\r\n        const fileRef = imagesRef.child(file.name);\r\n        await fileRef.put(file);\r\n        setUploadPhotoLink(await fileRef.getDownloadURL());\r\n        console.log(\"uploading image\", uploadPhotoLink);\r\n      } else {\r\n        const imagesRef = storageRef.child(`user/regular/${user.uid}`);\r\n        const fileRef = imagesRef.child(file.name);\r\n        await fileRef.put(file);\r\n        setUploadPhotoLink(await fileRef.getDownloadURL());\r\n        console.log(\"uploading image\", uploadPhotoLink);\r\n      }\r\n    }\r\n    setMenuProfile(null);\r\n    setShowDialogUpload(true);\r\n  };\r\n\r\n  const uploadPhoto = () => {\r\n    return (\r\n      <div className=\"profileMenu_uploadPhoto\">\r\n        <label htmlFor=\"file-input\">Upload photo</label>\r\n        <input\r\n          id=\"file-input\"\r\n          type=\"file\"\r\n          onChange={onFileChangeImage}\r\n          accept=\"image/*\"\r\n        />\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const handleUploadPhoto = () => {\r\n    const uploadPhotoError = \"uploadPhotoError\";\r\n\r\n    if (uploadPhotoLink) {\r\n      auth.currentUser.updateProfile({\r\n        photoURL: uploadPhotoLink,\r\n      });\r\n      db.collection(\"users\").doc(user.uid).set(\r\n        {\r\n          photoURL: uploadPhotoLink,\r\n        },\r\n        { merge: true }\r\n      );\r\n      setShowDialogUpload(false);\r\n    } else {\r\n      toastInfo(\"Select photo to upload!\", uploadPhotoError, \"top-center\");\r\n    }\r\n  };\r\n\r\n  const handleDialogUploadClose = () => {\r\n    setShowDialogUpload(false);\r\n  };\r\n\r\n  const handleProfileMenu = (event) => {\r\n    setMenuProfile(event.currentTarget);\r\n  };\r\n\r\n  const handleProfileMenuClose = () => {\r\n    setMenuProfile(null);\r\n  };\r\n\r\n  const menuLists = [\r\n    {\r\n      title: \"View Photo\",\r\n      onClick: () => viewPhoto(),\r\n      id: Math.random() * 100000,\r\n    },\r\n    {\r\n      title: \"Take photo\",\r\n      onClick: () => takePhoto(),\r\n      id: Math.random() * 100000,\r\n    },\r\n    {\r\n      title: uploadPhoto(),\r\n      onClick: () => handleUploadPhoto(),\r\n      id: Math.random() * 100000,\r\n    },\r\n    {\r\n      title: \"Removed photo\",\r\n      onClick: () => removedPhoto(),\r\n      id: Math.random() * 100000,\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <div>\r\n      <Drawer\r\n        anchor=\"left\"\r\n        variant=\"persistent\"\r\n        open={drawerLeft}\r\n        classes={{ paper: classes.drawerPaper }}\r\n      >\r\n        <div className=\"drawerLeft__header\">\r\n          <div className=\"drawerLeft__header_container\">\r\n            <IconButton onClick={handleDrawerClose}>\r\n              <ArrowBackIcon />\r\n            </IconButton>\r\n            <p>Profile</p>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"drawerLeft__content\">\r\n          <div className=\"drawerLeft__content_photo\">\r\n            <div className=\"profilePhoto\">\r\n              <Zoom\r\n                in={drawerLeft}\r\n                style={{ transitionDelay: drawerLeft ? \"300ms\" : \"0ms\" }}\r\n              >\r\n                {photo ? (\r\n                  <Avatar src={photo} className=\"profilePhoto__layer_bottom\" />\r\n                ) : (\r\n                  <Avatar />\r\n                )}\r\n              </Zoom>\r\n              <div\r\n                className=\"profilePhoto__layer_top\"\r\n                onClick={handleProfileMenu}\r\n              >\r\n                <div className=\"profilePhoto__text\">\r\n                  <PhotoCameraIcon />\r\n                  <p>CHANGE</p>\r\n                  <p>PROFILE PHOTO</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <DropdownMenu\r\n              menuLists={menuLists}\r\n              menu={menuProfile}\r\n              handleMenuClose={handleProfileMenuClose}\r\n            />\r\n\r\n            <DialogCustom\r\n              open={showProfilePhoto}\r\n              close={viewPhotoClose}\r\n              photo={photo}\r\n              user={user}\r\n            />\r\n          </div>\r\n\r\n          <div className=\"profileMenu__diaglog\">\r\n            <Dialog\r\n              open={showDialogUpload}\r\n              onClose={handleDialogUploadClose}\r\n              aria-labelledby=\"form-dialog-title\"\r\n            >\r\n              <DialogTitle id=\"form-dialog-title-drawerLeft\">\r\n                Upload Photo\r\n              </DialogTitle>\r\n              <DialogContent id=\"form-dialog-content\">\r\n                <div className=\"profileMenu__uploadPhoto_dialog\">\r\n                  <img src={uploadPhotoLink} alt=\"\" />\r\n                </div>\r\n              </DialogContent>\r\n              <DialogActions>\r\n                <div className=\"profileMenu_uploadPhoto_iconButton\">\r\n                  <IconButton onClick={handleUploadPhoto}>\r\n                    <CheckIcon />\r\n                  </IconButton>\r\n                </div>\r\n              </DialogActions>\r\n            </Dialog>\r\n          </div>\r\n\r\n          <div className=\"drawerLeft__content_name\">\r\n            <p>Your Name</p>\r\n            <form>\r\n              {showEditName ? (\r\n                <>\r\n                  <input\r\n                    value={name}\r\n                    onChange={(e) => setName(e.target.value)}\r\n                    type=\"text\"\r\n                    styles={{ borderBottom: \"1px solid green !important\" }}\r\n                  />\r\n                  <CheckIcon onClick={updateName} />\r\n                </>\r\n              ) : (\r\n                <>\r\n                  <span>{name}</span>\r\n                  <EditIcon onClick={editName} />\r\n                </>\r\n              )}\r\n            </form>\r\n          </div>\r\n\r\n          <div className=\"drawerLeft__note\">\r\n            <span>\r\n              This is not your username or pin. This name will be visible to\r\n              your Tattle contacts.\r\n            </span>\r\n          </div>\r\n\r\n          <div className=\"drawerLeft__content_name\">\r\n            <p>About</p>\r\n            <form>\r\n              {showEditAbout ? (\r\n                <>\r\n                  <input\r\n                    value={about}\r\n                    onChange={(e) => setAbout(e.target.value)}\r\n                    type=\"text\"\r\n                  />\r\n                  <CheckIcon onClick={updateAbout} />\r\n                </>\r\n              ) : (\r\n                <>\r\n                  <span>{about}</span>\r\n                  <EditIcon onClick={editAbout} />\r\n                </>\r\n              )}\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </Drawer>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default DrawerLeft;\r\n","import React, { useState } from 'react';\r\nimport SearchOutlinedIcon from '@material-ui/icons/SearchOutlined';\r\nimport ArrowForwardIcon from '@material-ui/icons/ArrowForward';\r\nimport './SearchBar.css';\r\n\r\nfunction SearchBar( { placeholder, setSearch, search } ) {\r\n    const [showArrowIcon, setShowArrowIcon] = useState(false);\r\n\r\n    const displaySearchIcon = () => {\r\n        setShowArrowIcon(false);\r\n    }\r\n    \r\n    const displayArrowIcon = () => {\r\n        setShowArrowIcon(true);\r\n    }\r\n\r\n    return (\r\n        <div className={`search ${showArrowIcon===true && \"search__bgColorChange\"}`}>\r\n            <div className=\"search__container\">\r\n                <span className={`${showArrowIcon===true?\"arroww\":''}`}>{showArrowIcon? <ArrowForwardIcon />:<SearchOutlinedIcon/>}</span>\r\n                <input \r\n                    value={search} \r\n                    onChange={e => setSearch(e.target.value)} \r\n                    type=\"text\" \r\n                    placeholder={placeholder} \r\n                    required\r\n                    onFocus={displayArrowIcon}\r\n                    onBlur={displaySearchIcon}\r\n                />\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default SearchBar","import React, { useEffect, useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport Avatar from \"@material-ui/core/Avatar\";\r\nimport PhotoCameraIcon from \"@material-ui/icons/PhotoCamera\";\r\nimport VideocamIcon from \"@material-ui/icons/Videocam\";\r\nimport db from \"../firebase\";\r\nimport \"./SidebarChat.css\";\r\n// console.log(use.uid);\r\n\r\nconst CryptoJS = require(\"crypto-js\");\r\nfunction SidebarChat({ id, name }) {\r\n  const [messages, setMessages] = useState([]);\r\n\r\n  useEffect(() => {\r\n    fetchRooms();\r\n  }, [id]);\r\n\r\n  const fetchRooms = () => {\r\n    if (id) {\r\n      db.collection(\"rooms\")\r\n        .doc(id)\r\n        .collection(\"messages\")\r\n        .orderBy(\"timestamp\", \"desc\")\r\n        .onSnapshot((snapshot) =>\r\n          setMessages(snapshot.docs.map((doc) => doc.data()))\r\n        );\r\n    }\r\n  };\r\n\r\n  const decrypt = (data) => {\r\n    const bytes = CryptoJS.AES.decrypt(data, \"my-secret-key@123\");\r\n    const decryptedData = bytes.toString(CryptoJS.enc.Utf8);\r\n    // return decryptedData\r\n    return data ? decryptedData : data;\r\n  };\r\n  return (\r\n    <Link to={`/rooms/${id}`} className=\"sidebarChat__link\">\r\n      <div className=\"sidebarChat\">\r\n        <Avatar>{name[0]}</Avatar>\r\n        <div className=\"sidebarChat__info\">\r\n          <h2>{name}</h2>\r\n          {messages[0]?.photo ? (\r\n            <div className=\"sideChat__photo\">\r\n              <PhotoCameraIcon /> <span>Photo</span>\r\n            </div>\r\n          ) : null}\r\n          {messages[0]?.video ? (\r\n            <div className=\"sideChat__photo\">\r\n              <VideocamIcon /> <span>Video</span>\r\n            </div>\r\n          ) : null}\r\n          <p>{messages[0]?.message ? decrypt(messages[0]?.message) : \"\"}</p>\r\n          <p>{messages[0]?.url}</p>\r\n        </div>\r\n      </div>\r\n    </Link>\r\n  );\r\n}\r\n\r\nexport default SidebarChat;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport Avatar from \"@material-ui/core/Avatar\";\r\nimport PhotoCameraIcon from \"@material-ui/icons/PhotoCamera\";\r\nimport VideocamIcon from \"@material-ui/icons/Videocam\";\r\nimport db from \"../firebase\";\r\nimport \"./SidebarChat.css\";\r\n// console.log(use.uid);\r\n\r\nfunction SidebarUserList({ data }) {\r\n  return (\r\n    <Link to=\"\" className=\"sidebarChat__link\">\r\n      <div className=\"sidebarChat\">\r\n        <Avatar src={data.photoURL}></Avatar>\r\n        <div className=\"sidebarChat__info\">\r\n          <h2>{data.name}</h2>\r\n          <p>{data.email}</p>\r\n        </div>\r\n      </div>\r\n    </Link>\r\n  );\r\n}\r\nexport default SidebarUserList;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { useHistory, useParams } from \"react-router-dom\";\r\n// import { useStateValue } from \"../StateProvider\";\r\n//importing components\r\n//importing material-ui\r\nimport Drawer from \"@material-ui/core/Drawer\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport SearchBar from \"../shared/SearchBar\";\r\nimport SidebarChat from \"./SidebarChat\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\n//importing material-ui-icons\r\nimport ArrowBackIcon from \"@material-ui/icons/ArrowBack\";\r\n//importing styles\r\nimport \"./Drawer2.css\";\r\nimport SidebarUserList from \"./SiderbarUserList\";\r\n// import \"./Sidebar.css\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: \"flex\",\r\n  },\r\n  drawerPaper: {\r\n    position: \"absolute\",\r\n  },\r\n}));\r\n\r\nfunction Drawer2({\r\n  drawer2,\r\n  setDrawer2,\r\n  rooms,\r\n  setIsRoomExist,\r\n  isRoomExist,\r\n  userData,\r\n}) {\r\n  const classes = useStyles();\r\n  const history = useHistory();\r\n  const { roomId } = useParams();\r\n\r\n  const [search, setSearch] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n  const [noRooms, setNoRooms] = useState(false);\r\n\r\n  const handleDrawerClose = () => {\r\n    setDrawer2(false);\r\n  };\r\n\r\n  const findUser = function (myUsers) {\r\n    return function (x) {\r\n      var searchRoom = x.name + \"\";\r\n      return (\r\n        searchRoom.toLowerCase().includes(myUsers.toLowerCase()) || !myUsers\r\n      );\r\n    };\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Drawer\r\n        anchor=\"left\"\r\n        variant=\"persistent\"\r\n        open={drawer2}\r\n        classes={{ paper: classes.drawerPaper }}\r\n      >\r\n        <div className=\"drawerLeft__header\">\r\n          <div className=\"drawerLeft__header_container\">\r\n            <IconButton onClick={handleDrawerClose}>\r\n              <ArrowBackIcon />\r\n            </IconButton>\r\n            <p>Add User</p>\r\n          </div>\r\n        </div>\r\n        <div className=\"drawerLeft__content\">\r\n          <SearchBar\r\n            search={search}\r\n            setSearch={setSearch}\r\n            placeholder=\"Search or start new chat\"\r\n          />\r\n          <div className=\"drawerLeft__not\">\r\n            <span>Select or Search for your new friends here at Tattle.</span>\r\n          </div>\r\n          <div className=\"sidebar__chats\">\r\n            {loading === false ? (\r\n              <>\r\n                {search ? (\r\n                  <>\r\n                    <div>\r\n                      {userData ? (\r\n                        userData\r\n                          .filter(findUser(search))\r\n                          .map((user) => <SidebarUserList data={user} />)\r\n                      ) : (\r\n                        <div className=\"sidebar__chatsContainer_empty\">\r\n                          <span>No Users searched found</span>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  </>\r\n                ) : (\r\n                  <>\r\n                    {userData ? (\r\n                      userData.map((user) => <SidebarUserList data={user} />)\r\n                    ) : (\r\n                      <div className=\"sidebar__chatsContainer_empty\">\r\n                        <span>No Users found</span>\r\n                      </div>\r\n                    )}\r\n                  </>\r\n                )}\r\n              </>\r\n            ) : (\r\n              <div className=\"sidebar__chatsContainer_loading\">\r\n                <div>\r\n                  <CircularProgress />\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {noRooms && loading ? (\r\n              <div className=\"sidebar__chatsContainer_empty\">\r\n                <span>No chats</span>\r\n              </div>\r\n            ) : null}\r\n          </div>\r\n        </div>\r\n      </Drawer>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Drawer2;\r\n","import React from 'react';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\nimport IconButton from '@material-ui/core/IconButton';\r\n\r\nfunction TooltipCustom( { name, icon, onClick }) {\r\n    return (\r\n        <div>\r\n            <Tooltip title={<span style={{fontSize: '14px', \r\n                padding: '8px 5px 8px 5px'}}>{name}</span>} \r\n                placement=\"bottom-end\">\r\n                <IconButton onClick={onClick}>\r\n                    {icon}\r\n                </IconButton>\r\n            </Tooltip>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default TooltipCustom\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { useHistory, useParams } from \"react-router-dom\";\r\nimport { useStateValue } from \"../StateProvider\";\r\n//importing firebase\r\nimport db from \"../firebase\";\r\nimport { auth, storage } from \"../firebase\";\r\n//importing components\r\nimport UserAvatar from \"./UserAvatar\";\r\nimport ChatIcon from \"@material-ui/icons/Chat\";\r\nimport DropdownMenu from \"../shared/DropdownMenu\";\r\nimport DrawerLeft from \"./DrawerLeft\";\r\nimport Drawer2 from \"./Drawer2\";\r\nimport SearchBar from \"../shared/SearchBar\";\r\nimport SidebarChat from \"./SidebarChat\";\r\nimport { toastInfo } from \"../shared/toastInfo\";\r\nimport TooltipCustom from \"../shared/TooltipCustom\";\r\n//importing material-ui\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport MoreVertIcon from \"@material-ui/icons/MoreVert\";\r\n//importing styles\r\nimport \"./Sidebar.css\";\r\n\r\nfunction Sidebar({ rooms, setIsRoomExist, isRoomExist }) {\r\n  const history = useHistory();\r\n  const { roomId } = useParams();\r\n  const [{ user }] = useStateValue();\r\n\r\n  const [search, setSearch] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n  const [noRooms, setNoRooms] = useState(false);\r\n  const [drawerLeft, setDrawerLeft] = useState(false);\r\n  const [drawer2, setDrawer2] = useState(false);\r\n  const [menuSidebar, setMenuSidebar] = useState(null);\r\n  const [userData, setUserData] = useState(null);\r\n  const [isSearchFound, setIsSetSearchFound] = useState(false);\r\n\r\n  const findRoom = function (myRooms) {\r\n    return function (x) {\r\n      var searchRoom = x.data.name + \"\";\r\n      return (\r\n        searchRoom.toLowerCase().includes(myRooms.toLowerCase()) || !myRooms\r\n      );\r\n    };\r\n  };\r\n\r\n  useEffect(() => {\r\n    const roomResult = () => {\r\n      return (\r\n        <>\r\n          {rooms.filter(findRoom(search)).map((room) => (\r\n            <p key={room.id}>{room.name}</p>\r\n          ))}\r\n        </>\r\n      );\r\n    };\r\n\r\n    if (search) {\r\n      var result = roomResult();\r\n      if (result.props.children.length > 0) {\r\n        setIsSetSearchFound(true);\r\n      } else {\r\n        setIsSetSearchFound(false);\r\n      }\r\n    }\r\n\r\n    var roomList = rooms;\r\n    if (roomList) {\r\n      const index = roomList.findIndex(function (id, index) {\r\n        return id.id === roomId;\r\n      });\r\n\r\n      if (index >= 0) {\r\n        setIsRoomExist(index);\r\n      } else if (index === -1) {\r\n        setIsRoomExist(index);\r\n        history.push(\"/\");\r\n      }\r\n    }\r\n  }, [search, rooms, roomId, history, setIsRoomExist]);\r\n\r\n  useEffect(() => {\r\n    if (rooms) {\r\n      if (rooms.length > 0) {\r\n        setNoRooms(false);\r\n        setLoading(true);\r\n      } else if (rooms.length === 0 && isRoomExist === -1) {\r\n        setNoRooms(true);\r\n        setLoading(true);\r\n      }\r\n    }\r\n  }, [isRoomExist, rooms]);\r\n\r\n  useEffect(() => {\r\n    fetchUser();\r\n  }, [userData]);\r\n\r\n  const fetchUser = () => {\r\n    db.collection(\"users\").onSnapshot((snapshot) =>\r\n      setUserData(snapshot.docs.map((doc) => doc.data()))\r\n    );\r\n  };\r\n\r\n  const handleDrawerLeftOpen = () => {\r\n    setMenuSidebar(null);\r\n    setDrawerLeft(true);\r\n  };\r\n  const handleDrawer2Open = () => {\r\n    setMenuSidebar(null);\r\n    setDrawer2(true);\r\n  };\r\n  const handleMenuOpen = (event) => {\r\n    setMenuSidebar(event.currentTarget);\r\n  };\r\n\r\n  const handleMenuClose = () => {\r\n    setMenuSidebar(null);\r\n  };\r\n\r\n  const archive = () => {\r\n    const archive = \"archive\";\r\n    toastInfo(\"Archive is not yet available!\", archive, \"top-center\");\r\n  };\r\n\r\n  const starred = () => {\r\n    const starred = \"starred\";\r\n    toastInfo(\"Starred is not yet available!\", starred, \"top-center\");\r\n  };\r\n\r\n  const settings = () => {\r\n    const settings = \"settings\";\r\n    toastInfo(\"Settings is not yet available!\", settings, \"top-center\");\r\n  };\r\n\r\n  const logout = () => {\r\n    if (user.isAnonymous === true) {\r\n      auth.currentUser\r\n        .delete()\r\n        .then(function () {\r\n          history.push(\"/\");\r\n        })\r\n        .catch(function (error) {\r\n          // An error happened.\r\n          console.log(\"error deleting anonymous user\", error);\r\n        });\r\n    } else {\r\n      auth.signOut();\r\n    }\r\n  };\r\n\r\n  const menuLists = [\r\n    {\r\n      title: \"Profile\",\r\n      onClick: () => handleDrawerLeftOpen(),\r\n      id: Math.random() * 100000,\r\n    },\r\n    {\r\n      title: \"Archived\",\r\n      onClick: () => archive(),\r\n      id: Math.random() * 100000,\r\n    },\r\n    {\r\n      title: \"Starred\",\r\n      onClick: () => starred(),\r\n      id: Math.random() * 100000,\r\n    },\r\n    {\r\n      title: \"Settings\",\r\n      onClick: () => settings(),\r\n      id: Math.random() * 100000,\r\n    },\r\n    {\r\n      title: \"Logout\",\r\n      onClick: () => logout(),\r\n      id: Math.random() * 100000,\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <div className=\"sidebar\">\r\n      <div className=\"sidebar__header\">\r\n        <UserAvatar\r\n          id=\"UserProfile\"\r\n          photoURL={user.photoURL}\r\n          onClick={() => handleDrawerLeftOpen()}\r\n        />\r\n        <DrawerLeft\r\n          drawerLeft={drawerLeft}\r\n          setDrawerLeft={setDrawerLeft}\r\n          db={db}\r\n          auth={auth}\r\n          storage={storage}\r\n        />\r\n\r\n        <div className=\"sidebar__headerRight\">\r\n          <Drawer2\r\n            drawer2={drawer2}\r\n            setDrawer2={setDrawer2}\r\n            userData={userData}\r\n            db={db}\r\n            auth={auth}\r\n            storage={storage}\r\n          />\r\n          <TooltipCustom\r\n            icon={<ChatIcon style={{ color: \"#de5751\" }} />}\r\n            name=\"New Chat\"\r\n            onClick={() => handleDrawer2Open()}\r\n          />\r\n          <TooltipCustom\r\n            name=\"Menu\"\r\n            icon={<MoreVertIcon style={{ color: \"#de5751\" }} />}\r\n            onClick={handleMenuOpen}\r\n          />\r\n          <DropdownMenu\r\n            menuLists={menuLists}\r\n            menu={menuSidebar}\r\n            handleMenuOpen={handleMenuOpen}\r\n            handleMenuClose={handleMenuClose}\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      <SearchBar\r\n        search={search}\r\n        setSearch={setSearch}\r\n        placeholder=\"Search or start new chat\"\r\n      />\r\n\r\n      <div className=\"sidebar__chats\">\r\n        {loading ? (\r\n          <>\r\n            {search ? (\r\n              <>\r\n                {isSearchFound ? (\r\n                  <div>\r\n                    {rooms.filter(findRoom(search)).map((room) => (\r\n                      <SidebarChat\r\n                        key={room.id}\r\n                        id={room.id}\r\n                        name={room.data.name}\r\n                      />\r\n                    ))}\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"sidebar__chatsContainer_empty\">\r\n                    <span>No chat room found</span>\r\n                  </div>\r\n                )}\r\n              </>\r\n            ) : (\r\n              <>\r\n                {rooms.map((room) => (\r\n                  <SidebarChat\r\n                    key={room.id}\r\n                    id={room.id}\r\n                    name={room.data.name}\r\n                    owner={room.data.roomOwner}\r\n                  />\r\n                ))}\r\n              </>\r\n            )}\r\n          </>\r\n        ) : (\r\n          <div className=\"sidebar__chatsContainer_loading\">\r\n            <div>\r\n              <CircularProgress />\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {noRooms && loading ? (\r\n          <div className=\"sidebar__chatsContainer_empty\">\r\n            <span>No chats</span>\r\n          </div>\r\n        ) : null}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Sidebar;\r\n","import React from \"react\";\r\n//importing material-ui\r\nimport Drawer from \"@material-ui/core/Drawer\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n//importing styles\r\nimport \"./DrawerRight.css\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: \"flex\",\r\n  },\r\n  drawerPaper: {\r\n    [theme.breakpoints.only(\"xs\")]: {\r\n      width: \"100vw\",\r\n    },\r\n    [theme.breakpoints.up(\"sm\")]: {\r\n      position: \"absolute\",\r\n    },\r\n  },\r\n}));\r\n\r\nfunction DrawerRight({ content, drawerRight }) {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <div>\r\n      <Drawer\r\n        anchor=\"right\"\r\n        variant=\"persistent\"\r\n        open={drawerRight}\r\n        classes={{ paper: classes.drawerPaper }}\r\n      >\r\n        {content}\r\n      </Drawer>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default DrawerRight;\r\n","import React, { useState, useEffect } from \"react\";\r\n//importing components\r\nimport SearchBar from \"../shared/SearchBar\";\r\n//importing material-ui\r\nimport DrawerRight from \"./DrawerRight\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\n//importing material-ui-icons\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport DoneIcon from \"@material-ui/icons/Done\";\r\n//importing styles\r\nimport \"./DrawerRightSearch.css\";\r\nconst CryptoJS = require(\"crypto-js\");\r\n\r\nfunction DrawerRightSearch({\r\n  drawerRightSearch,\r\n  setDrawerRightSearch,\r\n  messages,\r\n  user,\r\n}) {\r\n  const [search, setSearch] = useState(\"\");\r\n  const [isFoundMessage, setIsFoundMessage] = useState(false);\r\n\r\n  const findMessage = function (myMessages) {\r\n    return function (x) {\r\n      var searchMessage = x.message + \"\" + x.caption;\r\n      return (\r\n        searchMessage.toLowerCase().includes(myMessages.toLowerCase()) ||\r\n        !myMessages\r\n      );\r\n    };\r\n  };\r\n  const decrypt = (data) => {\r\n    const bytes = CryptoJS.AES.decrypt(data, \"my-secret-key@123\");\r\n    const decryptedData = bytes.toString(CryptoJS.enc.Utf8);\r\n    // return decryptedData\r\n    return data ? decryptedData : data;\r\n  };\r\n  const encrypt = (data) => {\r\n    const text = CryptoJS.AES.encrypt(data, \"my-secret-key@123\").toString();\r\n  };\r\n  useEffect(() => {\r\n    const messageResult = () => {\r\n      return (\r\n        <>\r\n          {messages.filter(findMessage(search)).map((message) => (\r\n            <p key={message.id}>\r\n              {message.message ? decrypt(message.message) : \"\"}\r\n              {message.caption}\r\n            </p>\r\n          ))}\r\n        </>\r\n      );\r\n    };\r\n\r\n    if (search) {\r\n      var result = messageResult();\r\n      // console.log(\"result\", result.props.children)\r\n      if (result.props.children.length > 0) {\r\n        setIsFoundMessage(true);\r\n        console.log(\"search message sucess\");\r\n      } else {\r\n        setIsFoundMessage(false);\r\n        console.log(\"search message fail\");\r\n      }\r\n    }\r\n  }, [search, messages]);\r\n\r\n  const handleDrawerClose = () => {\r\n    setDrawerRightSearch(false);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <DrawerRight\r\n        drawerRight={drawerRightSearch}\r\n        content={\r\n          <>\r\n            <div className=\"drawerRight__header\">\r\n              <IconButton onClick={handleDrawerClose}>\r\n                <CloseIcon />\r\n              </IconButton>\r\n              <p>Search Messages</p>\r\n            </div>\r\n\r\n            <SearchBar\r\n              search={search}\r\n              setSearch={setSearch}\r\n              placeholder=\"Search...\"\r\n            />\r\n\r\n            <div\r\n              className={`drawerRight__content ${\r\n                isFoundMessage === true &&\r\n                search.length > 0 &&\r\n                \"drawerRight__content_searched\"\r\n              }`}\r\n            >\r\n              {search.length > 0 ? (\r\n                <>\r\n                  {isFoundMessage ? (\r\n                    <>\r\n                      {messages.filter(findMessage(search)).map((message) => (\r\n                        <div\r\n                          key={message.id}\r\n                          className=\"drawerRight__content_searched_message\"\r\n                        >\r\n                          <p>\r\n                            {new Date(\r\n                              message.timestamp?.toDate()\r\n                            ).toLocaleTimeString(\"en-US\", {\r\n                              hour: \"numeric\",\r\n                              hour12: true,\r\n                              minute: \"numeric\",\r\n                            })}\r\n                            <br />\r\n                          </p>\r\n                          <p id=\"last_p\">\r\n                            {message.uid === user.uid ? <DoneIcon /> : null}\r\n                            {message.message ? decrypt(message.message) : \"\"}\r\n                            {message.caption}\r\n                          </p>\r\n                          <Divider />\r\n                        </div>\r\n                      ))}\r\n                    </>\r\n                  ) : (\r\n                    <p>No message found</p>\r\n                  )}\r\n                </>\r\n              ) : (\r\n                <p>Search for messages in this room.</p>\r\n              )}\r\n            </div>\r\n          </>\r\n        }\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default DrawerRightSearch;\r\n","import React from \"react\";\r\n\r\nimport DrawerRight from \"./DrawerRight\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Zoom from \"@material-ui/core/Zoom\";\r\n// import Drawer from \"@material-ui/core/Drawer\";\r\nimport Avatar from \"@material-ui/core/Avatar\";\r\n\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\n// import DoneIcon from \"@material-ui/icons/Done\";\r\nimport PhotoCameraIcon from \"@material-ui/icons/PhotoCamera\";\r\nimport GroupIcon from \"@material-ui/icons/Group\";\r\n//importing styles\r\nimport \"./DrawerRightInfo.css\";\r\n\r\nfunction DrawerRightInfo({\r\n  drawerRightInfo,\r\n  setDrawerRightInfo,\r\n  messages,\r\n  user,\r\n}) {\r\n  const handleDrawerClose = () => {\r\n    setDrawerRightInfo(false);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <DrawerRight\r\n        drawerRight={drawerRightInfo}\r\n        content={\r\n          <>\r\n            <div className=\"drawer-right-info__header\">\r\n              <IconButton onClick={handleDrawerClose}>\r\n                <CloseIcon style={{ color: \"#de5751\" }} />\r\n              </IconButton>\r\n              <p style={{ color: \"#de5751\" }}>Contact Info</p>\r\n            </div>\r\n            <div className=\"drawer-right-info-content\">\r\n              <div className=\"drawer-right-info-content__photo\">\r\n                <div className=\"profilePhoto\">\r\n                  <Zoom\r\n                    in={drawerRightInfo}\r\n                    style={{\r\n                      transitionDelay: drawerRightInfo ? \"300ms\" : \"0ms\",\r\n                    }}\r\n                  >\r\n                    <Avatar>\r\n                      <GroupIcon />\r\n                    </Avatar>\r\n                  </Zoom>\r\n                  <div className=\"profilePhoto__layer_top\">\r\n                    <div className=\"profilePhoto__text\">\r\n                      <PhotoCameraIcon />\r\n                      <p>CHANGE</p>\r\n                      <p>PROFILE PHOTO</p>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </>\r\n        }\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default DrawerRightInfo;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { useStateValue } from \"../StateProvider\";\r\n//importing components\r\nimport DropdownMenu from \"../shared/DropdownMenu\";\r\nimport DrawerRightSearch from \"./DrawerRightSearch\";\r\nimport DrawerRightInfo from \"./DrawerRightInfo\";\r\nimport TooltipCustom from \"../shared/TooltipCustom\";\r\nimport { toastInfo } from \"../shared/toastInfo\";\r\n//importing material-ui\r\nimport Hidden from \"@material-ui/core/Hidden\";\r\nimport Avatar from \"@material-ui/core/Avatar\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\n//importing material-ui-icons\r\nimport SearchOutlinedIcon from \"@material-ui/icons/SearchOutlined\";\r\nimport ArrowBackIcon from \"@material-ui/icons/ArrowBack\";\r\nimport MoreVertIcon from \"@material-ui/icons/MoreVert\";\r\n//importing styles\r\nimport \"./ChatHeader.css\";\r\n\r\nfunction ChatHeader({\r\n  roomCreatedBy,\r\n  roomOwner,\r\n  roomName,\r\n  roomId,\r\n  _roomId,\r\n  messages,\r\n  db,\r\n  history,\r\n  isRoomExist,\r\n}) {\r\n  const [{ user }] = useStateValue();\r\n  const [drawerRightSearch, setDrawerRightSearch] = useState(false);\r\n  const [drawerRightInfo, setDrawerRightInfo] = useState(false);\r\n  const [menuChat, setMenuChat] = useState(null);\r\n  const [role, setRole] = useState(\"\");\r\n  const [showDate, setShowDate] = useState(false);\r\n  const [isLastMessage, setIsLastMessage] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const errorAbout = \"errorAbout\";\r\n    if (user.uid) {\r\n      db.collection(\"users\")\r\n        .doc(user.uid)\r\n        .get()\r\n        .then(function (doc) {\r\n          if (doc.exists) {\r\n            setRole(doc.data().role);\r\n          }\r\n        })\r\n        .catch(function (error) {\r\n          toastInfo(`${error}`, errorAbout, \"top-center\");\r\n        });\r\n    }\r\n\r\n    if (messages[messages.length - 1]?.timestamp) {\r\n      setShowDate(true);\r\n    } else {\r\n      setShowDate(false);\r\n    }\r\n\r\n    if (messages[messages.length - 1]) {\r\n      setIsLastMessage(true);\r\n    } else {\r\n      setIsLastMessage(false);\r\n    }\r\n\r\n    //listens when room is changed, then it closes DrawerRight\r\n    if (isRoomExist >= 0) {\r\n      setDrawerRightInfo(false);\r\n      setDrawerRightSearch(false);\r\n    }\r\n  }, [\r\n    user.uid,\r\n    user.displayName,\r\n    user.isAnonymous,\r\n    db,\r\n    messages,\r\n    roomId,\r\n    isRoomExist,\r\n  ]);\r\n\r\n  // console.log(\"ROOOM ID\", roomId);\r\n  // console.log(\"__ROOOM ID\", _roomId);\r\n\r\n  const getDateFromMessage = () => {\r\n    return new Date(\r\n      messages[messages.length - 1]?.timestamp?.toDate()\r\n    ).toLocaleTimeString([], {\r\n      weekday: \"long\",\r\n      year: \"numeric\",\r\n      month: \"long\",\r\n      day: \"numeric\",\r\n      hour: \"numeric\",\r\n      hour12: true,\r\n      minute: \"numeric\",\r\n    });\r\n  };\r\n\r\n  const getDateLocal = () => {\r\n    return new Date().toLocaleTimeString([], {\r\n      weekday: \"long\",\r\n      year: \"numeric\",\r\n      month: \"long\",\r\n      day: \"numeric\",\r\n      hour: \"numeric\",\r\n      hour12: true,\r\n      minute: \"numeric\",\r\n    });\r\n  };\r\n\r\n  const searchMessage = () => {\r\n    setDrawerRightSearch(true);\r\n  };\r\n\r\n  const contactInfo = () => {\r\n    setDrawerRightInfo(true);\r\n    setMenuChat(null);\r\n  };\r\n\r\n  const selectMessages = () => {\r\n    const selectMessages = \"selectMessages\";\r\n    toastInfo(\r\n      \"Select Messages is not yet  available!\",\r\n      selectMessages,\r\n      \"top-center\"\r\n    );\r\n  };\r\n\r\n  const muteNotifications = () => {\r\n    const muteNotifications = \"muteNotifications\";\r\n    toastInfo(\r\n      \"Mute Notifications is not yet available!\",\r\n      muteNotifications,\r\n      \"top-center\"\r\n    );\r\n  };\r\n\r\n  const clearMessages = () => {\r\n    const clearMessages = \"clearMessages\";\r\n    toastInfo(\r\n      \"Clear Messages is not yet available!\",\r\n      clearMessages,\r\n      \"top-center\"\r\n    );\r\n  };\r\n\r\n  const deleteRoom = () => {\r\n    const roomDeleted = \"roomDeleted\";\r\n\r\n    if (roomOwner === user.uid || role === \"admin\") {\r\n      db.collection(\"rooms\")\r\n        .doc(roomId)\r\n        .delete()\r\n        .then(function () {\r\n          toastInfo(\"Room successfully deleted!\", roomDeleted, \"top-center\");\r\n        })\r\n        .catch(function (error) {\r\n          toastInfo(`Error removing room! ${error}`, roomDeleted, \"top-center\");\r\n        });\r\n      history.push(\"/\");\r\n    } else {\r\n      toastInfo(\r\n        `You are not allowed to delete room ${roomName}. Only the admin or room owner ${roomCreatedBy}`,\r\n        roomDeleted,\r\n        \"top-center\"\r\n      );\r\n    }\r\n  };\r\n\r\n  const handleMenuClose = () => {\r\n    setMenuChat(null);\r\n  };\r\n\r\n  const handleMenuOpen = (event) => {\r\n    setMenuChat(event.currentTarget);\r\n  };\r\n\r\n  const menuChatLists = [\r\n    {\r\n      title: \"Contact info\",\r\n      onClick: () => contactInfo(),\r\n      id: Math.random() * 100000,\r\n    },\r\n    {\r\n      title: \"Select messages\",\r\n      onClick: () => selectMessages(),\r\n      id: Math.random() * 100000,\r\n    },\r\n    {\r\n      title: \"Mute notifications\",\r\n      onClick: () => muteNotifications(),\r\n      id: Math.random() * 100000,\r\n    },\r\n    {\r\n      title: \"Clear messages\",\r\n      onClick: () => clearMessages(),\r\n      id: Math.random() * 100000,\r\n    },\r\n    {\r\n      title: \"Delete Room\",\r\n      onClick: () => deleteRoom(),\r\n      id: Math.random() * 100000,\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <div className=\"chat__header\">\r\n      <DrawerRightSearch\r\n        drawerRightSearch={drawerRightSearch}\r\n        setDrawerRightSearch={setDrawerRightSearch}\r\n        roomId={roomId}\r\n        messages={messages}\r\n        db={db}\r\n        user={user}\r\n      />\r\n\r\n      <DrawerRightInfo\r\n        drawerRightInfo={drawerRightInfo}\r\n        setDrawerRightInfo={setDrawerRightInfo}\r\n        roomId={roomId}\r\n        messages={messages}\r\n        db={db}\r\n        user={user}\r\n      />\r\n\r\n      <Hidden smUp>\r\n        <Link to=\"/\">\r\n          <div className=\"chat__back_button\">\r\n            <IconButton>\r\n              <ArrowBackIcon style={{ color: \"#de5751\" }} />\r\n            </IconButton>\r\n          </div>\r\n        </Link>\r\n      </Hidden>\r\n\r\n      <Avatar>{roomName[0]}</Avatar>\r\n      <div className=\"chat__headerInfo\">\r\n        <h3>{roomName}</h3>\r\n\r\n        {isLastMessage ? (\r\n          <>\r\n            {showDate ? (\r\n              <p>Last seen {getDateFromMessage()}</p>\r\n            ) : (\r\n              <p>Last seen {getDateLocal()}</p>\r\n            )}\r\n          </>\r\n        ) : null}\r\n      </div>\r\n\r\n      <div className=\"chat__headerRight\">\r\n        <TooltipCustom\r\n          name=\"Search\"\r\n          icon={<SearchOutlinedIcon style={{ color: \"#de5751\" }} />}\r\n          onClick={searchMessage}\r\n        />\r\n        <TooltipCustom\r\n          name=\"Menu\"\r\n          icon={<MoreVertIcon style={{ color: \"#de5751\" }} />}\r\n          onClick={handleMenuOpen}\r\n        />\r\n        <DropdownMenu\r\n          menuLists={menuChatLists}\r\n          menu={menuChat}\r\n          handleMenuOpen={handleMenuOpen}\r\n          handleMenuClose={handleMenuClose}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ChatHeader;\r\n","import React, { useEffect, useRef, useState } from \"react\";\r\nimport ReactPlayer from \"react-player\";\r\n// importing component\r\n//importing material-ui-icon\r\nimport LockIcon from \"@material-ui/icons/Lock\";\r\nimport AlarmIcon from \"@material-ui/icons/Alarm\";\r\nimport DoneIcon from \"@material-ui/icons/Done\";\r\n//importing styles\r\nimport \"./ChatBody.css\";\r\nconst CryptoJS = require(\"crypto-js\");\r\n\r\nfunction ChatBody({\r\n  roomOwner,\r\n  roomCreatedBy,\r\n  messages,\r\n  user,\r\n  roomId,\r\n  isRoomExist,\r\n}) {\r\n  const decrypt = (data) => {\r\n    const bytes = CryptoJS.AES.decrypt(data, \"my-secret-key@123\");\r\n    const decryptedData = bytes.toString(CryptoJS.enc.Utf8);\r\n    // return decryptedData\r\n    return data ? decryptedData : data;\r\n  };\r\n  const messagesEndRef = useRef(null);\r\n  const [playing, setPlaying] = useState(false);\r\n\r\n  useEffect(() => {\r\n    //listens when room is changed, then it sets playing to false\r\n    if (isRoomExist >= 0) {\r\n      setPlaying(false);\r\n    }\r\n  }, [isRoomExist]);\r\n\r\n  const handlePlay = () => {\r\n    setPlaying(true);\r\n  };\r\n\r\n  const handlePause = () => {\r\n    setPlaying(false);\r\n  };\r\n\r\n  const scrollToBottom = () => {\r\n    if (roomId) {\r\n      messagesEndRef.current.scrollIntoView({ behavior: \"auto\" });\r\n    }\r\n  };\r\n  useEffect(scrollToBottom, [messages, roomId]);\r\n\r\n  return (\r\n    <div>\r\n      <p className=\"chat__message_reminder\">\r\n        <LockIcon /> Welcome to Tattle. Messages are encrpyted.\r\n      </p>\r\n      <p className=\"chat__message_reminder chat__createdBy\">\r\n        {roomOwner === user.uid\r\n          ? \"You created this group\"\r\n          : `${roomCreatedBy} created this group`}\r\n      </p>\r\n\r\n      {messages.map((message) => (\r\n        <div\r\n          key={message.id}\r\n          className={`chat__message \r\n                    ${message.uid === user.uid && \"chat__sender\"} \r\n                    ${message.photo && \"chat__message_media_image\"}\r\n                    ${message.video && \"chat__message_media_video\"}\r\n                    ${\r\n                      message.video &&\r\n                      !message.caption &&\r\n                      \"chat__message_media_video_noCaption\"\r\n                    } `}\r\n        >\r\n          <span\r\n            className={`chat__name ${\r\n              message.uid === user.uid && \"chat__name_sender\"\r\n            }`}\r\n          >\r\n            {message.name}\r\n          </span>\r\n\r\n          <div className=\"chat__body_image_container\">\r\n            {message.photo ? (\r\n              <>\r\n                <img alt=\"\" className=\"chat__body_image\" src={message.photo} />\r\n              </>\r\n            ) : null}\r\n          </div>\r\n\r\n          <div className=\"chat__body_video_container\">\r\n            {message.video ? (\r\n              <>\r\n                <div className=\"player-wrapper\">\r\n                  <ReactPlayer\r\n                    className=\"react-player\"\r\n                    width=\"100%\"\r\n                    height=\"100%\"\r\n                    url={message.video}\r\n                    controls={true}\r\n                    onPlay={handlePlay}\r\n                    onPause={handlePause}\r\n                    onEnded={handlePause}\r\n                  />\r\n                </div>\r\n              </>\r\n            ) : null}\r\n          </div>\r\n\r\n          <div className=\"chat__message_box\">\r\n            <div\r\n              className={`chat__message_box_text ${\r\n                message.uid === user.uid && \"chat__message_box_text_sender\"\r\n              }\r\n              ${\r\n                message.photo &&\r\n                !message.caption &&\r\n                \"chat__message_box_text_no_caption\"\r\n              } `}\r\n            >\r\n              {message.message ? decrypt(message.message) : null}\r\n              {message.caption ? message.caption : null}\r\n              {message.url ? (\r\n                <a\r\n                  target=\"_blank\"\r\n                  href={`${message.url}`}\r\n                  rel=\"noopener noreferrer\"\r\n                >\r\n                  {message.url}\r\n                </a>\r\n              ) : null}\r\n\r\n              <div\r\n                className={`chat__timestamp_container ${\r\n                  message.uid === user.uid && \"chat__timestamp_container_sender\"\r\n                }`}\r\n              >\r\n                {message.timestamp ? (\r\n                  <div\r\n                    className={`chat__timestamp \r\n                                    ${\r\n                                      message.photo &&\r\n                                      !message.caption &&\r\n                                      \"chat__timestamp_media_photo\"\r\n                                    }  \r\n                                    ${\r\n                                      message.video &&\r\n                                      !message.caption &&\r\n                                      \"chat__timestamp_media_video\"\r\n                                    }\r\n                                    ${\r\n                                      message.video &&\r\n                                      !message.caption &&\r\n                                      playing === true &&\r\n                                      \"chat__timestamp_media_displayNone\"\r\n                                    }`}\r\n                  >\r\n                    <span>\r\n                      {new Date(message.timestamp.toDate()).toLocaleTimeString(\r\n                        \"en-US\",\r\n                        {\r\n                          hour: \"numeric\",\r\n                          hour12: true,\r\n                          minute: \"numeric\",\r\n                        }\r\n                      )}\r\n                      {message.uid === user.uid ? <DoneIcon /> : null}\r\n                    </span>\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"chat__timestamp\">\r\n                    <span>\r\n                      {new Date().toLocaleTimeString(\"en-US\", {\r\n                        hour: \"numeric\",\r\n                        hour12: true,\r\n                        minute: \"numeric\",\r\n                      })}\r\n                      {message.uid === user.uid ? <AlarmIcon /> : null}\r\n                    </span>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      ))}\r\n      {/* it will automatically scroll drown everytime the user enters new chat message */}\r\n      <div ref={messagesEndRef} />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ChatBody;\r\n","import React, { useState } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { useStateValue } from \"../StateProvider\";\r\nimport ReactPlayer from \"react-player\";\r\n//importing material-ui\r\nimport Fab from \"@material-ui/core/Fab\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Drawer from \"@material-ui/core/Drawer\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n//importing material-ui-icons\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport SendIcon from \"@material-ui/icons/Send\";\r\n//importing styles\r\nimport \"./DrawerBottom.css\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: \"flex\",\r\n  },\r\n  drawerPaper: {\r\n    position: \"absolute\",\r\n    width: \"100%\",\r\n  },\r\n  paperAnchorBottom: {\r\n    left: \"auto\",\r\n    right: 0,\r\n    bottom: 0,\r\n    maxHeight: \"100%\",\r\n    [theme.breakpoints.up(\"xs\")]: {\r\n      top: 52,\r\n    },\r\n    [theme.breakpoints.up(\"sm\")]: {\r\n      top: 65,\r\n    },\r\n    [theme.breakpoints.up(\"md\")]: {\r\n      top: 65,\r\n    },\r\n    [theme.breakpoints.up(\"lg\")]: {\r\n      top: 65,\r\n    },\r\n  },\r\n}));\r\n\r\nfunction DrawerBottom({\r\n  drawerBottom,\r\n  setDrawerBottom,\r\n  fileImageUrl,\r\n  fileVideoUrl,\r\n  setFileVideoUrl,\r\n  setFileImageUrl,\r\n  firebase,\r\n  db,\r\n  storage,\r\n}) {\r\n  const classes = useStyles();\r\n  const [{ user }] = useStateValue();\r\n  const [caption, setCaption] = useState(\"\");\r\n  const { roomId } = useParams();\r\n\r\n  const handleUpload = (e) => {\r\n    e.preventDefault();\r\n    if (fileImageUrl) {\r\n      db.collection(\"rooms\")\r\n        .doc(roomId)\r\n        .collection(\"messages\")\r\n        .add({\r\n          photo: fileImageUrl,\r\n          name: user.displayName,\r\n          uid: user.uid,\r\n          caption: caption,\r\n          timestamp: firebase.firestore.FieldValue.serverTimestamp(),\r\n        })\r\n        .then(function (docRef) {\r\n          db.collection(\"rooms\")\r\n            .doc(roomId)\r\n            .collection(\"messages\")\r\n            .doc(docRef.id)\r\n            .set(\r\n              {\r\n                id: docRef.id,\r\n              },\r\n              { merge: true }\r\n            );\r\n        })\r\n        .catch(function (error) {\r\n          console.error(\"Error adding document: \", error);\r\n        });\r\n      setFileImageUrl(null);\r\n    }\r\n    if (fileVideoUrl) {\r\n      db.collection(\"rooms\")\r\n        .doc(roomId)\r\n        .collection(\"messages\")\r\n        .add({\r\n          video: fileVideoUrl,\r\n          name: user.displayName,\r\n          uid: user.uid,\r\n          caption: caption,\r\n          timestamp: firebase.firestore.FieldValue.serverTimestamp(),\r\n        })\r\n        .then(function (docRef) {\r\n          db.collection(\"rooms\")\r\n            .doc(roomId)\r\n            .collection(\"messages\")\r\n            .doc(docRef.id)\r\n            .set(\r\n              {\r\n                id: docRef.id,\r\n              },\r\n              { merge: true }\r\n            );\r\n        })\r\n        .catch(function (error) {\r\n          console.error(\"Error adding document: \", error);\r\n        });\r\n      setFileVideoUrl(null);\r\n    }\r\n    setCaption(\"\");\r\n    setDrawerBottom(false);\r\n  };\r\n\r\n  const handleDrawerClose = () => {\r\n    setDrawerBottom(false);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Drawer\r\n        variant=\"persistent\"\r\n        anchor=\"bottom\"\r\n        open={drawerBottom}\r\n        classes={{\r\n          paper: classes.drawerPaper,\r\n          paperAnchorBottom: classes.paperAnchorBottom,\r\n        }}\r\n      >\r\n        <div className=\"drawerBottom__header\">\r\n          <div className=\"drawerBottom__header_container\">\r\n            <IconButton onClick={handleDrawerClose}>\r\n              <CloseIcon />\r\n            </IconButton>\r\n            <p>Preview</p>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"drawerBottom__content\">\r\n          <div className=\"drawerBottom__content_photo\">\r\n            {fileImageUrl ? (\r\n              <img src={fileImageUrl} alt=\"\" />\r\n            ) : (\r\n              <div className=\"drawerBottom__content_video\">\r\n                <div className=\"player-wrapper\">\r\n                  <ReactPlayer\r\n                    className=\"react-player\"\r\n                    width=\"100%\"\r\n                    height=\"50%\"\r\n                    url={fileVideoUrl}\r\n                    controls={true}\r\n                  />\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n          <div className=\"drawerBottom__content_caption\">\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Add a caption...\"\r\n              value={caption}\r\n              onChange={(e) => setCaption(e.target.value)}\r\n            />\r\n            <Fab\r\n              color=\"primary\"\r\n              aria-label=\"send\"\r\n              size=\"large\"\r\n              onClick={handleUpload}\r\n            >\r\n              <div className=\"chat__icon\">\r\n                <SendIcon />\r\n              </div>\r\n            </Fab>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"drawerBottom__footer\">\r\n          <div>{fileImageUrl ? <img src={fileImageUrl} alt=\"\" /> : null}</div>\r\n        </div>\r\n      </Drawer>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default DrawerBottom;\r\n","import styled from \"styled-components\";\r\nexport const chatfooter_height = styled.div`\r\n  height: ${(props) => (props.drawerBottom ? \"100%\" : \"62px\")};\r\n`;\r\n","import React, { useState } from \"react\";\r\nimport { useStateValue } from \"../StateProvider\";\r\nimport { toastInfo } from \"../shared/toastInfo\";\r\n//importing components\r\nimport DrawerBottom from \"./DrawerBottom\";\r\nimport TooltipCustom from \"../shared/TooltipCustom\";\r\nimport { Picker } from \"emoji-mart\";\r\n//importing material-ui\r\nimport Hidden from \"@material-ui/core/Hidden\";\r\nimport Tooltip from \"@material-ui/core/Tooltip\";\r\nimport Fab from \"@material-ui/core/Fab\";\r\nimport Slide from \"@material-ui/core/Slide\";\r\nimport ClickAwayListener from \"@material-ui/core/ClickAwayListener\";\r\n//importing material-ui-icons\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport InsertEmoticonIcon from \"@material-ui/icons/InsertEmoticon\";\r\nimport SendIcon from \"@material-ui/icons/Send\";\r\nimport AttachFileIcon from \"@material-ui/icons/AttachFile\";\r\nimport InsertDriveFileIcon from \"@material-ui/icons/InsertDriveFile\";\r\nimport PhotoIcon from \"@material-ui/icons/Photo\";\r\nimport CameraAltIcon from \"@material-ui/icons/CameraAlt\";\r\nimport VideoCallIcon from \"@material-ui/icons/VideoCall\";\r\nimport PersonIcon from \"@material-ui/icons/Person\";\r\n//importing styles\r\nimport \"emoji-mart/css/emoji-mart.css\";\r\nimport \"./ChatFooter.css\";\r\nimport * as s from \"./preview.style\";\r\nimport CryptoJS from \"crypto-js\";\r\n\r\nconst attachFileLists = [\r\n  {\r\n    title: \"Room\",\r\n    icon: <VideoCallIcon />,\r\n    id: Math.random() * 100000,\r\n  },\r\n  {\r\n    title: \"Contact\",\r\n    icon: <PersonIcon />,\r\n    id: Math.random() * 100000,\r\n  },\r\n  {\r\n    title: \"Document\",\r\n    icon: <InsertDriveFileIcon />,\r\n    id: Math.random() * 100000,\r\n  },\r\n  {\r\n    title: \"Camera\",\r\n    icon: <CameraAltIcon />,\r\n    id: Math.random() * 100000,\r\n  },\r\n  {\r\n    title: \"Photos & Videos\",\r\n    icon: <PhotoIcon />,\r\n    id: Math.random() * 100000,\r\n  },\r\n];\r\n\r\nfunction ChatFooter({ roomName, roomId, db, firebase, storage }) {\r\n  const [{ user }] = useStateValue();\r\n  const [input, setInput] = useState(\"\");\r\n  const [emoji, setEmoji] = useState(false);\r\n  const [fileImageUrl, setFileImageUrl] = useState(null);\r\n  const [fileVideoUrl, setFileVideoUrl] = useState(null);\r\n  const [drawerBottom, setDrawerBottom] = useState(false);\r\n  const [showAttachFile, setShowAttachFile] = useState(false);\r\n\r\n  const attachFile = () => {\r\n    const attachToastId = \"attach\";\r\n    toastInfo(\r\n      \"All icons have the same functions, you can only upload images, gifs and videos!\",\r\n      attachToastId,\r\n      \"top-center\"\r\n    );\r\n    if (showAttachFile === false) {\r\n      setShowAttachFile(true);\r\n    } else {\r\n      setShowAttachFile(false);\r\n    }\r\n  };\r\n\r\n  const addEmoji = (e) => {\r\n    let emoji = e.native;\r\n    setInput(input + emoji);\r\n  };\r\n\r\n  const handleEmoticons = () => {\r\n    setEmoji(true);\r\n  };\r\n\r\n  const handleEmoticonsClose = () => {\r\n    setEmoji(false);\r\n  };\r\n\r\n  // const voiceMessage = () => {\r\n  //   const voiceMessageToastId = \"voiceMessage\";\r\n  //   toastInfo(\r\n  //     \"Voice Message is not yet available!\",\r\n  //     voiceMessageToastId,\r\n  //     \"top-center\"\r\n  //   );\r\n  // };\r\n\r\n  const onFileChange = async (e) => {\r\n    const fileSizeToastId = \"fileSizeToastId\";\r\n    const file = e.target.files[0];\r\n    if (file.size > 12 * 1024 * 1024) {\r\n      toastInfo(\r\n        \"File should not exceed more than 12MB\",\r\n        fileSizeToastId,\r\n        \"top-center\"\r\n      );\r\n    } else {\r\n      const storageRef = storage.ref();\r\n      if (file.type.match(\"image.*\")) {\r\n        const imagesRef = storageRef.child(`rooms/${roomName}/images/`);\r\n        const fileRef = imagesRef.child(new Date().getTime() + \" \" + file.name);\r\n        await fileRef.put(file);\r\n        setFileImageUrl(await fileRef.getDownloadURL());\r\n        console.log(\"uploading image\", fileImageUrl);\r\n      } else if (file.type.match(\"video.*\")) {\r\n        const videosRef = storageRef.child(`rooms/${roomName}/videos`);\r\n        const fileRef = videosRef.child(new Date().getTime() + \" \" + file.name);\r\n        await fileRef.put(file);\r\n        setFileVideoUrl(await fileRef.getDownloadURL());\r\n        console.log(\"uploading video\", fileVideoUrl);\r\n      }\r\n      setDrawerBottom(true);\r\n    }\r\n  };\r\n\r\n  const handleClickAway = () => {\r\n    setShowAttachFile(false);\r\n  };\r\n  const onSubmit = () => {\r\n    const youtubeLink =\r\n      /^((?:https?:)?\\/\\/)?((?:www|m)\\.)?((?:youtube\\.com|youtu.be))(\\/(?:[\\w\\\\-]+\\?v=|embed\\/|v\\/)?)([\\w\\\\-]+)(\\S+)?$/;\r\n    const facebookVideoLink =\r\n      /^https?:\\/\\/www\\.facebook\\.com.*\\/(video(s)?|watch|story)(\\.php?|\\/).+$/;\r\n    const vimeoLink =\r\n      /(http|https)?:\\/\\/(www\\.|player\\.)?vimeo\\.com\\/(?:channels\\/(?:\\w+\\/)?|groups\\/([^\\\\/]*)\\/videos\\/|video\\/|)(\\d+)(?:|\\/\\?)/;\r\n    const soundcloudLink = /^https?:\\/\\/(soundcloud\\.com|snd\\.sc)\\/(.*)$/;\r\n    const dailymotionLink =\r\n      /^.+dailymotion.com\\/(video|hub)\\/([^_]+)[^#]*(#video=([^_&]+))?/;\r\n    const urlLink =\r\n      /^(?:http(s)?:\\/\\/)?[\\w.-]+(?:\\.[\\w\\\\.-]+)+[\\w\\-\\\\._~:/?#[\\]@!\\\\$&'\\\\(\\\\)\\\\*\\\\+,;=.]+$/;\r\n\r\n    if (roomId) {\r\n      if (\r\n        youtubeLink.test(input) ||\r\n        facebookVideoLink.test(input) ||\r\n        vimeoLink.test(input) ||\r\n        soundcloudLink.test(input) ||\r\n        dailymotionLink.test(input)\r\n      ) {\r\n        db.collection(\"rooms\")\r\n          .doc(roomId)\r\n          .collection(\"messages\")\r\n          .add({\r\n            message: \"\",\r\n            video: input,\r\n            name: user.displayName,\r\n            uid: user.uid,\r\n            timestamp: firebase.firestore.FieldValue.serverTimestamp(),\r\n          })\r\n          .then(function (docRef) {\r\n            console.log(\"Document written with ID: \", docRef.id);\r\n            db.collection(\"rooms\")\r\n              .doc(roomId)\r\n              .collection(\"messages\")\r\n              .doc(docRef.id)\r\n              .set(\r\n                {\r\n                  id: docRef.id,\r\n                },\r\n                { merge: true }\r\n              );\r\n          })\r\n          .catch(function (error) {\r\n            console.error(\"Error adding document: \", error);\r\n          });\r\n      } else if (urlLink.test(input)) {\r\n        db.collection(\"rooms\")\r\n          .doc(roomId)\r\n          .collection(\"messages\")\r\n          .add({\r\n            message: \"\",\r\n            url: input,\r\n            name: user.displayName,\r\n            uid: user.uid,\r\n            timestamp: firebase.firestore.FieldValue.serverTimestamp(),\r\n          })\r\n          .then(function (docRef) {\r\n            console.log(\"Document written with ID: \", docRef.id);\r\n            db.collection(\"rooms\")\r\n              .doc(roomId)\r\n              .collection(\"messages\")\r\n              .doc(docRef.id)\r\n              .set(\r\n                {\r\n                  id: docRef.id,\r\n                },\r\n                { merge: true }\r\n              );\r\n          })\r\n          .catch(function (error) {\r\n            console.error(\"Error adding document: \", error);\r\n          });\r\n      } else if (/\\S/.test(input)) {\r\n        db.collection(\"rooms\")\r\n          .doc(roomId)\r\n          .collection(\"messages\")\r\n          .add({\r\n            message: CryptoJS.AES.encrypt(\r\n              input,\r\n              \"my-secret-key@123\"\r\n            ).toString(),\r\n            name: user.displayName,\r\n            uid: user.uid,\r\n            timestamp: firebase.firestore.FieldValue.serverTimestamp(),\r\n          })\r\n          .then(function (docRef) {\r\n            db.collection(\"rooms\")\r\n              .doc(roomId)\r\n              .collection(\"messages\")\r\n              .doc(docRef.id)\r\n              .set(\r\n                {\r\n                  id: docRef.id,\r\n                },\r\n                { merge: true }\r\n              );\r\n          })\r\n          .catch(function (error) {\r\n            console.error(\"Error adding document: \", error);\r\n          });\r\n      }\r\n    }\r\n    setInput(\"\");\r\n    setEmoji(false);\r\n  };\r\n  const onEnterPress = (e) => {\r\n    if (e.keyCode === 13 && e.shiftKey === false) {\r\n      e.preventDefault();\r\n\r\n      const youtubeLink =\r\n        /^((?:https?:)?\\/\\/)?((?:www|m)\\.)?((?:youtube\\.com|youtu.be))(\\/(?:[\\w\\\\-]+\\?v=|embed\\/|v\\/)?)([\\w\\\\-]+)(\\S+)?$/;\r\n      const facebookVideoLink =\r\n        /^https?:\\/\\/www\\.facebook\\.com.*\\/(video(s)?|watch|story)(\\.php?|\\/).+$/;\r\n      const vimeoLink =\r\n        /(http|https)?:\\/\\/(www\\.|player\\.)?vimeo\\.com\\/(?:channels\\/(?:\\w+\\/)?|groups\\/([^\\\\/]*)\\/videos\\/|video\\/|)(\\d+)(?:|\\/\\?)/;\r\n      const soundcloudLink = /^https?:\\/\\/(soundcloud\\.com|snd\\.sc)\\/(.*)$/;\r\n      const dailymotionLink =\r\n        /^.+dailymotion.com\\/(video|hub)\\/([^_]+)[^#]*(#video=([^_&]+))?/;\r\n      const urlLink =\r\n        /^(?:http(s)?:\\/\\/)?[\\w.-]+(?:\\.[\\w\\\\.-]+)+[\\w\\-\\\\._~:/?#[\\]@!\\\\$&'\\\\(\\\\)\\\\*\\\\+,;=.]+$/;\r\n\r\n      if (roomId) {\r\n        if (\r\n          youtubeLink.test(input) ||\r\n          facebookVideoLink.test(input) ||\r\n          vimeoLink.test(input) ||\r\n          soundcloudLink.test(input) ||\r\n          dailymotionLink.test(input)\r\n        ) {\r\n          db.collection(\"rooms\")\r\n            .doc(roomId)\r\n            .collection(\"messages\")\r\n            .add({\r\n              message: \"\",\r\n              video: input,\r\n              name: user.displayName,\r\n              uid: user.uid,\r\n              timestamp: firebase.firestore.FieldValue.serverTimestamp(),\r\n            })\r\n            .then(function (docRef) {\r\n              console.log(\"Document written with ID: \", docRef.id);\r\n              db.collection(\"rooms\")\r\n                .doc(roomId)\r\n                .collection(\"messages\")\r\n                .doc(docRef.id)\r\n                .set(\r\n                  {\r\n                    id: docRef.id,\r\n                  },\r\n                  { merge: true }\r\n                );\r\n            })\r\n            .catch(function (error) {\r\n              console.error(\"Error adding document: \", error);\r\n            });\r\n        } else if (urlLink.test(input)) {\r\n          db.collection(\"rooms\")\r\n            .doc(roomId)\r\n            .collection(\"messages\")\r\n            .add({\r\n              message: \"\",\r\n              url: input,\r\n              name: user.displayName,\r\n              uid: user.uid,\r\n              timestamp: firebase.firestore.FieldValue.serverTimestamp(),\r\n            })\r\n            .then(function (docRef) {\r\n              console.log(\"Document written with ID: \", docRef.id);\r\n              db.collection(\"rooms\")\r\n                .doc(roomId)\r\n                .collection(\"messages\")\r\n                .doc(docRef.id)\r\n                .set(\r\n                  {\r\n                    id: docRef.id,\r\n                  },\r\n                  { merge: true }\r\n                );\r\n            })\r\n            .catch(function (error) {\r\n              console.error(\"Error adding document: \", error);\r\n            });\r\n        } else if (/\\S/.test(input)) {\r\n          db.collection(\"rooms\")\r\n            .doc(roomId)\r\n            .collection(\"messages\")\r\n            .add({\r\n              message: CryptoJS.AES.encrypt(\r\n                input,\r\n                \"my-secret-key@123\"\r\n              ).toString(),\r\n              name: user.displayName,\r\n              uid: user.uid,\r\n              timestamp: firebase.firestore.FieldValue.serverTimestamp(),\r\n            })\r\n            .then(function (docRef) {\r\n              db.collection(\"rooms\")\r\n                .doc(roomId)\r\n                .collection(\"messages\")\r\n                .doc(docRef.id)\r\n                .set(\r\n                  {\r\n                    id: docRef.id,\r\n                  },\r\n                  { merge: true }\r\n                );\r\n            })\r\n            .catch(function (error) {\r\n              console.error(\"Error adding document: \", error);\r\n            });\r\n        }\r\n      }\r\n      setInput(\"\");\r\n      setEmoji(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <s.chatfooter_height drawerBottom={drawerBottom} className=\"chat__footer\">\r\n      <DrawerBottom\r\n        drawerBottom={drawerBottom}\r\n        setDrawerBottom={setDrawerBottom}\r\n        fileVideoUrl={fileVideoUrl}\r\n        fileImageUrl={fileImageUrl}\r\n        setFileImageUrl={setFileImageUrl}\r\n        setFileVideoUrl={setFileVideoUrl}\r\n        roomId={roomId}\r\n        db={db}\r\n        firebase={firebase}\r\n        storage={storage}\r\n      />\r\n\r\n      {emoji ? (\r\n        <Hidden only={[\"xs\"]}>\r\n          <TooltipCustom\r\n            name=\"Close\"\r\n            icon={<CloseIcon style={{ color: \"#de5751\" }} />}\r\n            onClick={() => handleEmoticonsClose()}\r\n          />\r\n        </Hidden>\r\n      ) : null}\r\n\r\n      <TooltipCustom\r\n        name=\"Emoticons\"\r\n        icon={<InsertEmoticonIcon style={{ color: \"#de5751\" }} />}\r\n        onClick={() => handleEmoticons()}\r\n      />\r\n\r\n      {emoji ? (\r\n        <>\r\n          <Hidden only={[\"xs\"]}>\r\n            <Picker onSelect={addEmoji} />\r\n          </Hidden>\r\n          <Hidden smUp>\r\n            <ClickAwayListener onClickAway={handleEmoticonsClose}>\r\n              <Picker onSelect={addEmoji} />\r\n            </ClickAwayListener>\r\n          </Hidden>\r\n        </>\r\n      ) : null}\r\n\r\n      <div>\r\n        <TooltipCustom\r\n          name=\"Attach\"\r\n          icon={<AttachFileIcon style={{ color: \"#de5751\" }} />}\r\n          onClick={attachFile}\r\n        />\r\n        {showAttachFile ? (\r\n          <ClickAwayListener onClickAway={handleClickAway}>\r\n            <div className=\"chat__attachFile\">\r\n              {attachFileLists.map((attachFileList) => (\r\n                <Slide\r\n                  key={attachFileList.id}\r\n                  direction=\"up\"\r\n                  in={attachFile}\r\n                  mountOnEnter\r\n                  unmountOnExit\r\n                >\r\n                  <Tooltip\r\n                    title={\r\n                      <span\r\n                        style={{ fontSize: \"14px\", padding: \"8px 5px 8px 5px\" }}\r\n                      >\r\n                        {attachFileList.title}\r\n                      </span>\r\n                    }\r\n                    placement=\"left\"\r\n                  >\r\n                    <Fab color=\"primary\" aria-label=\"person\">\r\n                      <div className=\"chat__icon\">\r\n                        <label htmlFor=\"file-input\">\r\n                          {attachFileList.icon}\r\n                        </label>\r\n                        <input\r\n                          id=\"file-input\"\r\n                          type=\"file\"\r\n                          onChange={onFileChange}\r\n                          accept=\"image/*,video/mp4,video/3gpp,video/quicktime\"\r\n                        />\r\n                      </div>\r\n                    </Fab>\r\n                  </Tooltip>\r\n                </Slide>\r\n              ))}\r\n            </div>\r\n          </ClickAwayListener>\r\n        ) : null}\r\n      </div>\r\n\r\n      <form>\r\n        <textarea\r\n          required\r\n          value={input}\r\n          onChange={(e) => setInput(e.target.value)}\r\n          placeholder=\"Type a message\"\r\n          type=\"text\"\r\n          rows=\"1\"\r\n          onKeyDown={onEnterPress}\r\n        />\r\n      </form>\r\n\r\n      <TooltipCustom\r\n        name=\"Send Message\"\r\n        icon={<SendIcon style={{ color: \"#de5751\" }} />}\r\n        onClick={onSubmit}\r\n      />\r\n    </s.chatfooter_height>\r\n  );\r\n}\r\n\r\nexport default ChatFooter;\r\n","import React from \"react\";\r\nimport LaptopIcon from \"@material-ui/icons/Laptop\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\nimport \"./ChatLandingScreen.css\";\r\nimport Zoom from \"@material-ui/core/Zoom\";\r\n\r\nfunction ChatLandingScreen({ showLandingScreenPhoto }) {\r\n  return (\r\n    <div className=\"chat-landing-screen\">\r\n      <div>\r\n        <Zoom\r\n          in={showLandingScreenPhoto}\r\n          style={{ transitionDelay: showLandingScreenPhoto ? \"300ms\" : \"0ms\" }}\r\n        >\r\n          <img\r\n            className=\"chat-landing-screen__photo\"\r\n            src=\"https://firebasestorage.googleapis.com/v0/b/tattle-9359.appspot.com/o/Folder%2Flogo.webp?alt=media&token=c0d6ec1c-5261-4864-a820-539a731fb7d1\"\r\n            alt=\"TattleLogo\"\r\n          />\r\n        </Zoom>\r\n      </div>\r\n\r\n      <div className=\"chat-landing-screen__title\">\r\n        <p>Keeps you Connected</p>\r\n      </div>\r\n\r\n      <div>\r\n        <p>\r\n          Tattle is driven by a fascination for mobile technology that was once\r\n          viewed as a passing trend.\r\n        </p>\r\n      </div>\r\n\r\n      <Divider />\r\n\r\n      <div className=\"chat-landing-screen__footer\">\r\n        <LaptopIcon />\r\n        <p>Tattle is available for Windows.</p>\r\n        <a\r\n          target=\"_blank\"\r\n          href=\"https://tattle-9359.web.app\"\r\n          rel=\"noopener noreferrer\"\r\n        >\r\n          Get it here.\r\n        </a>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ChatLandingScreen;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useStateValue } from \"../StateProvider\";\r\nimport { useHistory, useParams } from \"react-router-dom\";\r\n//importing firebase\r\nimport { storage, firebase } from \"../firebase\";\r\nimport db from \"../firebase\";\r\n//importing components\r\nimport ChatHeader from \"./ChatHeader\";\r\nimport ChatBody from \"./ChatBody\";\r\nimport ChatFooter from \"./ChatFooter\";\r\nimport ChatLandingScreen from \"./ChatLandingScreen\";\r\n//importing material-ui\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\n//importing styles\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nimport \"./Chat.css\";\r\n\r\nfunction Chat({ isRoomExist }) {\r\n  const history = useHistory();\r\n  const [{ user }] = useStateValue();\r\n  const { roomId } = useParams();\r\n  const [_roomId, set_RoomId] = useState(\"\");\r\n  const [roomName, setRoomName] = useState(\"\");\r\n  const [roomCreatedBy, setRoomCreatedBy] = useState(\"\");\r\n  const [roomOwner, setRoomOwner] = useState(\"\");\r\n  const [messages, setMessages] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [showLandingScreenPhoto, setShowLandingScreenPhoto] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (roomId) {\r\n      db.collection(\"rooms\")\r\n        .doc(roomId)\r\n        .onSnapshot(function (doc) {\r\n          setRoomName(doc.data()?.name);\r\n          setRoomCreatedBy(doc.data()?.createdBy);\r\n          setRoomOwner(doc.data()?.roomOwner);\r\n          set_RoomId(doc.data()?.id);\r\n        });\r\n\r\n      db.collection(\"rooms\")\r\n        .doc(roomId)\r\n        .collection(\"messages\")\r\n        .orderBy(\"timestamp\", \"asc\")\r\n        .onSnapshot(function (doc) {\r\n          setMessages(doc.docs.map((doc) => doc.data()));\r\n          setLoading(true);\r\n        });\r\n\r\n      setShowLandingScreenPhoto(false);\r\n    } else {\r\n      setShowLandingScreenPhoto(true);\r\n      history.push(\"/\");\r\n    }\r\n  }, [roomId, history]);\r\n\r\n  return (\r\n    <div className=\"chat\">\r\n      {roomId ? (\r\n        <>\r\n          <div>\r\n            <ChatHeader\r\n              roomCreatedBy={roomCreatedBy}\r\n              roomOwner={roomOwner}\r\n              roomName={roomName}\r\n              roomId={roomId}\r\n              _roomId={_roomId}\r\n              messages={messages}\r\n              db={db}\r\n              history={history}\r\n              isRoomExist={isRoomExist}\r\n            />\r\n          </div>\r\n\r\n          <div className=\"chat__body\">\r\n            {loading ? (\r\n              <ChatBody\r\n                roomCreatedBy={roomCreatedBy}\r\n                roomOwner={roomOwner}\r\n                roomId={roomId}\r\n                messages={messages}\r\n                user={user}\r\n                isRoomExist={isRoomExist}\r\n              />\r\n            ) : (\r\n              <div className=\"chat__body_loading\">\r\n                <div>\r\n                  <CircularProgress />\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          <div>\r\n            <ChatFooter\r\n              roomName={roomName}\r\n              roomId={roomId}\r\n              db={db}\r\n              firebase={firebase}\r\n              storage={storage}\r\n            />\r\n          </div>\r\n        </>\r\n      ) : (\r\n        <ChatLandingScreen showLandingScreenPhoto={showLandingScreenPhoto} />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Chat;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useStateValue } from \"./StateProvider\";\r\nimport {\r\n  BrowserRouter as Router,\r\n  Switch,\r\n  Route,\r\n  Redirect,\r\n} from \"react-router-dom\";\r\n//importing firebase\r\nimport db from \"./firebase\";\r\nimport { auth, firebase } from \"./firebase\";\r\n//importing actions\r\nimport { setUser } from \"./actions/userAction\";\r\n//importing components\r\nimport Login from \"./Login\";\r\nimport Sidebar from \"../src/Sidebar/Sidebar\";\r\nimport Chat from \"../src/Chat/Chat\";\r\nimport { ToastContainer } from \"react-toastify\";\r\nimport { toastInfo } from \"./shared/toastInfo\";\r\n//importing material-ui\r\nimport Hidden from \"@material-ui/core/Hidden\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport LinearProgress from \"@material-ui/core/LinearProgress\";\r\n//importing styles\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nimport \"./App.css\";\r\n\r\nfunction App() {\r\n  const [{ user }, dispatch] = useStateValue();\r\n  const [rooms, setRooms] = useState([]);\r\n  const [isRoomExist, setIsRoomExist] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const unsubscribe = auth.onAuthStateChanged((authUser) => {\r\n      if (authUser) {\r\n        dispatch(setUser(authUser));\r\n        setLoading(true);\r\n\r\n        db.collection(\"rooms\")\r\n          .orderBy(\"timestamp\", \"desc\")\r\n          .onSnapshot((snapshot) =>\r\n            setRooms(\r\n              snapshot.docs.map((doc) => ({\r\n                id: doc.id,\r\n                data: doc.data(),\r\n              }))\r\n            )\r\n          );\r\n\r\n        if (authUser.isAnonymous === true && authUser.displayName === null) {\r\n          var anonymousName =\r\n            // eslint-disable-next-line no-useless-concat\r\n            \"anonymous\" + Math.floor(Math.random() * 1000000);\r\n\r\n          auth.currentUser.updateProfile({\r\n            displayName: anonymousName,\r\n            photoURL: \"\",\r\n          });\r\n\r\n          db.collection(\"users\")\r\n            .doc(authUser.uid)\r\n            .set({\r\n              name: anonymousName,\r\n              about: \"Hey there! I am using Tattle.\",\r\n              photoURL: \"https://avatars.dicebear.com/api/human/ugtjh.svg\",\r\n              role: \"anonymous\",\r\n              email: anonymousName + \"@anonymous.com\",\r\n              dateJoined: firebase.firestore.FieldValue.serverTimestamp(),\r\n            })\r\n            .then(function () {\r\n              console.log(\"Document successfully updated!\");\r\n            })\r\n            .catch(function (error) {\r\n              // The document probably doesn't exist.\r\n              console.error(\"Error updating document: \", error);\r\n            });\r\n        }\r\n\r\n        if (\r\n          authUser.uid &&\r\n          authUser.isAnonymous === false &&\r\n          authUser.photoURL !== null\r\n        ) {\r\n          const errorAbout = \"errorAbout\";\r\n          db.collection(\"users\")\r\n            .doc(authUser.uid)\r\n            .get()\r\n            .then(function (doc) {\r\n              if (doc.exists) {\r\n                // console.log(\"USER EXIST\");\r\n              } else {\r\n                db.collection(\"users\").doc(authUser.uid).set({\r\n                  name: authUser.displayName,\r\n                  about: \"Hey there! I am using Tattle.\",\r\n                  photoURL: user.photoURL,\r\n                  role: \"regular\",\r\n                  email: authUser.email,\r\n                  dateJoined: firebase.firestore.FieldValue.serverTimestamp(),\r\n                });\r\n              }\r\n            })\r\n            .catch(function (error) {\r\n              toastInfo(`${error}`, errorAbout, \"top-center\");\r\n            });\r\n        } else if (\r\n          authUser.uid &&\r\n          authUser.isAnonymous === false &&\r\n          authUser.photoURL === null\r\n        ) {\r\n          const errorAbout = \"errorAbout\";\r\n          db.collection(\"users\")\r\n            .doc(authUser.uid)\r\n            .get()\r\n            .then(function (doc) {\r\n              if (doc.exists) {\r\n                console.log(\"USER EXIST\");\r\n              } else {\r\n                db.collection(\"users\").doc(authUser.uid).set({\r\n                  name: authUser.displayName,\r\n                  about: \"Hey there! I am using Tattle.\",\r\n                  photoURL: \"\",\r\n                  role: \"regular\",\r\n                  email: authUser.email,\r\n                  dateJoined: firebase.firestore.FieldValue.serverTimestamp(),\r\n                });\r\n              }\r\n            })\r\n            .catch(function (error) {\r\n              toastInfo(`${error}`, errorAbout, \"top-center\");\r\n            });\r\n        }\r\n      } else {\r\n        dispatch(setUser(null));\r\n        setLoading(true);\r\n      }\r\n    });\r\n\r\n    return () => {\r\n      unsubscribe();\r\n    };\r\n  }, [dispatch, user]);\r\n\r\n  return (\r\n    <div className={`app ${loading === false && \"app-no-bg\"}`}>\r\n      {loading ? (\r\n        <>\r\n          <ToastContainer\r\n            position=\"top-center\"\r\n            autoClose={5000}\r\n            newestOnTop={false}\r\n            closeOnClick\r\n            rtl={false}\r\n            pauseOnFocusLoss\r\n            draggable\r\n          />\r\n          {!user ? (\r\n            <Login />\r\n          ) : (\r\n            <div className=\"app__body\">\r\n              <Router>\r\n                <Switch>\r\n                  <Route exact path=\"/\">\r\n                    <Sidebar\r\n                      rooms={rooms}\r\n                      setIsRoomExist={setIsRoomExist}\r\n                      isRoomExist={isRoomExist}\r\n                    />\r\n                    <Hidden only={[\"xs\"]}>\r\n                      {\" \"}\r\n                      {/* Chat component will be hidden in mobile view */}\r\n                      <Chat isRoomExist={isRoomExist} />\r\n                    </Hidden>\r\n                  </Route>\r\n\r\n                  <Route exact path=\"/rooms/:roomId\">\r\n                    <Hidden only={[\"xs\"]}>\r\n                      {\" \"}\r\n                      {/* Sidebar component will be hidden in mobile view */}\r\n                      <Sidebar\r\n                        rooms={rooms}\r\n                        setIsRoomExist={setIsRoomExist}\r\n                        isRoomExist={isRoomExist}\r\n                      />\r\n                    </Hidden>\r\n                    <Chat isRoomExist={isRoomExist} />\r\n                  </Route>\r\n\r\n                  <Route path=\"*\">\r\n                    <Redirect to=\"/\" />\r\n                  </Route>\r\n                </Switch>\r\n              </Router>\r\n            </div>\r\n          )}\r\n        </>\r\n      ) : (\r\n        <div className=\"app__loading\">\r\n          <div>\r\n            <div className=\"app__loading_circular\">\r\n              <CircularProgress />\r\n            </div>\r\n            <div className=\"app__loading_linear\">\r\n              <LinearProgress />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://cra.link/PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://cra.link/PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then((registration) => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://cra.link/PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch((error) => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then((response) => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then((registration) => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log('No internet connection found. App is running in offline mode.');\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then((registration) => {\r\n        registration.unregister();\r\n      })\r\n      .catch((error) => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","export const initialState = {\r\n    user: null,\r\n}\r\n\r\nexport const actionTypes = {\r\n    SET_USER: \"SET_USER\",\r\n}\r\n\r\nconst reducer = (state, action) => {\r\n\r\n    switch (action.type) {\r\n        case actionTypes.SET_USER:\r\n            return {\r\n                ...state,\r\n                user: action.user,\r\n            };\r\n\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default reducer;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorkerRegistration from './serviceWorkerRegistration';\r\nimport { StateProvider } from './StateProvider';\r\nimport reducer, { initialState } from './reducer';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <StateProvider initialState={initialState} reducer={reducer} >\r\n      <App />\r\n    </StateProvider>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://cra.link/PWA\r\nserviceWorkerRegistration.register();\r\n"],"sourceRoot":""}