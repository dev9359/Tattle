(this.webpackJsonptattle=this.webpackJsonptattle||[]).push([[9],{14:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"d",(function(){return i})),n.d(t,"e",(function(){return c}));var a=n(30);n.d(t,"c",(function(){return a.a}));var o=a.a.initializeApp({apiKey:"AIzaSyCF7lHw_Z7DmZgpoZuYIGveD0eZ8ha7Qyg",authDomain:"tattle-9359.firebaseapp.com",databaseURL:"https://tattle-9359-default-rtdb.firebaseio.com/",projectId:"tattle-9359",storageBucket:"tattle-9359.appspot.com",messagingSenderId:"849640668400",appId:"1:849640668400:web:91c77b3a931a325ef4d635",measurementId:"G-17X1MHRTRX"}).firestore(),r=a.a.auth(),i=new a.a.auth.GoogleAuthProvider,c=a.a.storage();t.b=o},35:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return c}));var a=n(2),o=n.n(a),r=Object(a.createContext)(),i=function(e){var t=e.reducer,n=e.initialState,i=e.children;return o.a.createElement(r.Provider,{value:Object(a.useReducer)(t,n)},i)},c=function(){return Object(a.useContext)(r)}},42:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(39),o=function(e,t,n){a.b.info(e,{toastId:t,position:n,autoClose:5e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},61:function(e,t,n){},68:function(e,t,n){},71:function(e,t,n){"use strict";n.r(t);var a=n(2),o=n.n(a),r=n(23),i=n.n(r),c=(n(61),n(26)),l=n(35),s=n(50),u=n(10),d=n(14);function m(e){return{type:"SET_USER",user:e}}var p=n(39),f=n(42),h=n(95),b=n(92),g=n(93),v=(n(55),n(68),o.a.lazy((function(){return n.e(20).then(n.bind(null,484))}))),E=o.a.lazy((function(){return Promise.all([n.e(2),n.e(13)]).then(n.bind(null,486))})),y=o.a.lazy((function(){return n.e(29).then(n.bind(null,470))}));var w=function(){var e=Object(l.b)(),t=Object(c.a)(e,2),n=t[0].user,r=t[1],i=Object(a.useState)([]),w=Object(c.a)(i,2),O=w[0],R=w[1],S=Object(a.useState)(""),j=Object(c.a)(S,2),k=j[0],x=j[1],I=Object(a.useState)(!1),U=Object(c.a)(I,2),T=U[0],_=U[1];return Object(a.useEffect)((function(){var e=d.a.onAuthStateChanged((function(e){if(e){if(r(m(e)),_(!0),d.b.collection("rooms").where("participants","array-contains",e.uid).onSnapshot((function(e){return R(e.docs.map((function(e){return{id:e.id,data:e.data()}})))})),!0===e.isAnonymous&&null===e.displayName){var t="anonymous"+Math.floor(1e6*Math.random());d.a.currentUser.updateProfile({displayName:t,photoURL:""}),d.b.collection("users").doc(e.uid).set({uid:e.uid,name:t,about:"Hey there! I am using Tattle.",photoURL:"https://avatars.dicebear.com/api/human/ugtjh.svg",role:"anonymous",email:t+"@anonymous.com",dateJoined:d.c.firestore.FieldValue.serverTimestamp()}).then((function(){console.log("Document successfully updated!")})).catch((function(e){console.error("Error updating document: ",e)}))}if(e.uid&&!1===e.isAnonymous&&null!==e.photoURL){d.b.collection("users").doc(e.uid).get().then((function(t){t.exists||d.b.collection("users").doc(e.uid).set({uid:e.uid,name:e.displayName,about:"Hey there! I am using Tattle.",photoURL:n.photoURL,role:"regular",email:e.email,dateJoined:d.c.firestore.FieldValue.serverTimestamp()})})).catch((function(e){Object(f.a)("".concat(e),"errorAbout","top-center")}))}else if(e.uid&&!1===e.isAnonymous&&null===e.photoURL){d.b.collection("users").doc(e.uid).get().then((function(t){t.exists?console.log("USER EXIST"):d.b.collection("users").doc(e.uid).set({uid:e.uid,name:e.displayName,about:"Hey there! I am using Tattle.",photoURL:"",role:"regular",email:e.email,dateJoined:d.c.firestore.FieldValue.serverTimestamp()})})).catch((function(e){Object(f.a)("".concat(e),"errorAbout","top-center")}))}}else r(m(null)),_(!0)}));return function(){e()}}),[r,n]),o.a.createElement(o.a.Suspense,{fallback:o.a.createElement("p",null,"Loading")},o.a.createElement("div",{className:"app ".concat(!1===T&&"app-no-bg")},T?o.a.createElement(o.a.Fragment,null,o.a.createElement(p.a,{position:"top-center",autoClose:5e3,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0}),n?o.a.createElement("div",{className:"app__body"},o.a.createElement(s.a,null,o.a.createElement(u.d,null,o.a.createElement(u.b,{exact:!0,path:"/"},o.a.createElement(E,{rooms:O,setIsRoomExist:x,isRoomExist:k}),o.a.createElement(h.a,{only:["xs"]}," ",o.a.createElement(y,{isRoomExist:k}))),o.a.createElement(u.b,{exact:!0,path:"/rooms/:roomId"},o.a.createElement(h.a,{only:["xs"]}," ",o.a.createElement(E,{rooms:O,setIsRoomExist:x,isRoomExist:k})),o.a.createElement(y,{isRoomExist:k})),o.a.createElement(u.b,{path:"*"},o.a.createElement(u.a,{to:"/"}))))):o.a.createElement(v,null)):o.a.createElement("div",{className:"app__loading"},o.a.createElement("div",null,o.a.createElement("div",{className:"app__loading_circular"},o.a.createElement(b.a,null)),o.a.createElement("div",{className:"app__loading_linear"},o.a.createElement(g.a,null))))))},O=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function R(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var S=n(47),j="SET_USER",k=function(e,t){switch(t.type){case j:return Object(S.a)(Object(S.a)({},e),{},{user:t.user});default:return e}};i.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(l.a,{initialState:{user:null},reducer:k},o.a.createElement(w,null))),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");O?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):R(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):R(t,e)}))}}()}},[[71,10,11]]]);
//# sourceMappingURL=main.1b49c21b.chunk.js.map