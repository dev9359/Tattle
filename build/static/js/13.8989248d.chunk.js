(this.webpackJsonptattle=this.webpackJsonptattle||[]).push([[13],{103:function(e,t,a){"use strict";var n=a(3),r=a(8),o=a(2),c=(a(5),a(22)),l=a(28),i=a(18),u=o.forwardRef((function(e,t){var a=e.children,l=e.classes,u=e.className,s=e.color,d=void 0===s?"inherit":s,f=e.component,m=void 0===f?"svg":f,h=e.fontSize,v=void 0===h?"default":h,b=e.htmlColor,p=e.titleAccess,E=e.viewBox,g=void 0===E?"0 0 24 24":E,O=Object(r.a)(e,["children","classes","className","color","component","fontSize","htmlColor","titleAccess","viewBox"]);return o.createElement(m,Object(n.a)({className:Object(c.a)(l.root,u,"inherit"!==d&&l["color".concat(Object(i.a)(d))],"default"!==v&&l["fontSize".concat(Object(i.a)(v))]),focusable:"false",viewBox:g,color:b,"aria-hidden":!p||void 0,role:p?"img":void 0,ref:t},O),a,p?o.createElement("title",null,p):null)}));u.muiName="SvgIcon",t.a=Object(l.a)((function(e){return{root:{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0,fontSize:e.typography.pxToRem(24),transition:e.transitions.create("fill",{duration:e.transitions.duration.shorter})},colorPrimary:{color:e.palette.primary.main},colorSecondary:{color:e.palette.secondary.main},colorAction:{color:e.palette.action.active},colorError:{color:e.palette.error.main},colorDisabled:{color:e.palette.action.disabled},fontSizeInherit:{fontSize:"inherit"},fontSizeSmall:{fontSize:e.typography.pxToRem(20)},fontSizeLarge:{fontSize:e.typography.pxToRem(35)}}}),{name:"MuiSvgIcon"})(u)},106:function(e,t){function a(){return e.exports=a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},a.apply(this,arguments)}e.exports=a},108:function(e,t,a){"use strict";a.r(t);var n=a(103);a.d(t,"default",(function(){return n.a}))},158:function(e,t){},159:function(e,t){},161:function(e,t){},162:function(e,t){},165:function(e,t){},166:function(e,t){},167:function(e,t){},168:function(e,t){},169:function(e,t){},172:function(e,t){},173:function(e,t){},174:function(e,t){},176:function(e,t,a){"use strict";var n=a(96);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(2)),o=(0,n(a(98)).default)(r.default.createElement(r.default.Fragment,null,r.default.createElement("circle",{cx:"12",cy:"12",r:"3.2"}),r.default.createElement("path",{d:"M9 2L7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2H9zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z"})),"PhotoCamera");t.default=o},205:function(e,t,a){"use strict";var n=a(96);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(2)),o=(0,n(a(98)).default)(r.default.createElement("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreVert");t.default=o},293:function(e,t,a){},397:function(e,t,a){"use strict";var n=a(96);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(2)),o=(0,n(a(98)).default)(r.default.createElement("path",{d:"M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11l-4 4z"}),"Videocam");t.default=o},398:function(e,t,a){},459:function(e,t,a){"use strict";var n=a(3),r=a(8),o=a(2),c=a.n(o),l=(a(5),a(22)),i=a(28),u=a(103);var s=function(e,t){var a=function(t,a){return c.a.createElement(u.a,Object(n.a)({ref:a},t),e)};return a.muiName=u.a.muiName,c.a.memo(c.a.forwardRef(a))}(o.createElement("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}));var d=o.forwardRef((function(e,t){var a=e.alt,c=e.children,i=e.classes,u=e.className,d=e.component,f=void 0===d?"div":d,m=e.imgProps,h=e.sizes,v=e.src,b=e.srcSet,p=e.variant,E=void 0===p?"circle":p,g=Object(r.a)(e,["alt","children","classes","className","component","imgProps","sizes","src","srcSet","variant"]),O=null,j=function(e){var t=e.src,a=e.srcSet,n=o.useState(!1),r=n[0],c=n[1];return o.useEffect((function(){if(t||a){c(!1);var e=!0,n=new Image;return n.src=t,n.srcSet=a,n.onload=function(){e&&c("loaded")},n.onerror=function(){e&&c("error")},function(){e=!1}}}),[t,a]),r}({src:v,srcSet:b}),y=v||b,S=y&&"error"!==j;return O=S?o.createElement("img",Object(n.a)({alt:a,src:v,srcSet:b,sizes:h,className:i.img},m)):null!=c?c:y&&a?a[0]:o.createElement(s,{className:i.fallback}),o.createElement(f,Object(n.a)({className:Object(l.a)(i.root,i.system,i[E],u,!S&&i.colorDefault),ref:t},g),O)}));t.a=Object(i.a)((function(e){return{root:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none"},colorDefault:{color:e.palette.background.default,backgroundColor:"light"===e.palette.type?e.palette.grey[400]:e.palette.grey[600]},circle:{},rounded:{borderRadius:e.shape.borderRadius},square:{borderRadius:0},img:{width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4},fallback:{width:"75%",height:"75%"}}}),{name:"MuiAvatar"})(d)},486:function(e,t,a){"use strict";a.r(t);var n=a(26),r=a(2),o=a.n(r),c=a(10),l=a(35),i=a(14),u=a(42),s=a(50),d=a(459),f=a(176),m=a.n(f),h=a(397),v=a.n(h),b=(a(293),a(157)),p=a.n(b);var E=function(e){var t,a,c,u,f,h=e.id,b=e.data,E=Object(r.useState)([]),g=Object(n.a)(E,2),O=g[0],j=g[1],y=Object(l.b)(),S=Object(n.a)(y,1)[0].user,_=Object(r.useState)(""),z=Object(n.a)(_,2),w=z[0],N=z[1];return Object(r.useEffect)((function(){h&&i.b.collection("rooms").doc(h).collection("messages").orderBy("timestamp","desc").onSnapshot((function(e){return j(e.docs.map((function(e){return e.data()})))}))}),[h]),Object(r.useEffect)((function(){var e=b.participants.filter((function(e){return e!==S.uid}));i.b.collection("users").doc(e[0]).onSnapshot((function(e){N(e.data())}))}),[]),o.a.createElement(o.a.Suspense,{fallback:o.a.createElement("p",null,"Loading")},o.a.createElement(s.b,{to:"/rooms/".concat(h),className:"sidebarChat__link"},o.a.createElement("div",{className:"sidebarChat"},o.a.createElement(d.a,{src:null===w||void 0===w?void 0:w.photoURL}),o.a.createElement("div",{className:"sidebarChat__info"},o.a.createElement("h2",null,null===w||void 0===w?void 0:w.name),(null===(t=O[0])||void 0===t?void 0:t.photo)?o.a.createElement("div",{className:"sideChat__photo"},o.a.createElement(m.a,null)," ",o.a.createElement("span",null,"Photo")):null,(null===(a=O[0])||void 0===a?void 0:a.video)?o.a.createElement("div",{className:"sideChat__photo"},o.a.createElement(v.a,null)," ",o.a.createElement("span",null,"Video")):null,o.a.createElement("p",null,(null===(c=O[0])||void 0===c?void 0:c.message)?function(e){var t=p.a.AES.decrypt(e,"my-secret-key@123").toString(p.a.enc.Utf8);return e?t:e}(null===(u=O[0])||void 0===u?void 0:u.message):""),o.a.createElement("p",null,null===(f=O[0])||void 0===f?void 0:f.url)))))},g=a(92),O=a(205),j=a.n(O),y=(a(398),o.a.lazy((function(){return a.e(32).then(a.bind(null,471))}))),S=o.a.lazy((function(){return a.e(35).then(a.t.bind(null,472,7))})),_=o.a.lazy((function(){return Promise.all([a.e(0),a.e(1),a.e(4),a.e(23)]).then(a.bind(null,177))})),z=o.a.lazy((function(){return Promise.all([a.e(0),a.e(1),a.e(7),a.e(18),a.e(30)]).then(a.bind(null,474))})),w=o.a.lazy((function(){return Promise.all([a.e(0),a.e(1),a.e(19),a.e(25)]).then(a.bind(null,487))})),N=o.a.lazy((function(){return a.e(8).then(a.bind(null,277))})),C=o.a.lazy((function(){return Promise.all([a.e(1),a.e(3),a.e(26)]).then(a.bind(null,180))}));t.default=function(e){var t=e.rooms,a=e.setIsRoomExist,s=e.isRoomExist,d=e.fetchrooms,f=Object(c.g)(),m=Object(c.h)().roomId,h=Object(l.b)(),v=Object(n.a)(h,1)[0].user,b=Object(r.useState)(""),p=Object(n.a)(b,2),O=p[0],k=p[1],x=Object(r.useState)(!1),M=Object(n.a)(x,2),R=M[0],P=M[1],L=Object(r.useState)(!1),A=Object(n.a)(L,2),I=A[0],F=A[1],D=Object(r.useState)(!1),U=Object(n.a)(D,2),T=U[0],V=U[1],B=Object(r.useState)(!1),H=Object(n.a)(B,2),J=H[0],q=H[1],G=Object(r.useState)(null),K=Object(n.a)(G,2),Q=K[0],W=K[1],X=Object(r.useState)(null),Y=Object(n.a)(X,2),Z=Y[0],$=Y[1],ee=Object(r.useState)(!1),te=Object(n.a)(ee,2),ae=te[0],ne=te[1],re=function(e){return function(t){return(t.data.name+"").toLowerCase().includes(e.toLowerCase())||!e}};Object(r.useEffect)((function(){O&&(o.a.createElement(o.a.Fragment,null,t.filter(re(O)).map((function(e){return o.a.createElement("p",{key:e.id},e.name)}))).props.children.length>0?ne(!0):ne(!1));if(t){var e=t.findIndex((function(e,t){return e.id===m}));e>=0?a(e):-1===e&&(a(e),f.push("/"))}}),[O,t,m,f,a]),Object(r.useEffect)((function(){t&&(t.length>0?(F(!1),P(!0)):0===t.length&&-1===s&&(F(!0),P(!0)))}),[s,t]),Object(r.useEffect)((function(){oe()}),[]);var oe=function(){i.b.collection("users").onSnapshot((function(e){return $(e.docs.map((function(e){return e.data()})))}))},ce=function(){W(null),V(!0)},le=function(e){W(e.currentTarget)},ie=[{title:"Profile",onClick:function(){return ce()},id:1e5*Math.random()},{title:"Archived",onClick:function(){Object(u.a)("Archive is not yet available!","archive","top-center")},id:1e5*Math.random()},{title:"Starred",onClick:function(){Object(u.a)("Starred is not yet available!","starred","top-center")},id:1e5*Math.random()},{title:"Settings",onClick:function(){Object(u.a)("Settings is not yet available!","settings","top-center")},id:1e5*Math.random()},{title:"Logout",onClick:function(){!0===v.isAnonymous?i.a.currentUser.delete().then((function(){f.push("/")})).catch((function(e){console.log("error deleting anonymous user",e)})):i.a.signOut()}}];return o.a.createElement(o.a.Suspense,{fallback:o.a.createElement("p",null,"Loading")},o.a.createElement("div",{className:"sidebar"},o.a.createElement("div",{className:"sidebar__header"},o.a.createElement(y,{id:"UserProfile",photoURL:v.photoURL,onClick:function(){return ce()}}),o.a.createElement(z,{drawerLeft:T,setDrawerLeft:V,db:i.b,auth:i.a,storage:i.e}),o.a.createElement("div",{className:"sidebar__headerRight"},o.a.createElement(w,{drawer2:J,setDrawer2:q,userData:Z,db:i.b,auth:i.a,storage:i.e,fetchrooms:d}),o.a.createElement(C,{icon:o.a.createElement(S,{style:{color:"#de5751"}}),name:"New Chat",onClick:function(){return W(null),void q(!0)}}),o.a.createElement(C,{name:"Menu",icon:o.a.createElement(j.a,{style:{color:"#de5751"}}),onClick:le}),o.a.createElement(_,{menuLists:ie,menu:Q,handleMenuOpen:le,handleMenuClose:function(){W(null)}}))),o.a.createElement(N,{search:O,setSearch:k,placeholder:"Search or start new chat"}),o.a.createElement("div",{className:"sidebar__chats"},R?o.a.createElement(o.a.Fragment,null,O?o.a.createElement(o.a.Fragment,null,ae?o.a.createElement("div",null,t.filter(re(O)).map((function(e){return o.a.createElement(E,{key:e.id,id:e.id,data:e.data,name:e.data.name,owner:e.data.roomOwner})}))):o.a.createElement("div",{className:"sidebar__chatsContainer_empty"},o.a.createElement("span",null,"No chat room found"))):o.a.createElement(o.a.Fragment,null,t.map((function(e){return o.a.createElement(E,{key:e.id,id:e.id,data:e.data,name:e.data.name,owner:e.data.roomOwner})})))):o.a.createElement("div",{className:"sidebar__chatsContainer_loading"},o.a.createElement("div",null,o.a.createElement(g.a,null))),I&&R?o.a.createElement("div",{className:"sidebar__chatsContainer_empty"},o.a.createElement("span",null,"No chats")):null)))}},96:function(e,t){e.exports=function(e){return e&&e.__esModule?e:{default:e}}},98:function(e,t,a){"use strict";var n=a(96);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var a=o.default.memo(o.default.forwardRef((function(t,a){return o.default.createElement(c.default,(0,r.default)({ref:a},t),e)})));0;return a.muiName=c.default.muiName,a};var r=n(a(106)),o=n(a(2)),c=n(a(108))}}]);
//# sourceMappingURL=13.8989248d.chunk.js.map